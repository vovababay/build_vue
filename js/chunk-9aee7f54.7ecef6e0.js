(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9aee7f54"],{"2dd8":function(t,e,a){"use strict";var n=a("5530"),r=a("1da1");a("498a"),a("99af"),a("96cf");e["a"]={data:function(){return{loading:!0,buttonDisabled:!1}},methods:{getEntity:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,t.$store.dispatch("app/getItem",{entityName:t.entityName,id:t.getID});case 4:a=e.sent,t.formData=Object(n["a"])(Object(n["a"])({},t.formData),a.data),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},trimWhitespaces:function(t){for(var e in t)t[e]===String&&t[e].trim()},saveEntity:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.buttonDisabled=!0,t.trimWhitespaces(t.formData),e.next=5,t.$store.dispatch("app/saveEntity",{id:t.getID,data:t.formData,method:t.method,entityName:t.entityName});case 5:a=e.sent,t.$notification.success({message:t.getMessage}),t.$router.push("/".concat(t.entityName,"/read/").concat(a.id)),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),t.$errors.showOnce(e.t0.response.data);case 14:return e.prev=14,t.buttonDisabled=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})))()},deleteItem:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,e.$store.dispatch("app/deleteItem",{entityName:e.entityName,id:t});case 4:e.$notification.success({message:"Успешно удалено"}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.log(a.t0),e.$errors.showOnce(a.t0.response.data);case 11:return a.prev=11,e.loading=!1,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,7,11,14]])})))()}},computed:{disabled:function(){return"read"===this.action},getID:function(){if("_"!==this.id)return this.id},method:function(){switch(this.action){case"create":return"post";case"edit":return"patch";default:return null}},getButtonAction:function(){switch(this.action){case"create":return"Создать";case"read":return"Редактировать";case"edit":return"Сохранить"}},getAction:function(){switch(this.action){case"create":return"Создание";case"read":return"Просмотр";case"edit":return"Редактирование"}},getMessage:function(){switch(this.action){case"create":return"Успешно создано";case"edit":return"Успешно сохранено"}}}}},"498a":function(t,e,a){"use strict";var n=a("23e7"),r=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),r=a("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"7e4a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("x-crud",{attrs:{loading:t.loading}},[a("x-form",{attrs:{values:t.formData},on:{submit:t.onsubmit},model:{value:t.formData,callback:function(e){t.formData=e},expression:"formData"}},[a("a-row",{attrs:{gutter:[24,24]}},[a("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[a("x-input",{attrs:{label:"Название",name:"name",type:"text",validation:"required",disabled:t.disabled}}),a("x-input",{attrs:{label:"Номинация",name:"nomination",options:t.$store.getters["app/optionNomination"],type:"select",validation:"required",disabled:t.disabled}}),a("x-input",{attrs:{label:"Элементы заполнения",type:"checkbox",name:"checkboxes",options:t.checkboxes,"error-behavior":"submit",disabled:t.disabled}})],1),a("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[a("x-input",{attrs:{type:"number",name:"max_count_achievement",label:"Максимальное количество достижений",validation:"required|number|min:0|max:50",min:"0",max:"200",disabled:t.disabled}}),a("x-input",{attrs:{type:"number",name:"count_score_per_achievement",label:"Балл за достижение",validation:"required|number|min:0|max:50",min:"0",max:"200",disabled:t.disabled}}),a("x-input",{attrs:{label:"Период",name:"period",options:t.$store.getters["app/optionPeriod"],type:"select",validation:"required",disabled:t.disabled}})],1),t.formData.checkboxes&&t.formData.checkboxes.includes("hint")?a("a-col",{attrs:{span:"24"}},[a("x-input",{attrs:{label:"Подсказка",name:"hint_text",type:"textarea",disabled:t.disabled,validation:"required|max:"+t.textareaMaxLength+",length",help:t.formData.test&&"Максимально "+t.textareaMaxLength+". "+(t.textareaMaxLength-t.formData.test.length<=0?0:t.textareaMaxLength-t.formData.test.length)+" символось осталось."}})],1):t._e(),a("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[a("div",{staticClass:"crud-form-button"},[a("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[t._v(" "+t._s(t.getButtonAction)+" ")])],1)])],1)],1)],1)},r=[],i=a("1da1"),o=(a("96cf"),a("d81d"),a("caad"),a("2532"),a("2dd8")),s={props:["action","id"],mixins:[o["a"]],data:function(){return{formData:{checkboxes:[]},indicator:null,entityName:"indicator",textareaMaxLength:512,checkboxes:[{value:"degree_participation",label:"Степень участия"},{value:"document",label:"Документ"},{value:"other",label:"Другое"},{value:"url",label:"Ссылка на видео"},{value:"hint",label:"Подсказка"}]}},methods:{onsubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("read"!==t.action){e.next=3;break}return t.$router.push("/indicator/edit/".concat(t.id)),e.abrupt("return");case 3:return t.checkboxes.map((function(e){t.formData[e.value]=t.formData.checkboxes.includes(e.value)})),t.formData.checkboxes.includes("hint")||(t.formData.hint_text=null),e.next=7,t.saveEntity(t.formData);case 7:case"end":return e.stop()}}),e)})))()},getEntities:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$store.dispatch("app/getEntities",{entityName:t});case 3:a.next=8;break;case 5:a.prev=5,a.t0=a["catch"](0),console.log(a.t0);case 8:case"end":return a.stop()}}),a,null,[[0,5]])})))()},renderCheckboxes:function(){var t=this;this.formData.nomination="".concat(this.formData.nomination.id),this.formData.period="".concat(this.formData.period.id),this.formData.hint_text&&this.formData.checkboxes.push("hint");var e=function(e){t.checkboxes.some((function(a){return a.value===e&&t.formData[e]}))&&t.formData.checkboxes.push(e)};for(var a in this.formData)e(a)}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getEntities("nomination");case 2:return e.next=4,t.getEntities("period");case 4:if("create"===t.action){e.next=8;break}return e.next=7,t.getEntity(t.id);case 7:t.renderCheckboxes();case 8:t.loading=!1,console.log(t.formData);case 10:case"end":return e.stop()}}),e)})))()}},c=s,u=a("2877"),d=Object(u["a"])(c,n,r,!1,null,"0161688c",null);e["default"]=d.exports},c8d2:function(t,e,a){var n=a("d039"),r=a("5899"),i="​᠎";t.exports=function(t){return n((function(){return!!r[t]()||i[t]()!=i||r[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-9aee7f54.7ecef6e0.js.map