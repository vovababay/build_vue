(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin~profile"],{"026f":function(e,t,i){"use strict";i("eb47")},"0536":function(e,t,i){},"0987":function(e,t,i){"use strict";i("727d")},"139c":function(e,t,i){},2909:function(e,t,i){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function a(e){if(Array.isArray(e))return n(e)}function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){if(e){if("string"===typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return a(e)||r(e)||s(e)||o()}i.d(t,"a",(function(){return c}))},"2d21":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"document-container"},[i("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.indicator.name)+" ")]),e.indicator.hint_text?i("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.indicator.hint_text)+" ")]):e._e(),i("div",[i("ol",{staticClass:"achievement-list"},[e._l(e.indicator.achievements,(function(t,n){return i("upload-achievements-item-info",{key:t.id,attrs:{position:n+1,participationDegree:e.participationDegree,setFiles:e.setFiles,item:t,disabled:!0,isAdmin:e.isAdmin,onlyRead:e.onlyRead,indicator:e.indicator},on:{remove:function(t){return e.$emit("remove",t)}}})})),e.isAdmin||e.onlyRead?e._e():i("x-form",{attrs:{values:e.form,name:"achievementForm"},on:{submit:function(t){return e.submit(e.indicator.id)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[i("upload-achievements-item",{key:e.achievements.length+1,attrs:{setFiles:e.setFiles,position:e.achievements.length+1,participationDegree:e.participationDegree,indicator:e.indicator}})],1)],2)])])},a=[],r=i("5530"),s=i("1da1"),o=(i("96cf"),i("b48b")),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"achievement-list__item only-achievements"},[e.isVisible?e._e():i("div",{staticClass:"achievement-list__item--info"},[i("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[i("span",{staticClass:"count"},[e._v(e._s(e.position))]),i("x-input",{staticClass:"item-name",attrs:{name:"name",type:"text",validation:"required",label:"Название достижения","error-behavior":"submit"}}),e.indicator.degree_participation?i("x-input",{staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:e.participationDegree,label:"Степень участия","error-behavior":"submit"}}):e._e(),i("x-input",{staticClass:"item-period",attrs:{name:"period",type:"select",validation:"required",options:e.getPeriod,label:"Год","error-behavior":"submit"}})],1),i("div",{staticClass:"achievement-list__item--info--block"},[e.indicator.url?i("x-input",{staticStyle:{width:"100%"},attrs:{type:"url",name:"url",validation:"required",label:"Вставьте ссылку на видео","error-behavior":"submit"}}):e._e()],1),i("div",{staticClass:"achievement-list__item--info--block"},[e.indicator.document?i("file-component",{attrs:{hint_text:"Файлы загружаются по принципу: 1 поле - 1 файл. Если нужно прикрепить несколько документов к одному полю, вы можете объединить их в 1 многостраничный pdf. Документ должен четко читаться и отображаться."},on:{change:function(t){return e.setFiles(t)}}}):e._e()],1),i("a-button",{staticClass:"document-container-button achievement-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Сохранить данные достижения")])],1)],1)])},l=[],u=(i("a9e3"),{components:{FileComponent:o["a"]},props:{participationDegree:{type:Array,required:!0},position:{type:Number,required:!0},setFiles:{type:Function,required:!1},indicator:{type:Object,required:!0}},computed:{isVisible:function(){return this.indicator.max_count_achievement===this.indicator.achievements.length},getPeriod:function(){for(var e=this.indicator.period,t=e.start_achievement,i=e.finish_achievement,n=[],a=t;a<=i;a++)n.push(a);return n}}}),m=u,d=(i("deca"),i("5b2d"),i("2877")),p=Object(d["a"])(m,c,l,!1,null,"c80fa624",null),f=p.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[i("div",{staticClass:"achievement-list__item--tools"},[i("span",{staticClass:"count"},[e._v(e._s(e.position))]),e.onlyRead||e.checkout?e._e():i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить достижение")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:e.deleteAchievement}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",{ref:"name-info",on:{click:function(t){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_status)&&e.setValue("name")}}},[e._v(e._s(e.item.name))]),i("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"name-edit",attrs:{type:"text",name:"name",disabled:e.inputDisabled},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveValue.apply(null,arguments)}},model:{value:e.newname,callback:function(t){e.newname=t},expression:"newname"}})],1),e.item.degree_participation?i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",{ref:"degree_participation-info",on:{click:function(t){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_status)&&e.setValue("degree_participation")}}},[e._v(e._s(e.item.degree_participation))]),i("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"degree_participation-edit",staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:e.participationDegree,"error-behavior":"submit",disabled:e.inputDisabled},on:{change:e.saveValue},model:{value:e.newdegree_participation,callback:function(t){e.newdegree_participation=t},expression:"newdegree_participation"}})],1):e._e(),i("div",{staticClass:"achievement-list__item--read--item item-period"},[i("span",{ref:"period-info",on:{click:function(t){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_status)&&e.setValue("period")}}},[e._v(e._s(e.item.period))]),i("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"period-edit",staticClass:"item-period",attrs:{validation:"required",type:"select",options:e.getPeriod,"error-behavior":"submit",disabled:e.inputDisabled},on:{change:e.saveValue},model:{value:e.newperiod,callback:function(t){e.newperiod=t},expression:"newperiod"}})],1)]),e.item.url?i("div",{staticClass:"achievement-list__item--read--item"},[i("span",{ref:"url-info",on:{click:function(t){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_status)&&e.setValue("url")}}},[e._v(e._s(e.item.url))]),i("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"url-edit",attrs:{type:"text",disabled:e.inputDisabled},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveValue.apply(null,arguments)}},model:{value:e.newurl,callback:function(t){e.newurl=t},expression:"newurl"}})],1):e._e(),e.item.documents.length?i("div",{staticClass:"file-container"},[i("div",{staticClass:"file-container__files"},[i("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(e.item.documents[0].document),target:"_blank"}},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(e.item.documents[0].documentName))])],1)])]):e._e(),e.checkout?i("div",{staticClass:"achievement-list__item--checkout"},[i("h6",[i("span",[e._v(e._s(e.getStatus.name))])]),e.checkout?i("div",{staticClass:"checkout-buttons"},["awaiting_verification"===e.stage_status?i("a-button",{staticClass:"login-form-button",attrs:{type:"primary",block:"","html-type":"submit"},on:{click:function(t){return e.checkWork("in_work")}}},[e._v(" Взять в работу ")]):e._e(),"in_work"===e.stage_status?i("a-button",{staticClass:"login-form-button",attrs:{type:"primary",block:"","html-type":"submit"},on:{click:function(t){return e.checkWork("accepted")}}},[e._v(" Принять ")]):e._e(),"in_work"===e.stage_status?i("a-button",{staticClass:"login-form-button",attrs:{type:"info",block:"","html-type":"submit"},on:{click:function(t){return e.checkWork("rejected")}}},[e._v(" Отклонить ")]):e._e(),"in_work"===e.stage_status?i("a-button",{staticClass:"login-form-button",attrs:{type:"info",block:"","html-type":"submit"},on:{click:function(t){return e.checkWork("awaiting_verification")}}},[e._v(" Снять с работы ")]):e._e()],1):e._e()]):e._e()])},h=[],_=(i("7db0"),i("99af"),i("a434"),i("5b55")),b=(i("cd3f"),"https://студентгода63.рф/media"),y={components:{FileComponent:o["a"]},data:function(){return{media:b,type:"info",inputDisabled:!1,newname:null,newdegree_participation:null,newperiod:null,newurl:null,stage_status:null}},props:{participationDegree:{type:Array,required:!0},position:{type:Number,required:!0},setFiles:{type:Function,required:!1},item:{type:Object,required:!0},indicator:{type:Object,required:!0},onlyRead:{type:Boolean,required:!1}},mounted:function(){this.checkout&&(this.stage_status=this.item.stage_status)},computed:{checkout:function(){return this.$route.meta.check},getStatus:function(){var e=this,t=this.statusText.find((function(t){return t.key===e.stage_status}));return t},statusText:function(){return[{key:"awaiting_verification",name:"Ожидает проверки"},{key:"in_work",name:"В работе"},{key:"accepted",name:"Принято"},{key:"rejected",name:"Отклонено"}]},getPeriod:function(){for(var e=this.indicator.period,t=e.start_achievement,i=e.finish_achievement,n=[],a=t;a<=i;a++)n.push(a);return n}},methods:{getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},deleteAchievement:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0,confirmButtonText:"Удалить",cancelButtonText:"Отмена"});case 2:i=t.sent,n=i.isConfirmed,n&&e.$emit("remove",e.item.id);case 5:case"end":return t.stop()}}),t)})))()},openInput:function(){this.$refs[this.currentFieldWork+"-info"].style="display: none",this.$refs[this.currentFieldWork+"-edit"].$el.style="display: block",this.$forceUpdate()},closeInput:function(){this.$refs[this.currentFieldWork+"-info"].style="display: block",this.$refs[this.currentFieldWork+"-edit"].$el.style="display: none",this.$forceUpdate()},setValue:function(e){var t=this;this.currentFieldWork&&this.closeInput(),this.$nextTick((function(){t.currentFieldWork=e,t.openInput(),t["new".concat(t.currentFieldWork)]=t.item[t.currentFieldWork.toLowerCase()]}))},saveValue:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},i[e.currentFieldWork]=e["new".concat(e.currentFieldWork)],t.prev=2,e.inputDisabled=!0,t.next=6,e.$store.dispatch("app/saveEntity",{data:i,method:"patch",id:e.item.id,entityName:"".concat(_["a"])});case 6:t.sent,e.$toast.success("Успешно сохранено"),e.closeInput(),e.item[e.currentFieldWork.toLowerCase()]=e["new".concat(e.currentFieldWork)],e.currentFieldWork=null,e.$forceUpdate(),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](2),console.log(t.t0),e.$toast.success("Ошибка");case 18:return t.prev=18,e.inputDisabled=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[2,14,18,21]])})))()},removeFile:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("app/saveEntity",{data:{documents:[]},method:"patch",id:t.item.id,entityName:"".concat(_["a"])});case 3:e.sent,t.item.documents.splice(0,1),t.$forceUpdate(),t.$toast.success("Успешно удалено"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0),t.$toast.success("Ошибка");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},checkWork:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.currentFieldWork&&t.closeInput(),i.prev=1,i.next=4,t.$store.dispatch("app/saveEntity",{data:{stage_status:e},method:"patch",id:t.item.id,entityName:"".concat(_["a"])});case 4:n=i.sent,t.stage_status=n.stage_status,i.next=12;break;case 8:i.prev=8,i.t0=i["catch"](1),console.log(i.t0),t.$toast.success("Ошибка");case 12:case"end":return i.stop()}}),i,null,[[1,8]])})))()}}},k=y,g=(i("0987"),i("f751"),Object(d["a"])(k,v,h,!1,null,"4798bee0",null)),C=g.exports,x={components:{UploadAchievementsItem:f,FileComponent:o["a"],UploadAchievementsItemInfo:C},props:{achievements:{type:Array,required:!0},participationDegree:{type:Array,required:!0},indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},isAdmin:{type:Boolean,required:!1},onlyRead:{type:Boolean,required:!1}},data:function(){return{form:{},documents:[]}},methods:{setFiles:function(e){this.documents=e},submit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.saveAchievement(Object(r["a"])(Object(r["a"])({},t.form),{},{documents:t.documents,indicators:e}),"achievementForm");case 3:t.form={},i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.log(i.t0);case 9:case"end":return i.stop()}}),i,null,[[0,6]])})))()}}},w=x,F=(i("3e35"),i("5c7b"),Object(d["a"])(w,n,a,!1,null,null,null));t["a"]=F.exports},"36aa":function(e,t,i){},"3d50":function(e,t,i){},"3e35":function(e,t,i){"use strict";i("7bd3")},4032:function(e,t,i){},4475:function(e,t,i){"use strict";i("6419")},5306:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"document-container upload-spec-org"},[i("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.indicator.name)+" ")]),i("div",[e.achievements.length||e.onlyRead?i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[e.onlyRead?e._e():i("div",{staticClass:"achievement-list__item--tools"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить достижение")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:e.deleteAchievement}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("Название достижения")]),i("span",[e._v(e._s(e.achievements[0].name))])]),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("ФИО организатора")]),i("span",[e._v(e._s(e.achievements[0].full_name_head_organization))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Курс")]),i("span",[e._v(e._s(e.achievements[0].course_head_organization))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Номер телефона")]),i("span",[e._v(e._s(e.achievements[0].phone_head_organization))])]),i("div",{staticClass:"achievement-list__item--read--item item-period"},[i("span",[e._v("E-mail")]),i("span",[e._v(e._s(e.achievements[0].email_head_organization))])])])]):i("x-form",{attrs:{values:e.form,name:"spec-org"},on:{submit:function(t){return e.submit(e.indicator.id)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[i("x-input",{attrs:{type:"text",name:"name",label:"Название достижения",validation:"required"}}),i("x-input",{attrs:{type:"text",name:"full_name_head_organization",label:"ФИО организатора",validation:"isFullName","validation-rules":{isFullName:function(e){var t=e.value;return 3===t.trim().split(" ").length}},"validation-messages":{isFullName:"Введите ФИО"}}}),i("x-input",{attrs:{type:"select",options:[1,2,3,4,5,6],name:"course_head_organization",label:"Курс",validation:"required"}}),i("x-input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"`+7 (###) ###-##-##`"}],attrs:{type:"tel",name:"phone_head_organization",label:"Номер телефона",validation:[["required"],["min","18"]]}}),i("x-input",{attrs:{type:"email",name:"email_head_organization",label:"E-mail",validation:"required"}}),i("a-button",{staticClass:"document-container-button achievement-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Сохранить данные достижения")])],1)],1)],1)])},a=[],r=i("5530"),s=i("1da1"),o=(i("96cf"),i("b48b")),c=i("f72f"),l=i("7561"),u=i("3a60"),m={directives:{mask:u["mask"]},components:{FileComponent:o["a"],UploadSpecParticipant:c["a"],UploadSpecDescription:l["a"]},props:{indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},achievements:{type:Array,required:!0},onlyRead:{type:Boolean,required:!1}},data:function(){return{form:{}}},methods:{submit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.saveAchievement(Object(r["a"])(Object(r["a"])({},t.form),{},{indicators:e}),"spec-org");case 3:t.form={},i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.log(i.t0);case 9:case"end":return i.stop()}}),i,null,[[0,6]])})))()},deleteAchievement:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0});case 2:i=t.sent,n=i.isConfirmed,n&&e.$emit("remove",e.achievements[0].id);case 5:case"end":return t.stop()}}),t)})))()}}},d=m,p=i("2877"),f=Object(p["a"])(d,n,a,!1,null,null,null);t["a"]=f.exports},5904:function(e,t,i){"use strict";i("36aa")},"5b2d":function(e,t,i){"use strict";i("6b40")},"5c7b":function(e,t,i){"use strict";i("c155")},6419:function(e,t,i){},"6b40":function(e,t,i){},"727d":function(e,t,i){},7561:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"achievement-spec-block achievement-spec-block--descirption"},[i("x-input",{staticClass:"item-name",attrs:{name:"name_association",type:"text",validation:"required",label:"Наименование ассоциации","error-behavior":"submit"}}),i("x-input",{staticClass:"item-participation",attrs:{name:"educational_organization",type:"text",validation:"required",label:"Образовательная организация","error-behavior":"submit"}}),i("x-input",{staticClass:"item-period",attrs:{name:"year_foundation",type:"number",min:"1900",max:"2100",validation:"required:min:1900|max:2100",label:"Год основания","error-behavior":"submit"}}),i("x-input",{staticClass:"item-period",attrs:{name:"brief_description_association",type:"textarea",validation:"required",label:"Характеристика","error-behavior":"submit"}})],1)},a=[],r={},s=r,o=(i("5904"),i("2877")),c=Object(o["a"])(s,n,a,!1,null,null,null);t["a"]=c.exports},"75a1":function(e,t,i){"use strict";i("894d")},"7bd3":function(e,t,i){},"7db0":function(e,t,i){"use strict";var n=i("23e7"),a=i("b727").find,r=i("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},"894d":function(e,t,i){},"9ebe":function(e,t,i){"use strict";i("b60a")},a56a:function(e,t,i){},a8f3:function(e,t,i){"use strict";i("3d50")},ac3d:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"document-container"},[i("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.questionnaire.name)+" ")]),"only_file"===e.questionnaire.type?i("div",{},[e.questionnaire.first_help_text?i("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.first_help_text)+" ")]):e._e(),i("div",{staticClass:"achievement-list__item--info--block"},[e.only_file_document?i("div",{staticClass:"file-container"},[i("div",{staticClass:"file-container__files questionnaire-file only-file"},[i("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(e.only_file_document),target:"_blank"}},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(e.addDocumentName(e.only_file_document)))])],1),e.onlyRead?e._e():i("v-icon",{staticClass:"times-icon",attrs:{name:"times"},on:{click:function(t){t.stopPropagation(),e.only_file_document=null}}})],1)]):i("file-component",{attrs:{title:e.questionnaire.title,acceptFormats:e.questionnaire.acceptFormats},on:{change:function(t){return e.setFiles(t)}}})],1)]):e._e(),"multiple"===e.questionnaire.type?i("div",[e.questionnaire.first_help_text?i("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.first_help_text)+" ")]):e._e(),i("upload-questionnaire-characteristic",{attrs:{onlyRead:e.onlyRead,isAdmin:e.isAdmin,characteristics:e.characteristics},on:{remove:e.removeCharacteristic,add:e.addCharacteristic}})],1):e._e(),"radio_and_multiple"===e.questionnaire.type?i("div",{},[e.isAdmin||e.onlyRead?e._e():i("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.subname)+" ")]),e.isAdmin||e.onlyRead?e._e():i("FormulateInput",{staticClass:"inline-checkbox",attrs:{type:"radio",name:"yes-"+e.questionnaire.id,options:e.yesno},model:{value:e.yesValue,callback:function(t){e.yesValue=t},expression:"yesValue"}}),"yes"===e.yesValue?i("div",{staticClass:"achievement-spec-block--reports"},[e.questionnaire.first_help_text?i("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.first_help_text)+" ")]):e._e(),i("upload-questionnaire-report",{attrs:{onlyRead:e.onlyRead,isAdmin:e.isAdmin,reports:e.reports},on:{removeReport:e.removeReport,addReport:e.addReport}}),e.questionnaire.second_help_text&&!e.isAdmin?i("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.second_help_text)+" ")]):e._e(),e.isAdmin||e.onlyRead?e._e():i("file-component",{attrs:{multiple:""},on:{change:function(t){return e.setFiles(t)}}}),i("div",{staticClass:"file-container"},[i("div",{staticClass:"file-container__files questionnaire-file"},[e.loadedDocuments.length?i("div",{staticClass:"questionnaire-file--files"},e._l(e.loadedDocuments,(function(t,n){return i("div",{key:t.id,staticClass:"multiple-file-questionnaire"},[i("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(t.document),target:"_blank"}},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(e.addDocumentName(t.document)))])],1),e.onlyRead?e._e():i("v-icon",{staticClass:"times-icon",attrs:{name:"times"},on:{click:function(i){return e.deleteDocument(t,n)}}})],1)})),0):e._e()])])],1):e._e()],1):e._e()])},a=[],r=i("1da1"),s=(i("96cf"),i("ac1f"),i("1276"),i("99af"),i("a434"),i("b48b")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"achievement-spec-block rating-block"},[e._l(e.reports,(function(t,n){return i("li",{key:n,staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[i("div",{staticClass:"achievement-list__item--tools"},[i("span",{staticClass:"count"},[e._v(e._s(n+1))]),e.onlyRead?e._e():i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить оценку")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(i){return e.deleteReport(n,t.id)}}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",{ref:"name-info",refInFor:!0,on:{click:function(i){!e.onlyRead&&e.setValue(n,"name",t)}}},[e._v(e._s(t.name))]),i("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"name-edit",refInFor:!0,attrs:{ignored:"",type:"text",disabled:e.inputDisabled},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.saveValue.apply(null,arguments))}},model:{value:e.newname,callback:function(t){e.newname=t},expression:"newname"}})],1),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",{ref:"rating-info",refInFor:!0,on:{click:function(i){!e.onlyRead&&e.setValue(n,"rating",t)}}},[e._v(e._s(t.rating))]),i("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"rating-edit",refInFor:!0,staticClass:"item-participation",attrs:{type:"select",ignored:"",options:e.rating,"error-behavior":"submit",disabled:e.inputDisabled},on:{change:e.saveValue},model:{value:e.newrating,callback:function(t){e.newrating=t},expression:"newrating"}})],1)])])})),!e.isVisible||e.loading||e.isAdmin||e.onlyRead?e._e():i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--info"},[i("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[i("x-form",{staticClass:"achievement-spec-block--form",attrs:{name:"reportForm"},on:{submit:e.addReport},model:{value:e.reportForm,callback:function(t){e.reportForm=t},expression:"reportForm"}},[i("div",{staticClass:"achievement-spec-block--form-item"},[i("span",{staticClass:"count"},[e._v(e._s(e.reports.length+1))]),i("x-input",{staticClass:"item-name",attrs:{name:"name",type:"text",validation:"required",label:"Название предмета","error-behavior":"submit"}}),i("x-input",{staticClass:"item-participation",attrs:{name:"rating",type:"select",validation:"required",options:e.rating,label:"Оценка","error-behavior":"submit"}})],1),i("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Добавить предмет")])],1)],1)],1)])])],2)},c=[],l=i("5530"),u={props:{reports:{type:Array,required:!0},isAdmin:{type:Boolean,required:!1},onlyRead:{type:Boolean,required:!1}},data:function(){return{reportForm:{},rating:[2,3,4,5],loading:!1,newname:null,newrating:null,currentFieldWork:null,currentItemWork:null,inputDisabled:!1}},computed:{isVisible:function(){return this.reports.length<20}},methods:{openInput:function(){this.$refs[this.currentFieldWork+"-info"][this.currentRefIndex].style="display: none",this.$refs[this.currentFieldWork+"-edit"][this.currentRefIndex].$el.style="display: block",this.$forceUpdate()},closeInput:function(){this.$refs[this.currentFieldWork+"-info"][this.currentRefIndex].style="display: block",this.$refs[this.currentFieldWork+"-edit"][this.currentRefIndex].$el.style="display: none",this.$forceUpdate()},setValue:function(e,t,i){var n=this;this.currentFieldWork&&this.closeInput(),this.$nextTick((function(){n.currentFieldWork=t,n.currentItemWork=i,n.currentRefIndex=e,n.openInput(),n["new".concat(n.currentFieldWork)]=n.currentItemWork[n.currentFieldWork.toLowerCase()]}))},saveValue:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i={},i[e.currentFieldWork]=e["new".concat(e.currentFieldWork)],t.prev=2,e.inputDisabled=!0,!e.isAdmin){t.next=8;break}return t.next=7,e.$store.dispatch("app/saveEntity",{data:i,method:"patch",id:e.currentItemWork.id,entityName:"report"});case 7:e.$toast.success("Успешно сохранено");case 8:e.closeInput(),e.currentItemWork[e.currentFieldWork.toLowerCase()]=e["new".concat(e.currentFieldWork)],e.currentFieldWork=null,e.currentItemWork=null,e.currentRefIndex=null,e.$forceUpdate(),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](2),console.log(t.t0),e.$toast.success("Ошибка");case 20:return t.prev=20,e.inputDisabled=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,16,20,23]])})))()},addReport:function(){var e=this;this.loading=!0,this.$emit("addReport",Object(l["a"])({},this.reportForm)),setTimeout((function(){e.reportForm={},e.loading=!1}),0)},deleteReport:function(e,t){this.$emit("removeReport",e,t)}}},m=u,d=(i("026f"),i("2877")),p=Object(d["a"])(m,o,c,!1,null,null,null),f=p.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"achievement-spec-block characteristic"},[e._l(e.characteristics,(function(t,n){return i("li",{key:n,staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[i("div",{staticClass:"achievement-list__item--tools"},[i("span",{staticClass:"count"},[e._v(e._s(n+1))]),e.onlyRead?e._e():i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить характеристику")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(i){return e.deleteCharacteristic(n,t.id)}}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",{ref:"document_type-info",refInFor:!0,on:{click:function(i){!e.onlyRead&&e.setValue("document_type",t,n)}}},[e._v(e._s(t.document_type))]),i("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"document_type-edit",refInFor:!0,attrs:{type:"text",disabled:e.inputDisabled},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.saveValue.apply(null,arguments))}},model:{value:e.newdocument_type,callback:function(t){e.newdocument_type=t},expression:"newdocument_type"}})],1),i("div",{staticClass:"achievement-list__item--read--item"},[i("span",{ref:"year_manufacture-info",refInFor:!0,on:{click:function(i){!e.onlyRead&&e.setValue("year_manufacture",t,n)}}},[e._v(e._s(t.year_manufacture))]),i("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"year_manufacture-edit",refInFor:!0,staticClass:"item-name item-name-year",attrs:{min:"1900",max:"2100",validation:"required:min:1900|max:2100","error-behavior":"submit",disabled:e.inputDisabled},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.saveValue.apply(null,arguments))}},model:{value:e.newyear_manufacture,callback:function(t){e.newyear_manufacture=t},expression:"newyear_manufacture"}})],1),i("div",{staticClass:"achievement-list__item--read--item"},[i("span",{ref:"who_issued-info",refInFor:!0,on:{click:function(i){!e.onlyRead&&e.setValue("who_issued",t,n)}}},[e._v(e._s(t.who_issued))]),i("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"who_issued-edit",refInFor:!0,staticClass:"item-participation",attrs:{type:"select",validation:"required",options:e.issuingAuthority,"error-behavior":"submit",disabled:e.inputDisabled},on:{change:e.saveValue},model:{value:e.newwho_issued,callback:function(t){e.newwho_issued=t},expression:"newwho_issued"}})],1),t.documents&&t.documents.length?i("div",{staticClass:"file-container"},[i("div",{staticClass:"file-container__files"},[t.documents[0].document?i("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(t.documents[0].document),target:"_blank"}},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(t.documents[0].id?e.addDocumentName(t.documents[0].document):t.documents[0].name))])],1):i("a",{staticClass:"file-container__files--file"},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(t.documents[0].id?e.addDocumentName(t.documents[0].document):t.documents[0].name))])],1)])]):e._e()])])})),!e.isVisible||e.loading||e.isAdmin||e.onlyRead?e._e():i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--info"},[i("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[i("x-form",{staticClass:"achievement-spec-block--form",attrs:{valuses:e.form,name:"form"},on:{submit:e.add},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[i("div",{staticClass:"achievement-spec-block--form-item characteristic"},[i("span",{staticClass:"count"},[e._v(e._s(e.characteristics.length+1))]),i("x-input",{staticClass:"item-name",attrs:{name:"document_type",type:"text",validation:"required",label:"Вид документа","error-behavior":"submit"}}),i("x-input",{staticClass:"item-name item-name-year",attrs:{name:"year_manufacture",type:"number",min:"1900",max:"2100",validation:"required:min:1900|max:2100",label:"Год выдачи","error-behavior":"submit"}}),i("x-input",{staticClass:"item-participation",attrs:{name:"who_issued",type:"select",validation:"required",options:e.issuingAuthority,label:"Кто выдал","error-behavior":"submit"}})],1),i("div",{staticClass:"achievement-spec-block--form-item"},[i("file-component",{attrs:{hint_text:"Файлы загружаются по принципу: 1 поле - 1 файл. Если нужно прикрепить несколько документов к одному полю, вы можете объединить их в 1 многостраничный pdf. Документ должен четко читаться и отображаться."},on:{change:function(t){return e.setFiles(t)}}})],1),i("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Добавить характеристику")])],1)],1)],1)])])],2)},h=[],_=(i("d81d"),i("4fad"),i("d3b7"),i("3ca3"),i("ddb0"),i("09bc")),b="https://студентгода63.рф/media",y={components:{FileComponent:s["a"]},props:{characteristics:{type:Array,required:!0},isAdmin:{type:Boolean,required:!1},onlyRead:{type:Boolean,required:!1}},data:function(){return{loading:!1,form:{},media:b,issuingAuthority:_["j"],newdocument_type:null,newyear_manufacture:null,newwho_issued:null,currentFieldWork:null,currentItemWork:null,currentRefIndex:null,inputDisabled:!1,documents:[]}},computed:{isVisible:function(){return this.characteristics.length<3}},methods:{openInput:function(){this.$refs[this.currentFieldWork+"-info"][this.currentRefIndex].style="display: none",this.$refs[this.currentFieldWork+"-edit"][this.currentRefIndex].$el.style="display: block",this.$forceUpdate()},closeInput:function(){this.$refs[this.currentFieldWork+"-info"][this.currentRefIndex].style="display: block",this.$refs[this.currentFieldWork+"-edit"][this.currentRefIndex].$el.style="display: none",this.$forceUpdate()},setValue:function(e,t,i){var n=this;this.currentFieldWork&&this.closeInput(),this.$nextTick((function(){n.currentFieldWork=e,n.currentItemWork=t,n.currentRefIndex=i,n.openInput(),n["new".concat(n.currentFieldWork)]=n.currentItemWork[n.currentFieldWork.toLowerCase()]}))},saveValue:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i={},i[e.currentFieldWork]=e["new".concat(e.currentFieldWork)],t.prev=2,!e.isAdmin){t.next=8;break}return e.inputDisabled=!0,t.next=7,e.$store.dispatch("app/saveEntity",{data:i,method:"patch",id:e.currentItemWork.id,entityName:"characteristic"});case 7:e.$toast.success("Успешно сохранено");case 8:e.closeInput(),e.currentItemWork[e.currentFieldWork.toLowerCase()]=e["new".concat(e.currentFieldWork)],e.currentFieldWork=null,e.currentItemWork=null,e.currentRefIndex=null,e.$forceUpdate(),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](2),console.log(t.t0),Object.entries(t.t0.response.data).map((function(t){e.$toast.error("".concat(t[0]," - ").concat(t[1]))}));case 20:return t.prev=20,e.inputDisabled=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,16,20,23]])})))()},add:function(){var e=this;this.loading=!0,this.$emit("add",Object(l["a"])(Object(l["a"])({},this.form),{},{documents:this.documents})),setTimeout((function(){e.form={},e.loading=!1}),0)},deleteCharacteristic:function(e,t){this.$emit("remove",e,t)},getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},addDocumentName:function(e){if(e){var t=e.split("/");return t[t.length-1]}},setFiles:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Promise.all(e.map(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(i){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new FormData,n.append("document",i),e.prev=2,a=t.$store.dispatch("app/saveEntity",{entityName:"file-characteristic",data:n,method:"post"}),console.log(a),e.abrupt("return",a);case 8:e.prev=8,e.t0=e["catch"](2),t.$toast.error(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()));case 2:n=i.sent,t.documents=n;case 4:case"end":return i.stop()}}),i)})))()}}},k=y,g=(i("daa8"),Object(d["a"])(k,v,h,!1,null,null,null)),C=g.exports,x=i("cd3f"),w=i.n(x),F="https://студентгода63.рф/media",q={components:{FileComponent:s["a"],UploadQuestionnaireReport:f,UploadQuestionnaireCharacteristic:C},props:{questionnaire:{type:Object,required:!0},isProfile:{type:Boolean,required:!1},isAdmin:{type:Boolean,required:!1},onlyRead:{type:Boolean,required:!1}},data:function(){return{id:this.questionnaire.id,media:F,form:{},yesValue:"yes",yesno:{yes:"Да",no:"Нет"},reports:[],documents:[],characteristics:[],only_file_document:null,loadedDocuments:[]}},mounted:function(){"only_file"===this.questionnaire.type&&this.questionnaire.documents&&(this.only_file_document=this.questionnaire.documents),"multiple"===this.questionnaire.type&&this.questionnaire.data&&(this.characteristics=this.questionnaire.data),"radio_and_multiple"===this.questionnaire.type&&this.questionnaire.data&&(this.loadedDocuments=w()(this.questionnaire.data.documents),this.reports=this.questionnaire.data.reports)},methods:{addDocumentName:function(e){if(e){var t=e.split("/");return t[t.length-1]}},getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},setFiles:function(e){this.documents=e},addReport:function(e){this.reports.push(e)},removeReport:function(e,t){var i=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=10;break}return n.prev=1,n.next=4,i.$store.dispatch("app/deleteItem",{entityName:"report",id:t,nothingStoreDelete:!0});case 4:n.next=10;break;case 6:n.prev=6,n.t0=n["catch"](1),console.log(n.t0),i.$errors.show(n.t0.response.data);case 10:i.reports.splice(e,1);case 11:case"end":return n.stop()}}),n,null,[[1,6]])})))()},removeCharacteristic:function(e,t){var i=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=10;break}return n.prev=1,n.next=4,i.$store.dispatch("app/deleteItem",{entityName:"characteristic",id:t,nothingStoreDelete:!0});case 4:n.next=10;break;case 6:n.prev=6,n.t0=n["catch"](1),console.log(n.t0),i.$errors.show(n.t0.response.data);case 10:i.characteristics.splice(e,1);case 11:case"end":return n.stop()}}),n,null,[[1,6]])})))()},addCharacteristic:function(e){this.characteristics.push(e)},deleteDocument:function(e,t){var i=this;this.loading=!0,this.loadedDocuments.splice(t,1),setTimeout((function(){i.loading=!1}),0)}}},R=q,$=(i("a8f3"),i("75a1"),Object(d["a"])(R,n,a,!1,null,null,null));t["a"]=$.exports},b48b:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-container"},[i("div",{staticClass:"file-container__files"},e._l(e.files,(function(t){return i("div",{key:t.name,staticClass:"file-container__files--file"},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(t.name))]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(i){return e.removeFiles(t)}}})],1)})),0),i("FormulateInput",{staticClass:"document-uploader user-upload not-active achievement",attrs:{"label-class":"document-label",name:"documents",type:"file",validation:"mime:"+e.acceptFormat.join(",")+"|download","validation-rules":{download:function(t){t.value;return e.files.length}},"validation-messages":{download:"Загрузите документ"}},scopedSlots:e._u([{key:"element",fn:function(){return[i("input",{ref:"files",staticClass:"document-uploader--input",attrs:{type:"file",multiple:e.multiple,accept:e.acceptFormat.join(","),isDrag:e.dragHover},on:{dragover:function(t){e.dragHover=!0},dragleave:function(t){e.dragHover=!1},dragend:function(t){e.dragHover=!1},drop:e.setFile,change:e.setFile}}),i("label",{staticClass:"document-uploader--custom",attrs:{name:"file",for:"upload"}},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(e.title||e.getLabel))])],1)]},proxy:!0}])}),e.hint_text?i("div",{staticClass:"hint-text-file"},[e._v(" "+e._s(e.hint_text)+" ")]):e._e()],1)},a=[],r=i("1da1"),s=(i("96cf"),i("a434"),i("c740"),i("b0c0"),i("159b"),i("7db0"),i("caad"),i("2532"),i("09bc")),o={props:{multiple:{type:Boolean},title:{type:String,required:!1},acceptFormats:{type:Array,required:!1},hint_text:{type:String,required:!1}},data:function(){return{dragHover:!1,uploadPercentage:0,files:[],acceptFormat:this.acceptFormats?this.acceptFormats:s["a"]}},computed:{getLabel:function(){return this.dragHover?"Перетащите сюда":"Прикрепить файл"}},methods:{removeFiles:function(e){this.files.splice(this.files.findIndex((function(t){return t.name===e.name})),1)},setFile:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var n,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.dragHover=!1,!t.multiple){i.next=6;break}e.target.files.forEach((function(e,i){t.files.find((function(t){return t.name===e.name}));var n=e.size/1024/1024<3;n?t.files.find((function(t){return t.name===e.name}))||(t.acceptFormat.includes(e.type)?t.files.push(e):t.$toast.error("Неккоректный формат")):t.$toast.error("Файл ".concat(e.name," должен быть меньше 3мб"))})),t.$emit("change",t.files),i.next=19;break;case 6:if(n=e.target.files,n.length){i.next=9;break}return i.abrupt("return");case 9:if(a=n[0].size/1024/1024<3,a){i.next=13;break}return t.$toast.error("Файл должен быть меньше 3мб"),i.abrupt("return");case 13:if(t.acceptFormat.includes(n[0].type)){i.next=16;break}return t.$toast.error("Неккоректный формат"),i.abrupt("return");case 16:t.files=[e.target.files[0]],t.$refs.files.value=null,t.$emit("change",t.files);case 19:case"end":return i.stop()}}),i)})))()}}},c=o,l=(i("ebb2"),i("2877")),u=Object(l["a"])(c,n,a,!1,null,"bf8ca2c0",null);t["a"]=u.exports},b60a:function(e,t,i){},bfd1:function(e,t,i){"use strict";t["a"]={data:function(){var e=this;return{infos:[{title:"Личные данные",info:[{name:"Пол",key:"gender",render:function(t){return e.getGender(t)}},{name:"Дата рождения",key:"date_birth",render:function(t){return e.getBirthday(t)}},{name:"Номер телефона",key:"phone_number"},{name:"E-mail",key:"email"},{name:"Гражданство",key:"citizenship"}]},{title:"Адрес",info:[{name:"Регион",key:"region"},{name:"Район/городской округ",key:"locality",render:function(t){return e.getBirthday(t)}},{name:"Населённый пункт",key:"district",render:function(e){return e}},{name:"Почтовый индекс",key:"postal_code"},{name:"Улица",key:"street"},{name:"Номер дома",key:"house"},{name:"Квартира",key:"apartment",require:!1}]},{title:"Образование",info:[{name:"Форма обучения",key:"form_education"},{name:"Место обучения",key:"place_education",render:function(t){return e.getPlaceEducation(t)}},{name:"Образовательная организация",key:"name_place_education"}]}]}}}},c155:function(e,t,i){},daa8:function(e,t,i){"use strict";i("4032")},deca:function(e,t,i){"use strict";i("0536")},eb47:function(e,t,i){},ebb2:function(e,t,i){"use strict";i("139c")},f72f:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ol",{staticClass:"achievement-spec-block spec-participant"},[e._l(e.participants,(function(t,n){return i("li",{key:t.fullname,staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[i("div",{staticClass:"achievement-list__item--tools"},[i("span",{staticClass:"count"},[e._v(e._s(n+1))]),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить участника")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(t){return e.deleteParticipant(n)}}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v(e._s(t.fullname))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v(e._s(t.degree_participation))])])])])})),e.loading?e._e():i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--info"},[i("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[i("x-form",{staticClass:"achievement-spec-block--form",attrs:{name:"participantForm"},on:{submit:e.addParticipant},model:{value:e.participantForm,callback:function(t){e.participantForm=t},expression:"participantForm"}},[i("div",{staticClass:"achievement-spec-block--form-item"},[i("span",{staticClass:"count"},[e._v(e._s(e.participants.length+1))]),i("x-input",{staticClass:"item-name",attrs:{name:"fullname",type:"text",validation:"isFullName",label:"ФИО участника","validation-rules":{isFullName:function(e){var t=e.value;return 3===t.trim().split(" ").length}},"validation-messages":{isFullName:"Введите ФИО"},"error-behavior":"submit"}}),i("x-input",{staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:e.participationDegree,label:"Степень участия","error-behavior":"submit"}})],1),i("a-button",{staticClass:"document-container-button achievement-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Добавить участника")])],1)],1)],1)])])],2)},a=[],r=i("5530"),s={props:{participationDegree:{type:Array,required:!0},participants:{type:Array,required:!0}},data:function(){return{loading:!1,participantForm:{}}},methods:{addParticipant:function(){var e=this;this.loading=!0,this.$emit("add-participant",Object(r["a"])({},this.participantForm)),setTimeout((function(){e.participantForm={},e.loading=!1}),0)},deleteParticipant:function(e){this.$emit("remove-participant",e)}}},o=s,c=(i("9ebe"),i("2877")),l=Object(c["a"])(o,n,a,!1,null,null,null);t["a"]=l.exports},f751:function(e,t,i){"use strict";i("a56a")},fb88:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"document-container upload-spec-org"},[i("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.indicator.name)+" ")]),e.indicator.hint_text?i("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.indicator.hint_text)+" ")]):e._e(),i("div",[e.achievements.length||e.onlyRead?i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[e.onlyRead?e._e():i("div",{staticClass:"achievement-list__item--tools"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить достижение")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:e.deleteAchievement}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("Название достижения")]),i("span",[e._v(e._s(e.achievements[0].name))])]),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("Наименование ассоциации")]),i("span",[e._v(e._s(e.achievements[0].name_association))])]),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("Образовательная организация")]),i("span",[e._v(e._s(e.achievements[0].educational_organization))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Год основания")]),i("span",[e._v(e._s(e.achievements[0].year_foundation))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Характеристика")]),i("span",[e._v(e._s(e.achievements[0].brief_description_association))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Участники")]),i("ul",{staticClass:"participation-person-list"},e._l(e.achievements[0].full_name,(function(t,n){return i("li",{key:n,staticClass:"participation-person-list--item"},[i("span",[e._v(e._s(t[0]))]),i("span",[e._v(e._s(t[1]))])])})),0)]),i("div",{staticClass:"achievement-list__item--read--item item-period"},[i("span",[e._v("Кол-во участников")]),i("span",[e._v(e._s(e.achievements[0].number_participants))])])]),e.achievements[0].documents.length?i("div",{staticClass:"file-container"},[i("div",{staticClass:"file-container__files"},e._l(e.achievements[0].documents,(function(t){return i("a",{key:t.id,staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(t.document),target:"_blank"}},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(t.documentName))])],1)})),0)]):e._e()]):i("x-form",{staticClass:"achievement-spec",attrs:{values:e.form,name:"spec"},on:{submit:function(t){return e.submit(e.indicator.id)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[i("div",{staticClass:"achievement-spec-block"},[i("x-input",{attrs:{type:"text",name:"name",label:"Название достижения",validation:"required"}})],1),i("upload-spec-description"),i("upload-spec-participant",{attrs:{participants:e.participants,participationDegree:e.participationDegree},on:{"remove-participant":e.removeParticipant,"add-participant":e.addParticipant}}),i("div",{staticClass:"achievement-spec-block"},[i("x-input",{attrs:{type:"number",name:"number_participants",label:"Кол-во участников",validation:"required|number|min:0|max:50",min:"0",max:"200"}})],1),i("div",{staticClass:"achievement-spec-block"},[i("file-component",{attrs:{multiple:""},on:{change:function(t){return e.setFiles(t)}}})],1),i("a-button",{staticClass:"document-container-button spec-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Сохранить данные достижения")])],1)],1)],1)])},a=[],r=i("5530"),s=i("1da1"),o=(i("96cf"),i("99af"),i("d81d"),i("a434"),i("b48b")),c=i("f72f"),l=i("7561"),u="https://студентгода63.рф/media",m={components:{FileComponent:o["a"],UploadSpecParticipant:c["a"],UploadSpecDescription:l["a"]},props:{participationDegree:{type:Array,required:!0},indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},achievements:{type:Array,required:!0},onlyRead:{type:Boolean,required:!1}},data:function(){return{media:u,form:{},participants:[],documents:[]}},methods:{getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},setFiles:function(e){this.documents=e},submit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,n=t.participants.map((function(e){return[e.fullname,e.degree_participation]})),i.next=4,t.saveAchievement(Object(r["a"])(Object(r["a"])({},t.form),{},{documents:t.documents,full_name:n,indicators:e}),"spec");case 4:t.form={},i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](0),console.log(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()},deleteAchievement:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0,confirmButtonText:"Удалить",cancelButtonText:"Отмена"});case 2:i=t.sent,n=i.isConfirmed,n&&e.$emit("remove",e.achievements[0].id);case 5:case"end":return t.stop()}}),t)})))()},addParticipant:function(e){this.participants.push(e)},removeParticipant:function(e){this.participants.splice(e,1)}}},d=m,p=(i("4475"),i("2877")),f=Object(p["a"])(d,n,a,!1,null,null,null);t["a"]=f.exports}}]);