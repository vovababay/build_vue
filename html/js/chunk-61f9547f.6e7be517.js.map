{"version":3,"sources":["webpack:///./src/mixins/crudMixin.js","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/views/periods/view.vue?29c0","webpack:///src/views/periods/view.vue","webpack:///./src/views/periods/view.vue?688d","webpack:///./src/views/periods/view.vue"],"names":["data","loading","buttonDisabled","methods","getEntity","isIndicators","$store","dispatch","entityName","id","getID","response","formData","console","log","trimWhitespaces","object","i","String","trim","saveEntity","form","method","$toast","success","getMessage","$router","push","$errors","showOnce","deleteItem","computed","disabled","this","action","getButtonAction","getAction","$","$trim","forcedStringTrimMethod","target","proto","forced","fails","whitespaces","non","module","exports","METHOD_NAME","name","render","_vm","_h","$createElement","_c","_self","attrs","on","onsubmit","model","value","callback","$$v","expression","staticClass","span","offset","comparison","ref","Number","finish_achievement","start_achievement","_v","_s","staticRenderFns","props","mixins","crudMixin","component"],"mappings":"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","file":"js/chunk-61f9547f.6e7be517.js","sourcesContent":["export default {\n  data: () => ({\n    loading: true,\n    buttonDisabled: false,\n  }),\n  methods: {\n    async getEntity(isIndicators) {\n      try {\n        this.loading = true\n        const response = await this.$store.dispatch('app/getItem', {\n          entityName: this.entityName,\n          id: this.getID,\n        })\n        if (isIndicators) return response.data\n        this.formData = {...this.formData, ...response.data}\n        console.log(this.formData)\n      } catch (e) {\n        console.log(e)\n      }\n    },\n    trimWhitespaces(object) {\n      for (let i in object) {\n        if (object[i] === String) object[i].trim()\n      }\n    },\n    async saveEntity(form) {\n      try {\n        this.buttonDisabled = true\n        this.trimWhitespaces(this.formData)\n        const response = await this.$store.dispatch('app/saveEntity', {\n          id: this.getID,\n          data: form ? form : this.formData,\n          method: this.method,\n          entityName: this.entityName\n        })\n        this.$toast.success(this.getMessage)\n        this.$router.push(`/${this.entityName}/read/${response.id}`)\n      } catch(e) {\n        console.log(e)\n        this.$errors.showOnce(e.response.data)\n      } finally {\n        this.buttonDisabled = false\n      }\n    },\n    async deleteItem(id) {\n      this.loading = true\n      try {\n        await this.$store.dispatch('app/deleteItem', {\n          entityName: this.entityName,\n          id\n        })\n        this.$toast.success('Успешно удалено')\n      } catch(e) {\n        console.log(e)\n        this.$errors.showOnce(e.response.data)\n      } finally {\n        this.loading = false\n      }\n    }\n  },\n  computed: {\n    disabled() {\n      return this.action === 'read'\n    },\n    getID() {\n      if (this.id === '_') return\n      return this.id\n    },\n    method() {\n      switch (this.action) {\n        case 'create': return 'post'\n        case 'edit': return 'patch'\t\n        default: return null\n      }\n    },\n    getButtonAction() {\n      switch (this.action) {\n        case 'create': return 'Создать'\n        case 'read': return 'Редактировать'\n        case 'edit': return 'Сохранить'\t\n      }\n    },\n    getAction() {\n      switch (this.action) {\n        case 'create': return 'Создание'\n        case 'read': return 'Просмотр'\n        case 'edit': return 'Редактирование'\t\n      }\n    },\n    getMessage() {\n      switch (this.action) {\n        case 'create': return 'Успешно создано'\n        case 'edit': return 'Успешно сохранено'\t\n      }\n    },\n  }\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('x-crud',{attrs:{\"loading\":_vm.loading}},[_c('x-form',{attrs:{\"values\":_vm.formData},on:{\"submit\":_vm.onsubmit},model:{value:(_vm.formData),callback:function ($$v) {_vm.formData=$$v},expression:\"formData\"}},[_c('a-row',{attrs:{\"gutter\":[24, 24]}},[_c('a-col',{staticClass:\"col-form\",attrs:{\"md\":{ span: 12, offset: 6 },\"lg\":{ span: 12, offset: 6 },\"xl\":{ span: 12, offset: 6 }}},[_c('x-input',{attrs:{\"label\":\"Период, начало\",\"name\":\"start_achievement\",\"options\":['2021', '2020', '2019', '2018', '2017', '2016', '2015'],\"type\":\"select\",\"disabled\":_vm.disabled,\"validation\":\"required\"}}),_c('x-input',{attrs:{\"label\":\"Период, конец\",\"name\":\"finish_achievement\",\"options\":['2021', '2020', '2019', '2018', '2017', '2016', '2015'],\"type\":\"select\",\"disabled\":_vm.disabled,\"validation\":\"required|comparison\",\"validation-rules\":{\n            comparison: function (ref) {\n              var value = ref.value;\n\n              return (\n                Number(_vm.formData.finish_achievement) >=\n                Number(_vm.formData.start_achievement)\n              )\n            },\n          },\"validation-messages\":{\n            comparison: 'Год окончания периода меньше начала',\n          }}}),_c('div',{staticClass:\"crud-form-button\"},[_c('a-button',{attrs:{\"type\":\"primary\",\"block\":\"\",\"html-type\":\"submit\"}},[_vm._v(\" \"+_vm._s(_vm.getButtonAction)+\" \")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <x-crud :loading=\"loading\">\n    <x-form v-model=\"formData\" :values=\"formData\" @submit=\"onsubmit\">\n      <a-row :gutter=\"[24, 24]\">\n        <a-col\n          :md=\"{ span: 12, offset: 6 }\"\n          :lg=\"{ span: 12, offset: 6 }\"\n          :xl=\"{ span: 12, offset: 6 }\"\n          class=\"col-form\"\n        >\n          <x-input\n            label=\"Период, начало\"\n            name=\"start_achievement\"\n            :options=\"['2021', '2020', '2019', '2018', '2017', '2016', '2015']\"\n            type=\"select\"\n            :disabled=\"disabled\"\n            validation=\"required\"\n          ></x-input>\n          <x-input\n            label=\"Период, конец\"\n            name=\"finish_achievement\"\n            :options=\"['2021', '2020', '2019', '2018', '2017', '2016', '2015']\"\n            type=\"select\"\n            :disabled=\"disabled\"\n            validation=\"required|comparison\"\n            :validation-rules=\"{\n              comparison: ({ value }) => {\n                return (\n                  Number(formData.finish_achievement) >=\n                  Number(formData.start_achievement)\n                )\n              },\n            }\"\n            :validation-messages=\"{\n              comparison: 'Год окончания периода меньше начала',\n            }\"\n          ></x-input>\n          <div class=\"crud-form-button\">\n            <a-button type=\"primary\" block html-type=\"submit\">\n              {{ getButtonAction }}\n            </a-button>\n          </div>\n        </a-col>\n      </a-row>\n    </x-form>\n  </x-crud>\n</template>\n\n<script>\nimport crudMixin from '@/mixins/crudMixin'\nimport { PERIOD } from '@/helpers/constants'\n\nexport default {\n  props: ['action', 'id'],\n  mixins: [crudMixin],\n  data() {\n    return {\n      formData: {\n        start_achievement: null,\n        finish_achievement: null,\n      },\n      entityName: PERIOD,\n    }\n  },\n  methods: {\n    async onsubmit() {\n      if (this.action === 'read') {\n        this.$router.push(`/${PERIOD}/edit/${this.id}`)\n        return\n      }\n      this.formData.name = `${this.formData.start_achievement}-${this.formData.finish_achievement}`\n      await this.saveEntity(this.formData)\n    },\n  },\n  async created() {\n    if (this.action !== 'create') await this.getEntity(this.id)\n    this.loading = false\n    console.log(this.action, this.id, this.disabled)\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./view.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./view.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./view.vue?vue&type=template&id=0825424d&scoped=true&\"\nimport script from \"./view.vue?vue&type=script&lang=js&\"\nexport * from \"./view.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0825424d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}