(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin~profile"],{"026f":function(e,t,n){"use strict";n("eb47")},"0536":function(e,t,n){},"06c5":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("6b75");function a(e,t){if(e){if("string"===typeof e)return Object(i["a"])(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i["a"])(e,t):void 0}}},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("6b75");function a(e){if(Array.isArray(e))return Object(i["a"])(e)}function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=n("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return a(e)||r(e)||Object(s["a"])(e)||o()}},"2d21":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document-container"},[n("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.indicator.name)+" ")]),e.indicator.hint_text?n("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.indicator.hint_text)+" ")]):e._e(),n("div",[n("ol",{staticClass:"achievement-list"},[e._l(e.indicator.achievements,(function(t,i){return n("upload-achievements-item-info",{key:t.id,attrs:{position:i+1,participationDegree:e.participationDegree,setFiles:e.setFiles,item:t,disabled:!0,isAdmin:e.isAdmin,onlyRead:e.onlyRead,indicator:e.indicator,getCurrentApplication:e.getCurrentApplication},on:{remove:function(t){return e.$emit("remove",t)}}})})),e.isAdmin||e.onlyRead?e._e():n("x-form",{attrs:{values:e.form,name:"achievementForm"},on:{submit:function(t){return e.submit(e.indicator.id)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("upload-achievements-item",{key:e.achievements.length+1,attrs:{setFiles:e.setFiles,position:e.achievements.length+1,participationDegree:e.participationDegree,indicator:e.indicator}})],1)],2)])])},a=[],r=n("5530"),s=n("1da1"),o=(n("96cf"),n("b48b")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"achievement-list__item only-achievements"},[e.isVisible?e._e():n("div",{staticClass:"achievement-list__item--info"},[n("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[n("span",{staticClass:"count"},[e._v(e._s(e.position))]),n("x-input",{staticClass:"item-name",attrs:{name:"name",type:"text",validation:"required",label:"Название достижения","error-behavior":"submit"}}),e.indicator.degree_participation?n("x-input",{staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:e.participationDegree,label:"Степень участия","error-behavior":"submit"}}):e._e(),n("x-input",{staticClass:"item-period",attrs:{name:"period",type:"select",validation:"required",options:e.getPeriod,label:"Год","error-behavior":"submit"}})],1),n("div",{staticClass:"achievement-list__item--info--block"},[e.indicator.url?n("x-input",{staticStyle:{width:"100%"},attrs:{type:"url",name:"url",validation:"required",label:"Вставьте ссылку на видео","error-behavior":"submit"}}):e._e()],1),n("div",{staticClass:"achievement-list__item--info--block"},[e.indicator.document?n("file-component",{attrs:{hint_text:"Файлы загружаются по принципу: 1 поле - 1 файл. Если нужно прикрепить несколько документов к одному полю, вы можете объединить их в 1 многостраничный pdf. Документ должен четко читаться и отображаться."},on:{change:function(t){return e.setFiles(t)}}}):e._e()],1),n("a-button",{staticClass:"document-container-button achievement-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[e._v("Сохранить данные достижения")])],1)],1)])},u=[],l=(n("a9e3"),{components:{FileComponent:o["a"]},props:{participationDegree:{type:Array,required:!0},position:{type:Number,required:!0},setFiles:{type:Function,required:!1},indicator:{type:Object,required:!0}},computed:{isVisible:function(){return this.indicator.max_count_achievement===this.indicator.achievements.length},getPeriod:function(){for(var e=this.indicator.period,t=e.start_achievement,n=e.finish_achievement,i=[],a=t;a<=n;a++)i.push(a);return i}}}),m=l,d=(n("deca"),n("5b2d"),n("2877")),p=Object(d["a"])(m,c,u,!1,null,"c80fa624",null),f=p.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("span",{staticClass:"count"},[e._v(e._s(e.position))]),e.onlyRead||e.checkout?e._e():n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[e._v("Удалить достижение")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:e.deleteAchievement}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",{ref:"name-info",on:{click:function(t){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_status)&&e.setValue("name")}}},[e._v(e._s(e.item.name))]),n("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"name-edit",attrs:{type:"text",name:"name",disabled:e.inputDisabled},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveValue.apply(null,arguments)}},model:{value:e.newname,callback:function(t){e.newname=t},expression:"newname"}})],1),e.item.degree_participation?n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",{ref:"degree_participation-info",on:{click:function(t){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_status)&&e.setValue("degree_participation")}}},[e._v(e._s(e.item.degree_participation))]),n("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"degree_participation-edit",staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:e.participationDegree,"error-behavior":"submit",disabled:e.inputDisabled},on:{change:e.saveValue},model:{value:e.newdegree_participation,callback:function(t){e.newdegree_participation=t},expression:"newdegree_participation"}})],1):e._e(),n("div",{staticClass:"achievement-list__item--read--item item-period"},[n("span",{ref:"period-info",on:{click:function(t){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_status)&&e.setValue("period")}}},[e._v(e._s(e.item.period))]),n("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"period-edit",staticClass:"item-period",attrs:{validation:"required",type:"select",options:e.getPeriod,"error-behavior":"submit",disabled:e.inputDisabled},on:{change:e.saveValue},model:{value:e.newperiod,callback:function(t){e.newperiod=t},expression:"newperiod"}})],1)]),e.item.url?n("div",{staticClass:"achievement-list__item--read--item"},[n("span",{ref:"url-info",on:{click:function(t){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_status)&&e.setValue("url")}}},[e._v(e._s(e.item.url))]),n("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"url-edit",attrs:{type:"text",disabled:e.inputDisabled},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveValue.apply(null,arguments)}},model:{value:e.newurl,callback:function(t){e.newurl=t},expression:"newurl"}})],1):e._e(),e.item.documents.length?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},[n("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(e.item.documents[0].document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(e.item.documents[0].documentName))])],1)])]):e.checkout?n("div",{staticStyle:{height:"1rem"}}):e._e(),e.checkout?n("change-statuses-expert",{attrs:{stage_status:e.stage_status,score:e.item.score,confirmed_score:e.item.confirmed_score,checkWork:e.checkWork}}):e._e()],1)},v=[],_=(n("99af"),n("a434"),n("5b55")),b=n("8a95"),y="https://студентгода63.рф/media",k={components:{FileComponent:o["a"],ChangeStatusesExpert:b["a"]},data:function(){return{media:y,type:"info",inputDisabled:!1,newname:null,newdegree_participation:null,newperiod:null,newurl:null,stage_status:null}},props:{participationDegree:{type:Array,required:!0},position:{type:Number,required:!0},setFiles:{type:Function,required:!1},item:{type:Object,required:!0},indicator:{type:Object,required:!0},onlyRead:{type:Boolean,required:!1},getCurrentApplication:{type:Function,required:!1}},mounted:function(){this.checkout&&(this.stage_status=this.item.stage_status)},computed:{checkout:function(){return this.$route.meta.check},getPeriod:function(){for(var e=this.indicator.period,t=e.start_achievement,n=e.finish_achievement,i=[],a=t;a<=n;a++)i.push(a);return i}},methods:{getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},deleteAchievement:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0,confirmButtonText:"Удалить",cancelButtonText:"Отмена"});case 2:n=t.sent,i=n.isConfirmed,i&&e.$emit("remove",e.item.id);case 5:case"end":return t.stop()}}),t)})))()},openInput:function(){this.$refs[this.currentFieldWork+"-info"].style="display: none",this.$refs[this.currentFieldWork+"-edit"].$el.style="display: block",this.$forceUpdate()},closeInput:function(){this.$refs[this.currentFieldWork+"-info"].style="display: block",this.$refs[this.currentFieldWork+"-edit"].$el.style="display: none",this.$forceUpdate()},setValue:function(e){var t=this;this.currentFieldWork&&this.closeInput(),this.$nextTick((function(){t.currentFieldWork=e,t.openInput(),t["new".concat(t.currentFieldWork)]=t.item[t.currentFieldWork.toLowerCase()]}))},saveValue:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n[e.currentFieldWork]=e["new".concat(e.currentFieldWork)],t.prev=2,e.inputDisabled=!0,t.next=6,e.$store.dispatch("app/saveEntity",{data:n,method:"patch",id:e.item.id,entityName:"".concat(_["a"])});case 6:t.sent,e.$toast.success("Успешно сохранено"),e.closeInput(),e.item[e.currentFieldWork.toLowerCase()]=e["new".concat(e.currentFieldWork)],e.currentFieldWork=null,e.$forceUpdate(),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](2),console.log(t.t0),e.$toast.error("Неизвестная ошибка");case 18:return t.prev=18,e.inputDisabled=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[2,14,18,21]])})))()},removeFile:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("app/saveEntity",{data:{documents:[]},method:"patch",id:t.item.id,entityName:"".concat(_["a"])});case 3:e.sent,t.item.documents.splice(0,1),t.$forceUpdate(),t.$toast.success("Успешно удалено"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0),t.$toast.error("Неизвестная ошибка");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},checkWork:function(e,t,n){var i=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i.currentFieldWork&&i.saveValue(),a={stage_status:e,confirmed_score:n},a.confirmed_score||delete a.confirmed_score,t.prev=3,t.next=6,i.$store.dispatch("app/saveEntity",{data:a,method:"patch",id:i.item.id,entityName:"".concat(_["a"])});case 6:r=t.sent,console.log(r),i.stage_status=r.stage_status,i.item.confirmed_score=r.confirmed_score,i.$forceUpdate(),i.getCurrentApplication(),t.next=21;break;case 14:if(t.prev=14,t.t0=t["catch"](3),console.log(t.t0),!t.t0.response.data["expert already appointed"]){t.next=20;break}return i.$toast.error("Уже проверяется другим экспертом"),t.abrupt("return");case 20:i.$toast.error("Неизвестная ошибка");case 21:case"end":return t.stop()}}),t,null,[[3,14]])})))()}}},g=k,x=(n("33ed"),n("f751"),Object(d["a"])(g,h,v,!1,null,"3f8147f5",null)),C=x.exports,w={components:{UploadAchievementsItem:f,FileComponent:o["a"],UploadAchievementsItemInfo:C},props:{achievements:{type:Array,required:!0},participationDegree:{type:Array,required:!0},indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},isAdmin:{type:Boolean,required:!1},onlyRead:{type:Boolean,required:!1},getCurrentApplication:{type:Function,required:!1}},data:function(){return{form:{},documents:[]}},methods:{setFiles:function(e){this.documents=e},submit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.saveAchievement(Object(r["a"])(Object(r["a"])({},t.form),{},{documents:t.documents,indicators:e}),"achievementForm");case 3:t.form={},n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),console.log(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()}}},F=w,q=(n("3e35"),n("5c7b"),Object(d["a"])(F,i,a,!1,null,null,null));t["a"]=q.exports},3235:function(e,t,n){},"33ed":function(e,t,n){"use strict";n("5ad7")},"36aa":function(e,t,n){},3835:function(e,t,n){"use strict";function i(e){if(Array.isArray(e))return e}function a(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(i=n.next()).done);s=!0)if(r.push(i.value),t&&r.length===t)break}catch(c){o=!0,a=c}finally{try{s||null==n["return"]||n["return"]()}finally{if(o)throw a}}return r}}n.d(t,"a",(function(){return o}));var r=n("06c5");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){return i(e)||a(e,t)||Object(r["a"])(e,t)||s()}},"3d50":function(e,t,n){},"3e35":function(e,t,n){"use strict";n("7bd3")},4032:function(e,t,n){},4475:function(e,t,n){"use strict";n("6419")},5306:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document-container upload-spec-org"},[n("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.indicator.name)+" ")]),n("div",[e.achievements.length||e.onlyRead?n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[e.onlyRead||e.checkout?e._e():n("div",{staticClass:"achievement-list__item--tools"},[n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[e._v("Удалить достижение")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:e.deleteAchievement}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[e._v("ФИО организатора")]),n("span",[e._v(e._s(e.achievements[0].full_name_head_organization))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[e._v("Курс")]),n("span",[e._v(e._s(e.achievements[0].course_head_organization))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[e._v("Номер телефона")]),n("span",[e._v(e._s(e.achievements[0].phone_head_organization))])]),n("div",{staticClass:"achievement-list__item--read--item item-period"},[n("span",[e._v("E-mail")]),n("span",[e._v(e._s(e.achievements[0].email_head_organization))])]),e.checkout?n("change-statuses-expert",{staticStyle:{"margin-top":"1rem"},attrs:{stage_status:e.stage_status,score:e.achievements[0].score,confirmed_score:e.achievements[0].confirmed_score,checkWork:e.checkWork}}):e._e()],1)]):n("x-form",{attrs:{values:e.form,name:"spec-org"},on:{submit:function(t){return e.submit(e.indicator.id)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("x-input",{attrs:{type:"text",name:"full_name_head_organization",label:"ФИО организатора",validation:"isFullName","validation-rules":{isFullName:function(e){var t=e.value;return 3===t.trim().split(" ").length}},"validation-messages":{isFullName:"Введите ФИО"}}}),n("x-input",{attrs:{type:"select",options:[1,2,3,4,5,6],name:"course_head_organization",label:"Курс",validation:"required"}}),n("x-input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"`+7 (###) ###-##-##`"}],attrs:{type:"tel",name:"phone_head_organization",label:"Номер телефона",validation:[["required"],["min","18"]]}}),n("x-input",{attrs:{type:"email",name:"email_head_organization",label:"E-mail",validation:"required"}}),n("a-button",{staticClass:"document-container-button achievement-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[e._v("Сохранить данные достижения")])],1)],1)],1)])},a=[],r=n("5530"),s=n("1da1"),o=(n("96cf"),n("b0c0"),n("b48b")),c=n("f72f"),u=n("7561"),l=n("8a95"),m=n("3a60"),d=n("5b55"),p={directives:{mask:m["mask"]},components:{FileComponent:o["a"],UploadSpecParticipant:c["a"],UploadSpecDescription:u["a"],ChangeStatusesExpert:l["a"]},props:{indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},achievements:{type:Array,required:!0},onlyRead:{type:Boolean,required:!1},getCurrentApplication:{type:Function,required:!1}},data:function(){return{form:{},stage_status:null}},mounted:function(){this.checkout&&(this.stage_status=this.achievements[0].stage_status)},computed:{checkout:function(){return this.$route.meta.check}},methods:{submit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.saveAchievement(Object(r["a"])(Object(r["a"])({},t.form),{},{indicators:e,name:t.indicator.name}),"spec-org");case 3:t.form={},n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),console.log(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},deleteAchievement:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0});case 2:n=t.sent,i=n.isConfirmed,i&&e.$emit("remove",e.achievements[0].id);case 5:case"end":return t.stop()}}),t)})))()},checkWork:function(e,t,n){var i=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(i.achievements[0]),a={stage_status:e,confirmed_score:n},a.confirmed_score||delete a.confirmed_score,t.prev=3,t.next=6,i.$store.dispatch("app/saveEntity",{data:a,method:"patch",id:i.achievements[0].id,entityName:"".concat(d["a"])});case 6:r=t.sent,i.stage_status=r.stage_status,i.achievements[0].confirmed_score=r.confirmed_score,i.getCurrentApplication(),t.next=19;break;case 12:if(t.prev=12,t.t0=t["catch"](3),console.log(t.t0),!t.t0.response.data["expert already appointed"]){t.next=18;break}return i.$toast.error("Уже проверяется другим экспертом"),t.abrupt("return");case 18:i.$toast.error("Неизвестная ошибка");case 19:case"end":return t.stop()}}),t,null,[[3,12]])})))()}}},f=p,h=n("2877"),v=Object(h["a"])(f,i,a,!1,null,null,null);t["a"]=v.exports},5904:function(e,t,n){"use strict";n("36aa")},"5ad7":function(e,t,n){},"5b2d":function(e,t,n){"use strict";n("6b40")},"5c7b":function(e,t,n){"use strict";n("c155")},6419:function(e,t,n){},"6b40":function(e,t,n){},"6b75":function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,"a",(function(){return i}))},7561:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"achievement-spec-block achievement-spec-block--descirption"},[n("x-input",{staticClass:"item-name",attrs:{name:"name_association",type:"text",validation:"required",label:"Наименование организации","error-behavior":"submit"}}),n("x-input",{staticClass:"item-participation",attrs:{name:"educational_organization",type:"text",validation:"required",label:"Образовательная организация","error-behavior":"submit"}}),n("x-input",{staticClass:"item-period",attrs:{name:"year_foundation",type:"number",min:"1900",max:"2100",validation:"required:min:1900|max:2100",label:"Год основания","error-behavior":"submit"}}),n("x-input",{staticClass:"item-period",attrs:{name:"brief_description_association",type:"textarea",validation:"required",label:"Характеристика","error-behavior":"submit"}})],1)},a=[],r={},s=r,o=(n("5904"),n("2877")),c=Object(o["a"])(s,i,a,!1,null,null,null);t["a"]=c.exports},"75a1":function(e,t,n){"use strict";n("894d")},"7bd3":function(e,t,n){},"7db0":function(e,t,n){"use strict";var i=n("23e7"),a=n("b727").find,r=n("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},"894d":function(e,t,n){},"8a95":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.stage_status?n("div",{staticClass:"achievement-list__item--checkout"},[e.confirmed_score||null===e.confirmed_score||0===e.confirmed_score?n("div",{staticStyle:{display:"flex",gap:"1rem"}},[n("h6",[n("span",[e._v(e._s(e.getStatus))])]),n("h6",[n("span",[e._v(" "+e._s(e.score||0)+" "+e._s(e.getWord(["Предварительный балл","Предварительных балла","Предварительных баллов"],e.score))+" ")])]),n("h6",[n("span",["in_work"===e.stage_status?n("input",{directives:[{name:"model",rawName:"v-model",value:e.editScore,expression:"editScore"}],staticClass:"custom-number",attrs:{type:"number",max:"50",min:"0"},domProps:{value:e.editScore},on:{input:function(t){t.target.composing||(e.editScore=t.target.value)}}}):n("div",{staticStyle:{display:"inline-block"}},[e._v(" "+e._s(e.confirmed_score||0)+" ")]),e._v(" "+e._s(e.getWord(["Подтвержденный балл","Подтвержденных балла","Подтвержденных баллов"],e.confirmed_score))+" ")])])]):n("div",{staticStyle:{display:"flex",gap:"1rem"}},[n("h6",[n("span",[e._v(e._s(e.getStatus))])]),n("h6",[n("span",[e._v(" "+e._s(e.score)+" "+e._s(e.getWord(["Предварительный балл","Предварительных балла","Предварительных баллов"],e.score))+" ")])]),n("h6",[n("span",[e._v(" "+e._s("accepted"===e.stage_status?e.score:0)+" "+e._s(e.getWord(["Подтвержденный балл","Подтвержденных балла","Подтвержденных баллов"],"accepted"===e.stage_status?e.score:0))+" ")])])]),n("div",{staticClass:"checkout-buttons"},["awaiting_verification"===e.stage_status?n("a-button",{staticClass:"login-form-button",attrs:{type:"primary",block:"","html-type":"submit"},on:{click:function(t){return e.checkWork("in_work",e.stage_status_key,e.editScore)}}},[e._v(" Взять в работу ")]):e._e(),"in_work"===e.stage_status?n("a-button",{staticClass:"login-form-button",attrs:{type:"primary",block:"","html-type":"submit"},on:{click:function(t){return e.checkWork("accepted",e.stage_status_key,e.editScore)}}},[e._v(" Принять ")]):e._e(),"in_work"===e.stage_status?n("a-button",{staticClass:"login-form-button",attrs:{type:"info",block:"","html-type":"submit"},on:{click:function(t){return e.checkWork("rejected",e.stage_status_key,e.editScore)}}},[e._v(" Отклонить ")]):e._e(),"in_work"===e.stage_status?n("a-button",{staticClass:"login-form-button",attrs:{type:"info",block:"","html-type":"submit"},on:{click:function(t){e.checkWork(e.prevStageStatus||"awaiting_verification",e.stage_status_key),e.prevStageStatus=null}}},[e._v(" Снять с работы ")]):e._e(),"accepted"!==e.stage_status&&"rejected"!==e.stage_status||!e.isAdmin?e._e():n("a-button",{staticClass:"login-form-button",attrs:{type:"info",block:"","html-type":"submit"},on:{click:function(t){e.prevStageStatus=e.stage_status,e.checkWork("in_work",e.stage_status_key)}}},[e._v(" Перепроверить ")])],1)]):e._e()},a=[],r=(n("a9e3"),n("7db0"),n("b0c0"),{props:{stage_status:{type:null|String,required:!0},stage_status_key:{type:null|String,required:!1},checkWork:{type:Function,required:!0},score:{type:String|Number,required:!1},confirmed_score:{type:String|Number,required:!1}},data:function(){return{editScore:this.confirmed_score,prevStageStatus:null}},computed:{isAdmin:function(){return"admin"===this.$store.state.user.userInfo.role},getStatus:function(){var e=this,t=this.statusText.find((function(t){return t.key===e.stage_status}));return t.name},statusText:function(){return[{key:"awaiting_verification",name:"Ожидает проверки"},{key:"in_work",name:"В работе"},{key:"accepted",name:"Принято"},{key:"rejected",name:"Отклонено"},{key:"notme",name:"Проверяется другим экспертом"}]}},methods:{getWord:function(e,t){var n=Math.abs(t)%100,i=n%10;return n>10&&n<20?e[2]:i>1&&i<5?e[1]:1==i?e[0]:e[2]}}}),s=r,o=n("2877"),c=Object(o["a"])(s,i,a,!1,null,null,null);t["a"]=c.exports},"92f8":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head"},[n("div",{staticClass:"head__photo"},[e.userInfo.user_avatar?n("img",{attrs:{src:e.media+"/"+e.userInfo.user_avatar,alt:"Аватар студента"}}):n("v-icon",{attrs:{name:"camera"}})],1),n("div",{staticClass:"head__info"},[n("h2",[e._v(e._s(e.getFullName))]),n("div",{staticClass:"head__info__indicators"},[n("span",[e._v(e._s(e.getAge)+" лет")]),n("span",{staticClass:"points"},[e._v(e._s(e.userInfo.district))]),n("span",[e._v(e._s(e.userInfo.course_education)+" курс")])]),n("div",{staticClass:"inline-buttons"},[e._t("default")],2)])])},a=[],r=(n("498a"),n("99af"),n("c1df")),s=n.n(r),o="https://студентгода63.рф/media",c={props:{userInfo:{type:Object,required:!0}},data:function(){return{media:o}},computed:{getFullName:function(){var e=this.userInfo,t=e.first_name,n=e.last_name,i=e.patronymic;return"".concat(t," ").concat(n," ").concat(i||"").trim()},getAge:function(){return s()().diff(this.userInfo.date_birth,"years")}}},u=c,l=n("2877"),m=Object(l["a"])(u,i,a,!1,null,"c77784b6",null);t["a"]=m.exports},9496:function(e,t,n){"use strict";n("3235")},"9ebe":function(e,t,n){"use strict";n("b60a")},a346:function(e,t,n){},a56a:function(e,t,n){},a8f3:function(e,t,n){"use strict";n("3d50")},ac3d:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("div",{staticClass:"document-container only-questionnaire-checkout"},[n("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.questionnaire.name)+" ")]),"only_file"===e.questionnaire.type?n("div",{},[e.questionnaire.first_help_text?n("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.first_help_text)+" ")]):e._e(),n("div",{staticClass:"achievement-list__item--info--block"},[e.only_file_document?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files questionnaire-file only-file"},[n("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(e.only_file_document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(e.addDocumentName(e.only_file_document)))])],1),e.onlyRead||e.checkout?e._e():n("v-icon",{staticClass:"times-icon",attrs:{name:"times"},on:{click:function(t){t.stopPropagation(),e.only_file_document=null}}})],1)]):n("file-component",{attrs:{title:e.questionnaire.title,acceptFormats:e.questionnaire.acceptFormats},on:{change:function(t){return e.setFiles(t)}}})],1),!e.loading&&e.checkout&&"{}"!==JSON.stringify(e.stage_statuses)?n("change-statuses-expert",{attrs:{stage_status:e.stage_statuses[e.questionnaire.id],stage_status_key:e.questionnaire.id,score:e.questionnaire.score,checkWork:e.checkWork}}):e._e()],1):e._e(),"multiple"===e.questionnaire.type?n("div",[e.questionnaire.first_help_text?n("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.first_help_text)+" ")]):e._e(),n("upload-questionnaire-characteristic",{attrs:{onlyRead:e.onlyRead,isAdmin:e.isAdmin,characteristics:e.characteristics,checkout:e.checkout,checkWork:e.checkWork,stage_statuses:e.stage_statuses},on:{remove:e.removeCharacteristic,add:e.addCharacteristic}})],1):e._e(),"radio_and_multiple"===e.questionnaire.type?n("div",{},[e.isAdmin||e.onlyRead?e._e():n("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.subname)+" ")]),e.isAdmin||e.onlyRead?e._e():n("FormulateInput",{staticClass:"inline-checkbox",attrs:{type:"radio",name:"yes-"+e.questionnaire.id,options:e.yesno},model:{value:e.yesValue,callback:function(t){e.yesValue=t},expression:"yesValue"}}),"yes"===e.yesValue?n("div",{staticClass:"achievement-spec-block--reports"},[e.questionnaire.first_help_text?n("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.first_help_text)+" ")]):e._e(),n("upload-questionnaire-report",{attrs:{stage_status:e.checkout&&e.questionnaire.data&&e.stage_statuses["report_card_"+e.questionnaire.data.position],onlyRead:!!e.checkout||e.onlyRead,isAdmin:e.isAdmin,reports:e.reports},on:{removeReport:e.removeReport,addReport:e.addReport}}),e.questionnaire.second_help_text&&!e.isAdmin?n("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.questionnaire.second_help_text)+" ")]):e._e(),e.isAdmin||e.onlyRead?e._e():n("file-component",{attrs:{multiple:""},on:{change:function(t){return e.setFiles(t)}}}),n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files questionnaire-file"},[e.loadedDocuments.length?n("div",{staticClass:"questionnaire-file--files"},e._l(e.loadedDocuments,(function(t){return n("div",{key:t.id,staticClass:"multiple-file-questionnaire"},[n("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(t.document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(e.addDocumentName(t.document)))])],1)])})),0):e._e()])])],1):e._e(),e.checkout&&e.stage_statuses&&e.questionnaire.data?n("change-statuses-expert",{attrs:{stage_status:e.stage_statuses["report_card_"+e.questionnaire.data.position],stage_status_key:"report_card_"+e.questionnaire.data.position,score:e.questionnaire.data.preliminary_score_report_card,checkWork:e.checkWork}}):e._e()],1):e._e()])},a=[],r=n("ade3"),s=n("1da1"),o=n("3835"),c=(n("96cf"),n("d81d"),n("4fad"),n("caad"),n("2532"),n("fb6a"),n("ac1f"),n("1276"),n("99af"),n("a434"),n("b48b")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"achievement-spec-block rating-block"},[e._l(e.reports,(function(t,i){return n("li",{key:i,staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("span",{staticClass:"count"},[e._v(e._s(i+1))]),e.onlyRead||e.checkout?e._e():n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[e._v("Удалить оценку")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(n){return e.deleteReport(i,t.id)}}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",{ref:"name-info",refInFor:!0,on:{click:function(n){!e.onlyRead&&e.setValue(i,"name",t)}}},[e._v(e._s(t.name))]),n("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"name-edit",refInFor:!0,attrs:{ignored:"",type:"text",disabled:e.inputDisabled},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.saveValue.apply(null,arguments))}},model:{value:e.newname,callback:function(t){e.newname=t},expression:"newname"}})],1),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",{ref:"rating-info",refInFor:!0,on:{click:function(n){!e.onlyRead&&e.setValue(i,"rating",t)}}},[e._v(e._s(t.rating))]),n("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"rating-edit",refInFor:!0,staticClass:"item-participation",attrs:{type:"select",ignored:"",options:e.rating,"error-behavior":"submit",disabled:e.inputDisabled},on:{change:e.saveValue},model:{value:e.newrating,callback:function(t){e.newrating=t},expression:"newrating"}})],1)])])})),!e.isVisible||e.loading||e.isAdmin||e.onlyRead?e._e():n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--info"},[n("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[n("x-form",{staticClass:"achievement-spec-block--form",attrs:{name:"reportForm"},on:{submit:e.addReport},model:{value:e.reportForm,callback:function(t){e.reportForm=t},expression:"reportForm"}},[n("div",{staticClass:"achievement-spec-block--form-item"},[n("span",{staticClass:"count"},[e._v(e._s(e.reports.length+1))]),n("x-input",{staticClass:"item-name",attrs:{name:"name",type:"text",validation:"required",label:"Название предмета","error-behavior":"submit"}}),n("x-input",{staticClass:"item-participation",attrs:{name:"rating",type:"select",validation:"required",options:e.rating,label:"Оценка","error-behavior":"submit"}})],1),n("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[e._v("Добавить предмет")])],1)],1)],1)])])],2)},l=[],m=n("5530"),d={props:{reports:{type:Array,required:!0},isAdmin:{type:Boolean,required:!1},onlyRead:{type:Boolean,required:!1},stage_status:{type:String||null,required:!1}},data:function(){return{reportForm:{},rating:[2,3,4,5],loading:!1,newname:null,newrating:null,currentFieldWork:null,currentItemWork:null,inputDisabled:!1}},watch:{stage_status:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.currentFieldWork){t.next=3;break}return t.next=3,e.saveValue();case 3:case"end":return t.stop()}}),t)})))()}},computed:{isVisible:function(){return this.reports.length<20},checkout:function(){return this.$route.meta.check}},methods:{openInput:function(){this.$refs[this.currentFieldWork+"-info"][this.currentRefIndex].style="display: none",this.$refs[this.currentFieldWork+"-edit"][this.currentRefIndex].$el.style="display: block",this.$forceUpdate()},closeInput:function(){this.$refs[this.currentFieldWork+"-info"][this.currentRefIndex].style="display: block",this.$refs[this.currentFieldWork+"-edit"][this.currentRefIndex].$el.style="display: none",this.$forceUpdate()},setValue:function(e,t,n){var i=this;this.currentFieldWork&&this.closeInput(),this.$nextTick((function(){i.currentFieldWork=t,i.currentItemWork=n,i.currentRefIndex=e,i.openInput(),i["new".concat(i.currentFieldWork)]=i.currentItemWork[i.currentFieldWork.toLowerCase()]}))},saveValue:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n={},n[e.currentFieldWork]=e["new".concat(e.currentFieldWork)],t.prev=2,e.inputDisabled=!0,!e.isAdmin){t.next=8;break}return t.next=7,e.$store.dispatch("app/saveEntity",{data:n,method:"patch",id:e.currentItemWork.id,entityName:"report"});case 7:e.$toast.success("Успешно сохранено");case 8:e.closeInput(),e.currentItemWork[e.currentFieldWork.toLowerCase()]=e["new".concat(e.currentFieldWork)],e.currentFieldWork=null,e.currentItemWork=null,e.currentRefIndex=null,e.$forceUpdate(),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](2),console.log(t.t0),e.$toast.success("Ошибка");case 20:return t.prev=20,e.inputDisabled=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,16,20,23]])})))()},addReport:function(){var e=this;this.loading=!0,this.$emit("addReport",Object(m["a"])({},this.reportForm)),setTimeout((function(){e.reportForm={},e.loading=!1}),0)},deleteReport:function(e,t){this.$emit("removeReport",e,t)}}},p=d,f=(n("026f"),n("2877")),h=Object(f["a"])(p,u,l,!1,null,null,null),v=h.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"achievement-spec-block characteristic"},[e._l(e.characteristics,(function(t,i){return n("li",{key:i,staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("span",{staticClass:"count"},[e._v(e._s(i+1))]),e.onlyRead||e.checkout?e._e():n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[e._v("Удалить характеристику")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(n){return e.deleteCharacteristic(i,t.id)}}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",{ref:"document_type-info",refInFor:!0,on:{click:function(n){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_statuses["characteristic_"+(i+1)])&&e.setValue("document_type",t,i)}}},[e._v(e._s(t.document_type))]),n("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"document_type-edit",refInFor:!0,attrs:{type:"text",disabled:e.inputDisabled},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.saveValue.apply(null,arguments))}},model:{value:e.newdocument_type,callback:function(t){e.newdocument_type=t},expression:"newdocument_type"}})],1),n("div",{staticClass:"achievement-list__item--read--item"},[n("span",{ref:"year_manufacture-info",refInFor:!0,on:{click:function(n){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_statuses["characteristic_"+(i+1)])&&e.setValue("year_manufacture",t,i)}}},[e._v(e._s(t.year_manufacture))]),n("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"year_manufacture-edit",refInFor:!0,staticClass:"item-name item-name-year",attrs:{min:"1900",max:"2100",validation:"required:min:1900|max:2100","error-behavior":"submit",disabled:e.inputDisabled},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.saveValue.apply(null,arguments))}},model:{value:e.newyear_manufacture,callback:function(t){e.newyear_manufacture=t},expression:"newyear_manufacture"}})],1),n("div",{staticClass:"achievement-list__item--read--item"},[n("span",{ref:"who_issued-info",refInFor:!0,on:{click:function(n){!(e.onlyRead||e.checkout&&"in_work"!==e.stage_statuses["characteristic_"+(i+1)])&&e.setValue("who_issued",t,i)}}},[e._v(e._s(t.who_issued))]),n("FormulateInput",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"who_issued-edit",refInFor:!0,staticClass:"item-participation",attrs:{type:"select",validation:"required",options:e.issuingAuthority,"error-behavior":"submit",disabled:e.inputDisabled},on:{change:e.saveValue},model:{value:e.newwho_issued,callback:function(t){e.newwho_issued=t},expression:"newwho_issued"}})],1),t.documents&&t.documents.length?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},[t.documents[0].document?n("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(t.documents[0].document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(t.documents[0].id?e.addDocumentName(t.documents[0].document):t.documents[0].name))])],1):n("a",{staticClass:"file-container__files--file"},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(t.documents[0].id?e.addDocumentName(t.documents[0].document):t.documents[0].name))])],1)])]):e._e(),e.checkout&&e.stage_statuses?n("change-statuses-expert",{staticStyle:{width:"100%"},attrs:{stage_status:e.stage_statuses["characteristic_"+(i+1)],stage_status_key:"characteristic_"+(i+1),score:t.score,checkWork:e.closeAndCheck}}):e._e()],1)])})),!e.isVisible||e.loading||e.isAdmin||e.onlyRead?e._e():n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--info"},[n("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[n("x-form",{staticClass:"achievement-spec-block--form",attrs:{valuses:e.form,name:"form"},on:{submit:e.add},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("div",{staticClass:"achievement-spec-block--form-item characteristic"},[n("span",{staticClass:"count"},[e._v(e._s(e.characteristics.length+1))]),n("x-input",{staticClass:"item-name",attrs:{name:"document_type",type:"text",validation:"required",label:"Вид документа","error-behavior":"submit"}}),n("x-input",{staticClass:"item-name item-name-year",attrs:{name:"year_manufacture",type:"number",min:"1900",max:"2100",validation:"required:min:1900|max:2100",label:"Год выдачи","error-behavior":"submit"}}),n("x-input",{staticClass:"item-participation",attrs:{name:"who_issued",type:"select",validation:"required",options:e.issuingAuthority,label:"Кто выдал","error-behavior":"submit"}})],1),n("div",{staticClass:"achievement-spec-block--form-item"},[n("file-component",{attrs:{acceptFormats:["application/pdf"],hint_text:"Файлы загружаются по принципу: 1 поле - 1 файл. Если нужно прикрепить несколько документов к одному полю, вы можете объединить их в 1 многостраничный pdf. Документ должен четко читаться и отображаться."},on:{change:e.setFiles}})],1),n("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[e._v("Добавить характеристику")])],1)],1)],1)])])],2)},b=[],y=n("09bc"),k=n("8a95"),g="https://студентгода63.рф/media",x={components:{FileComponent:c["a"],ChangeStatusesExpert:k["a"]},props:{characteristics:{type:Array,required:!0},isAdmin:{type:Boolean,required:!1},onlyRead:{type:Boolean,required:!1},checkWork:{type:Function,required:!1},stage_statuses:{type:Object,required:!1}},data:function(){return{loading:!1,form:{},media:g,issuingAuthority:y["j"],newdocument_type:null,newyear_manufacture:null,newwho_issued:null,currentFieldWork:null,currentItemWork:null,currentRefIndex:null,inputDisabled:!1,documents:[]}},computed:{isVisible:function(){return this.characteristics.length<3},checkout:function(){return this.$route.meta.check}},methods:{closeAndCheck:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!n.currentFieldWork){i.next=3;break}return i.next=3,n.saveValue();case 3:n.checkWork(e,t);case 4:case"end":return i.stop()}}),i)})))()},openInput:function(){this.$refs[this.currentFieldWork+"-info"][this.currentRefIndex].style="display: none",this.$refs[this.currentFieldWork+"-edit"][this.currentRefIndex].$el.style="display: block",this.$forceUpdate()},closeInput:function(){this.$refs[this.currentFieldWork+"-info"][this.currentRefIndex].style="display: block",this.$refs[this.currentFieldWork+"-edit"][this.currentRefIndex].$el.style="display: none",this.$forceUpdate()},setValue:function(e,t,n){var i=this;this.currentFieldWork&&this.closeInput(),this.$nextTick((function(){i.currentFieldWork=e,i.currentItemWork=t,i.currentRefIndex=n,i.openInput(),i["new".concat(i.currentFieldWork)]=i.currentItemWork[i.currentFieldWork.toLowerCase()]}))},saveValue:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n={},n[e.currentFieldWork]=e["new".concat(e.currentFieldWork)],t.prev=2,!e.isAdmin){t.next=8;break}return e.inputDisabled=!0,t.next=7,e.$store.dispatch("app/saveEntity",{data:n,method:"patch",id:e.currentItemWork.id,entityName:"characteristic"});case 7:e.$toast.success("Успешно сохранено");case 8:e.closeInput(),e.currentItemWork[e.currentFieldWork.toLowerCase()]=e["new".concat(e.currentFieldWork)],e.currentFieldWork=null,e.currentItemWork=null,e.currentRefIndex=null,e.$forceUpdate(),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](2),Object.entries(t.t0.response.data).map((function(t){e.$toast.error("".concat(t[0]," - ").concat(t[1]))}));case 19:return t.prev=19,e.inputDisabled=!1,t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})))()},add:function(){var e=this;this.loading=!0,this.$emit("add",Object(m["a"])(Object(m["a"])({},this.form),{},{documents:this.documents})),setTimeout((function(){e.form={},e.loading=!1}),0)},deleteCharacteristic:function(e,t){this.$emit("remove",e,t)},getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},addDocumentName:function(e){if(e){var t=e.split("/");return t[t.length-1]}},setFiles:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,i.append("document",e[0]),t.prev=2,t.next=5,n.$store.dispatch("app/saveEntity",{entityName:"file-characteristic",data:i,method:"post"});case 5:a=t.sent,console.log(a),n.documents=[a],t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),n.$errors.show(t.t0.response.data);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()}}},C=x,w=(n("daa8"),Object(f["a"])(C,_,b,!1,null,null,null)),F=w.exports,q=n("cd3f"),$=n.n(q),R="https://студентгода63.рф/media",I={components:{FileComponent:c["a"],UploadQuestionnaireReport:v,UploadQuestionnaireCharacteristic:F,ChangeStatusesExpert:k["a"]},props:{questionnaire:{type:Object,required:!0},isProfile:{type:Boolean,required:!1},isAdmin:{type:Boolean,required:!1},onlyRead:{type:Boolean,required:!1},currentApplication:{type:Object,required:!1},getCurrentApplication:{type:Function,required:!1}},data:function(){return{id:this.questionnaire.id,media:R,form:{},yesValue:"yes",yesno:{yes:"Да",no:"Нет"},reports:[],documents:[],characteristics:[],only_file_document:null,loadedDocuments:[],stage_statuses:{},loading:!0}},mounted:function(){this.checkout&&this.renderStatusesToObject(this.currentApplication),"only_file"===this.questionnaire.type&&this.questionnaire.documents&&(this.only_file_document=this.questionnaire.documents),"multiple"===this.questionnaire.type&&this.questionnaire.data&&(this.characteristics=this.questionnaire.data),"radio_and_multiple"===this.questionnaire.type&&this.questionnaire.data&&(this.loadedDocuments=$()(this.questionnaire.data.documents),this.reports=this.questionnaire.data.reports),this.loading=!1,console.log(this.stage_statuses)},computed:{checkout:function(){return this.$route.meta.check},userInfo:function(){return this.$store.state.user.userInfo}},methods:{renderStatusesToObject:function(e){var t=this;this.stage_statuses={},Object.entries(e).map((function(n){var i=Object(o["a"])(n,2),a=i[0],r=i[1];if(a.includes("stage_status")){var s=a.slice(13,a.length);t.stage_statuses[s]=t.checkoutMe(e,s)||"accepted"===r||"rejected"===r||"admin"===t.userInfo.role?r:"notme"}}))},checkoutMe:function(e,t){return e["expert_".concat(t)]===this.userInfo.id||!e["expert_".concat(t)]},checkWork:function(e,t){var n=arguments,i=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return!(n.length>2&&void 0!==n[2])||n[2],a.prev=1,a.next=4,i.$store.dispatch("app/saveEntity",{data:Object(r["a"])({},"stage_status_".concat(t),e),method:"patch",id:i.$route.params.id,entityName:"applications"});case 4:s=a.sent,i.renderStatusesToObject(s),i.getCurrentApplication(),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0);try{Object.entries(a.t0.response.data).map((function(e){var t=Object(o["a"])(e,2),n=t[0];t[1];n.includes("expert")&&i.$toast.error("Проверяется другим экспертом")}))}catch(c){i.$toast.error("Неизвестная ошибка")}case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},addDocumentName:function(e){if(e){var t=e.split("/");return t[t.length-1]}},getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},setFiles:function(e){this.documents=e},addReport:function(e){this.reports.push(e)},removeReport:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t){i.next=10;break}return i.prev=1,i.next=4,n.$store.dispatch("app/deleteItem",{entityName:"report",id:t,nothingStoreDelete:!0});case 4:i.next=10;break;case 6:i.prev=6,i.t0=i["catch"](1),console.log(i.t0),n.$errors.show(i.t0.response.data);case 10:n.reports.splice(e,1);case 11:case"end":return i.stop()}}),i,null,[[1,6]])})))()},removeCharacteristic:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t){i.next=10;break}return i.prev=1,i.next=4,n.$store.dispatch("app/deleteItem",{entityName:"characteristic",id:t,nothingStoreDelete:!0});case 4:i.next=10;break;case 6:i.prev=6,i.t0=i["catch"](1),console.log(i.t0),n.$errors.show(i.t0.response.data);case 10:n.characteristics.splice(e,1);case 11:case"end":return i.stop()}}),i,null,[[1,6]])})))()},addCharacteristic:function(e){this.characteristics.push(e)},deleteDocument:function(e,t){var n=this;this.loading=!0,this.loadedDocuments.splice(t,1),setTimeout((function(){n.loading=!1}),0)}}},O=I,W=(n("a8f3"),n("75a1"),Object(f["a"])(O,i,a,!1,null,null,null));t["a"]=W.exports},b48b:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-container"},[e.hiddenList?e._e():n("div",{staticClass:"file-container__files"},e._l(e.files,(function(t){return n("div",{key:t.name,staticClass:"file-container__files--file"},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(t.name))]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(n){return e.removeFiles(t)}}})],1)})),0),n("FormulateInput",{staticClass:"document-uploader user-upload not-active achievement",attrs:{"label-class":"document-label",name:"documents",type:"file",validation:"mime:"+e.acceptFormat.join(",")+"|download","validation-rules":{download:function(t){t.value;return e.isDocument||e.files.length}},"validation-messages":{download:"Загрузите документ"}},scopedSlots:e._u([{key:"element",fn:function(){return[n("input",{ref:"files",staticClass:"document-uploader--input",attrs:{type:"file",multiple:e.multiple,accept:e.acceptFormat.join(","),isDrag:e.dragHover},on:{dragover:function(t){e.dragHover=!0},dragleave:function(t){e.dragHover=!1},dragend:function(t){e.dragHover=!1},drop:e.setFile,change:e.setFile}}),n("label",{staticClass:"document-uploader--custom",attrs:{name:"file",for:"upload"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(e.title||e.getLabel))])],1)]},proxy:!0}])}),e.hint_text?n("div",{staticClass:"hint-text-file"},[e._v(" "+e._s(e.hint_text)+" ")]):e._e()],1)},a=[],r=n("1da1"),s=(n("96cf"),n("a434"),n("c740"),n("b0c0"),n("159b"),n("7db0"),n("caad"),n("2532"),n("09bc")),o={props:{multiple:{type:Boolean},title:{type:String,required:!1},acceptFormats:{type:Array,required:!1},hint_text:{type:String,required:!1},hiddenList:{type:Boolean,required:!1},isDocument:{type:Boolean,required:!1}},data:function(){return{dragHover:!1,uploadPercentage:0,files:[],acceptFormat:this.acceptFormats?this.acceptFormats:s["a"]}},computed:{getLabel:function(){return this.dragHover?"Перетащите сюда":"Прикрепить файл"}},methods:{removeFiles:function(e){this.files.splice(this.files.findIndex((function(t){return t.name===e.name})),1)},setFile:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.dragHover=!1,!t.multiple){n.next=6;break}e.target.files.forEach((function(e,n){t.files.find((function(t){return t.name===e.name}));var i=e.size/1024/1024<3;i?t.files.find((function(t){return t.name===e.name}))||(t.acceptFormat.includes(e.type)?t.files.push(e):t.$toast.error("Неккоректный формат")):t.$toast.error("Файл ".concat(e.name," должен быть меньше 3мб"))})),t.$emit("change",t.files),n.next=21;break;case 6:if(i=e.target.files,i.length){n.next=9;break}return n.abrupt("return");case 9:if(a=i[0].size/1024/1024<3,a){n.next=14;break}return t.$toast.error("Файл должен быть меньше 3мб"),t.$refs.files.value=null,n.abrupt("return");case 14:if(t.acceptFormat.includes(i[0].type)){n.next=18;break}return t.$toast.error("Неккоректный формат"),t.$refs.files.value=null,n.abrupt("return");case 18:t.files=[e.target.files[0]],t.$refs.files.value=null,t.$emit("change",t.files);case 21:case"end":return n.stop()}}),n)})))()}}},c=o,u=(n("fa63"),n("2877")),l=Object(u["a"])(c,i,a,!1,null,"e3955058",null);t["a"]=l.exports},b60a:function(e,t,n){},bbc02:function(e,t,n){"use strict";n("f26f")},bfd1:function(e,t,n){"use strict";t["a"]={data:function(){var e=this;return{infos:[{visible:function(){return e.userInfo.passport_series},title:"Паспортные данные",info:[{key:"passport_series",name:"Серия"},{key:"passport_number",name:"Номер"},{key:"place_birth",name:"Место рождения"},{key:"issued_by_whom",name:"Кем выдан"},{key:"department_code",name:"Код подразделения"},{key:"when_issued",name:"Когда выдан",render:function(t){return e.getBirthday(t)}},{key:"passport_city",name:"Город"},{key:"passport_street",name:"Улица"},{key:"passport_house",name:"Номер дома"},{key:"passport_apartment",name:"Квартира",require:!1},{key:"vaccinated",name:"Вакцинировался",render:function(e){return e?"Да":"Нет"}}]},{title:"Личные данные",info:[{name:"Пол",key:"gender",render:function(t){return e.getGender(t)}},{name:"Дата рождения",key:"date_birth",render:function(t){return e.getBirthday(t)}},{name:"Номер телефона",key:"phone_number"},{name:"E-mail",key:"email"},{name:"Гражданство",key:"citizenship"}]},{title:"Адрес",info:[{name:"Регион",key:"region"},{name:"Район/городской округ",key:"locality",render:function(t){return e.getBirthday(t)}},{name:"Населённый пункт",key:"district",render:function(e){return e}},{name:"Почтовый индекс",key:"postal_code"},{name:"Улица",key:"street"},{name:"Номер дома",key:"house"},{name:"Квартира",key:"apartment",require:!1}]},{title:"Образование",info:[{name:"Форма обучения",key:"form_education"},{name:"Место обучения",key:"place_education",render:function(t){return e.getPlaceEducation(t)}},{name:"Образовательная организация",key:"name_place_education"}]}]}}}},c155:function(e,t,n){},cbc7:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document-container passport-container"},[e.isAdmin?e._e():n("h4",{domProps:{innerHTML:e._s(e.getText)}}),e.isAdmin||e.visible?n("x-form",{staticClass:"user-application-container",attrs:{values:e.form,name:"passport"},on:{submit:e.onSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("application-form",{attrs:{items:e.items}}),n("div",{staticClass:"confirm-checkbox"},[n("FormulateInput",{attrs:{type:"checkbox",id:"label1",name:"confirmCheckbox2","error-behavior":"submit"},model:{value:e.vaccinated,callback:function(t){e.vaccinated=t},expression:"vaccinated"}}),n("label",{staticClass:"label",attrs:{for:"label1"}},[e._v("Вакцинировался")])],1),n("div",{staticClass:"inline-buttons"},[n("a-button",{staticStyle:{padding:"0 50px"},attrs:{disabled:e.loading,"html-type":"submit",type:"primary"}},[e._v("Сохранить")]),e.isAdmin?e._e():n("button",{staticClass:"text-button",attrs:{disabled:e.loading},on:{click:function(t){return t.preventDefault(),e.onRefuse.apply(null,arguments)}}},[e._v(" Отказаться от участия ")])],1)],1):e._e()],1)},a=[],r=n("5530"),s=n("1da1"),o=(n("498a"),n("a9e3"),n("caad"),n("2532"),n("96cf"),n("cd3f")),c=n.n(o),u=n("1bd6"),l={data:function(){return{items:[[{title:"Паспортные данные",xl:24},{name:"passport_series",validation:"required|min:4,length|max:4,length",type:"text",maxlength:4,label:"Серия"},{name:"passport_number",validation:"required|min:6,length|max:6,length",type:"text",maxlength:6,label:"Номер"},{name:"place_birth",validation:"required",type:"text",label:"Место рождения"}],[{name:"issued_by_whom",validation:"required",type:"text",label:"Кем выдан"},{name:"department_code",validation:"required|min:7,length|max:7,length",mask:"###-###",type:"text",maxlength:6,label:"Код подразделения"},{name:"when_issued",validation:"required|before:2025-09-19|after:2005-10-01",min:"2005-10-01",max:"2025-09-19",type:"date",label:"Когда выдан"}],[{title:"Адрес регистрации (по паспорту)",xl:24},{name:"passport_city",validation:"required",label:"Город",type:"text",md:24},{name:"passport_street",validation:"required",type:"text",label:"Улица"},{name:"passport_house",type:"text",validation:"required",label:"Номер дома",xl:4},{name:"passport_apartment",max:"999",min:"1",step:"1",type:"number",label:"Квартира",xl:4}]]}}},m={components:{ApplicationForm:u["a"]},mixins:[l],props:{userInfo:{type:Object,required:!0},isAdmin:{type:Boolean,required:!1}},data:function(){return{vaccinated:!1,form:{},nomination:[],step:"main",loading:!1,errorsObj:{}}},mounted:function(){this.isAdmin&&this.$formulate.setValues("passport",this.userInfo),this.vaccinated=!!this.userInfo.vaccinated},methods:{cloneData:function(e){return c()(e)},onSubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,n=e.cloneData(Object(r["a"])(Object(r["a"])({},e.form),{},{vaccinated:e.vaccinated,filled_passport:!0})),delete n.user_avatar,t.next=6,e.$store.dispatch("app/saveEntity",{entityName:"users",data:n,method:"patch",id:e.userInfo.id});case 6:return t.next=8,e.$store.dispatch("user/getUserData");case 8:e.$toast.success("Успешно сохранено"),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](1),console.log(t.t0),400===(null===t.t0||void 0===t.t0||null===(i=t.t0.response)||void 0===i?void 0:i.status)?e.$formulate.handle(t.t0.response.data,"application"):e.$errors.showOnce("Неизвестная ошибка");case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,11,15,18]])})))()},onRefuse:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Отказ от участия",text:"Вы точно хотите отказаться от участия в очном этапе?",showCancelButton:!0,confirmButtonText:"Отказаться",cancelButtonText:"Отмена"});case 2:if(n=t.sent,i=n.isConfirmed,i){t.next=6;break}return t.abrupt("return");case 6:return e.loading=!0,t.prev=7,t.next=10,e.$store.dispatch("app/saveEntity",{entityName:"users",data:{refused_participate:!0},method:"patch",id:e.userInfo.id});case 10:return t.next=12,e.$store.dispatch("user/getUserData");case 12:e.$forceUpdate(),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](7),console.log(t.t0),400===(null===t.t0||void 0===t.t0||null===(a=t.t0.response)||void 0===a?void 0:a.status)?e.$formulate.handle(t.t0.response.data,"application"):e.$errors.showOnce("Неизвестная ошибка");case 19:return t.prev=19,e.loading=!1,t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[7,15,19,22]])})))()},trimWhitespacedAndToInt:function(e){for(var t in e)"string"==typeof e[t]&&(e[t]=e[t].trim()),e[t]!=Number(e[t])||e[t].includes("+")||(e[t]=Number(e[t]))}},computed:{visible:function(){return!this.userInfo.filled_passport&&!this.userInfo.refused_participate},getText:function(){return this.userInfo.refused_participate?"Вы отказались от участия в <mark>очном этапе</mark>.":this.userInfo.filled_passport?"Спасибо! Ваша анкета участника <mark>очного этапа</mark> сохранена.":"Поздравляем! Вам одобрили участие в <mark>очном этапе</mark>. Вы можете\n      отказаться от очного участия ИЛИ для организации Вашего комфортного\n      пребывания в рамках выездного очного этапа ввести следующие данные для\n      подтверждения очного участия:"}}},d=m,p=(n("9496"),n("2877")),f=Object(p["a"])(d,i,a,!1,null,null,null);t["a"]=f.exports},daa8:function(e,t,n){"use strict";n("4032")},deca:function(e,t,n){"use strict";n("0536")},e4a0:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile-steps"},e._l(e.steps,(function(t,i){return n("div",{key:t.name,class:"profile-steps__step "+e.getStepClass(t.id)},[n("div",{staticClass:"profile-steps__step--count"},[e._v(e._s(i+1))]),n("div",{staticClass:"inline"},[n("div",{staticClass:"profile-steps__step--name",style:e.getStyle(t)},[e._v(e._s(t.name))]),!e.noHint&&e.showPrompt(t.id)?n("div",{staticClass:"profile-steps__step--prompt"},[e._v(" "+e._s(t.prompt)+" ")]):e._e()])])})),0)},a=[],r=(n("7db0"),{props:{synonym:{type:String,required:!1},noHint:{type:Boolean,required:!1}},computed:{currentStep:function(){var e=this,t=this.steps.find((function(t){return t.synonym===e.synonym}));return t.id}},data:function(){return{steps:[{id:0,synonym:"fills_application",name:"Заполнение заявки",color:"#d88ca8",prompt:"Поздравляем! Вы успешно прошли этап регистрации"},{id:1,synonym:"submitted_application",name:"На рассмотрении",prompt:"Ваша заявка на конкурс проверяется экспертами",color:"#0094B3"},{id:2,synonym:"correspondence_stage",name:"Участник заочного этапа",prompt:"Поздравляем! Вы перешли на заочный этап конкурса",color:"#797dea"},{id:3,synonym:"full_time_stage",name:"Участник очного этапа",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#6E2C6B"},{id:4,synonym:"nominee",name:"Номинант",prompt:"Поздравляем! Вы номинант",color:"#E62D3B"},{id:5,synonym:"laureate",name:"Лауреат",prompt:"Поздравляем! Вы лауреат",color:"#FCD800"},{id:6,synonym:"winner",name:"Победитель",prompt:"Поздравляем! Вы победитель",color:"#459D27"}]}},methods:{getStepClass:function(e){return e<this.currentStep?"profile-steps__step--award":e===this.currentStep?"profile-steps__step--current":e>this.currentStep?"profile-steps__step--not-award":void 0},showPrompt:function(e){return e<=this.currentStep},getStyle:function(e){return{background:this.showPrompt(e.id)?e.color:"transparent"}}}}),s=r,o=(n("bbc02"),n("2877")),c=Object(o["a"])(s,i,a,!1,null,"75b29137",null);t["a"]=c.exports},eb47:function(e,t,n){},f26f:function(e,t,n){},f72f:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ol",{staticClass:"achievement-spec-block spec-participant"},[e._l(e.participants,(function(t,i){return n("li",{key:t.fullname,staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("span",{staticClass:"count"},[e._v(e._s(i+1))]),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[e._v("Удалить участника")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(t){return e.deleteParticipant(i)}}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[e._v(e._s(t.fullname))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[e._v(e._s(t.degree_participation))])])])])})),e.loading?e._e():n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--info"},[n("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[n("x-form",{staticClass:"achievement-spec-block--form",attrs:{name:"participantForm"},on:{submit:e.addParticipant},model:{value:e.participantForm,callback:function(t){e.participantForm=t},expression:"participantForm"}},[n("div",{staticClass:"achievement-spec-block--form-item"},[n("span",{staticClass:"count"},[e._v(e._s(e.participants.length+1))]),n("x-input",{staticClass:"item-name",attrs:{name:"fullname",type:"text",validation:"isFullName",label:"ФИО участника","validation-rules":{isFullName:function(e){var t=e.value;return 3===t.trim().split(" ").length}},"validation-messages":{isFullName:"Введите ФИО"},"error-behavior":"submit"}}),n("x-input",{staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:e.participationDegree,label:"Степень участия","error-behavior":"submit"}})],1),n("a-button",{staticClass:"document-container-button achievement-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[e._v("Добавить участника")])],1)],1)],1)])])],2)},a=[],r=n("5530"),s={props:{participationDegree:{type:Array,required:!0},participants:{type:Array,required:!0}},data:function(){return{loading:!1,participantForm:{}}},methods:{addParticipant:function(){var e=this;this.loading=!0,this.$emit("add-participant",Object(r["a"])({},this.participantForm)),setTimeout((function(){e.participantForm={},e.loading=!1}),0)},deleteParticipant:function(e){this.$emit("remove-participant",e)}}},o=s,c=(n("9ebe"),n("2877")),u=Object(c["a"])(o,i,a,!1,null,null,null);t["a"]=u.exports},f751:function(e,t,n){"use strict";n("a56a")},fa63:function(e,t,n){"use strict";n("a346")},fb88:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document-container upload-spec-org"},[n("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.indicator.name)+" ")]),e.indicator.hint_text?n("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.indicator.hint_text)+" ")]):e._e(),n("div",[e.achievements.length||e.onlyRead?n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[e.onlyRead||e.checkout?e._e():n("div",{staticClass:"achievement-list__item--tools"},[n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[e._v("Удалить достижение")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:e.deleteAchievement}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[e._v("Наименование организации")]),n("span",[e._v(e._s(e.achievements[0].name_association))])]),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[e._v("Образовательная организация")]),n("span",[e._v(e._s(e.achievements[0].educational_organization))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[e._v("Год основания")]),n("span",[e._v(e._s(e.achievements[0].year_foundation))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[e._v("Характеристика")]),n("span",[e._v(e._s(e.achievements[0].brief_description_association))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[e._v("Участники")]),n("ul",{staticClass:"participation-person-list"},e._l(e.achievements[0].full_name,(function(t,i){return n("li",{key:i,staticClass:"participation-person-list--item"},[n("span",[e._v(e._s(t[0]))]),n("span",[e._v(e._s(t[1]))])])})),0)]),e.achievements.length?n("div",{staticClass:"achievement-list__item--read--item item-period"},[n("span",[e._v("Кол-во участников")]),n("span",[e._v(e._s(e.achievements[0].number_participants))])]):e._e()]),e.achievements[0].documents.length?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},e._l(e.achievements[0].documents,(function(t){return n("a",{key:t.id,staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(t.document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(t.documentName))])],1)})),0),e.checkout?n("change-statuses-expert",{staticStyle:{"margin-top":"1rem"},attrs:{stage_status:e.stage_status,score:e.achievements[0].score,confirmed_score:e.achievements[0].confirmed_score,checkWork:e.checkWork}}):e._e()],1):e._e()]):n("x-form",{staticClass:"achievement-spec",attrs:{values:e.form,name:"spec"},on:{submit:function(t){return e.submit(e.indicator.id)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("upload-spec-description"),n("upload-spec-participant",{attrs:{participants:e.participants,participationDegree:e.participationDegree},on:{"remove-participant":e.removeParticipant,"add-participant":e.addParticipant}}),n("div",{staticClass:"achievement-spec-block"},[n("x-input",{attrs:{type:"number",name:"number_participants",label:"Кол-во участников",validation:"required|number|min:0|max:50",min:"0",max:"200"}})],1),n("div",{staticClass:"achievement-spec-block"},[n("file-component",{attrs:{multiple:""},on:{change:function(t){return e.setFiles(t)}}})],1),n("a-button",{staticClass:"document-container-button spec-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[e._v("Сохранить данные достижения")])],1)],1)],1)])},a=[],r=n("5530"),s=n("1da1"),o=(n("96cf"),n("99af"),n("d81d"),n("b0c0"),n("a434"),n("b48b")),c=n("f72f"),u=n("7561"),l=n("5b55"),m=n("8a95"),d="https://студентгода63.рф/media",p={components:{FileComponent:o["a"],UploadSpecParticipant:c["a"],UploadSpecDescription:u["a"],ChangeStatusesExpert:m["a"]},props:{participationDegree:{type:Array,required:!0},indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},achievements:{type:Array,required:!0},onlyRead:{type:Boolean,required:!1},getCurrentApplication:{type:Function,required:!1}},data:function(){return{media:d,form:{},participants:[],documents:[],stage_status:null}},computed:{checkout:function(){return this.$route.meta.check}},mounted:function(){this.checkout&&(this.stage_status=this.achievements[0].stage_status)},methods:{getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},setFiles:function(e){this.documents=e},submit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i=t.participants.map((function(e){return[e.fullname,e.degree_participation]})),n.next=4,t.saveAchievement(Object(r["a"])(Object(r["a"])({},t.form),{},{documents:t.documents,full_name:i,indicators:e,name:t.indicator.name}),"spec");case 4:t.form={},n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},deleteAchievement:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0,confirmButtonText:"Удалить",cancelButtonText:"Отмена"});case 2:n=t.sent,i=n.isConfirmed,i&&e.$emit("remove",e.achievements[0].id);case 5:case"end":return t.stop()}}),t)})))()},addParticipant:function(e){this.participants.push(e)},removeParticipant:function(e){this.participants.splice(e,1)},checkWork:function(e,t,n){var i=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={stage_status:e,confirmed_score:n},a.confirmed_score||delete a.confirmed_score,t.prev=2,t.next=5,i.$store.dispatch("app/saveEntity",{data:a,method:"patch",id:i.achievements[0].id,entityName:"".concat(l["a"])});case 5:r=t.sent,i.stage_status=r.stage_status,i.achievements[0].confirmed_score=r.confirmed_score,i.getCurrentApplication(),t.next=18;break;case 11:if(t.prev=11,t.t0=t["catch"](2),console.log(t.t0),!t.t0.response.data["expert already appointed"]){t.next=17;break}return i.$toast.error("Уже проверяется другим экспертом"),t.abrupt("return");case 17:i.$toast.error("Неизвестная ошибка");case 18:case"end":return t.stop()}}),t,null,[[2,11]])})))()}}},f=p,h=(n("4475"),n("2877")),v=Object(h["a"])(f,i,a,!1,null,null,null);t["a"]=v.exports}}]);