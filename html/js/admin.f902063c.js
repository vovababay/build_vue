(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"0cb2":function(e,t,n){var a=n("7b0b"),r=Math.floor,i="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,u,l){var p=n+e.length,m=c.length,d=s;return void 0!==u&&(u=a(u),d=o),i.call(l,d,(function(a,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(p);case"<":o=u[i.slice(1,-1)];break;default:var s=+i;if(0===s)return a;if(s>m){var l=r(s/10);return 0===l?a:l<=m?void 0===c[l-1]?i.charAt(1):c[l-1]+i.charAt(1):a}o=c[s-1]}return void 0===o?"":o}))}},"1fcc":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[n("x-table",{attrs:{entityName:"nomination",data:e.nomination,columns:e.columns,actions:["create","read","edit","delete"]},on:{delete:e.deleteItem}})],1)],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),n("5b55")),s=[{title:"ID",dataIndex:"id"},{title:"Название",dataIndex:"name",filterable:!0}],c={data:function(){return{columns:s}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getNomination();case 2:case"end":return t.stop()}}),t)})))()},computed:{nomination:function(){return this.$store.state.app.nomination}},methods:{getNomination:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"nomination"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:o["d"],id:e});case 4:t.$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()}}},u=c,l=n("2877"),p=Object(l["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},2783:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[n("x-table",{attrs:{entityName:"period",data:e.period,columns:e.columns,actions:["create","read","edit","delete"]},on:{delete:e.deleteItem}})],1)],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),n("5b55")),s=[{title:"ID",dataIndex:"id"},{title:"Название",dataIndex:"name",filterable:!0}],c={data:function(){return{columns:s}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPeriod();case 2:case"end":return t.stop()}}),t)})))()},computed:{period:function(){return this.$store.state.app.period}},methods:{getPeriod:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:o["e"]});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:o["e"],id:e});case 4:t.$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()}}},u=c,l=n("2877"),p=Object(l["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},"2a25":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",[n("x-form",{staticClass:"participantQuestionnaire",attrs:{values:e.participantQuestionnaire,name:"participant-questionnaire container"},model:{value:e.participantQuestionnaire,callback:function(t){e.participantQuestionnaire=t},expression:"participantQuestionnaire"}},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("checkout-header",{attrs:{userInfo:e.userInfo,currentApplication:e.currentApplication}}),n("component-tabs",{attrs:{activeTab:e.activeTab,tabs:e.routerTabs},on:{setActiveNomination:function(t){return e.$router.push("/"+(e.checkout?"check":"users")+"/"+t)}}})],1),e.loading?e.isEmpty?n("h5",{staticStyle:{"text-align":"center"}},[e._v(" Анкета у участника еще не создана ")]):n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",[n("div",{staticClass:"container-body"},[e._l(e.questionnaries,(function(t){return n("Upload",{key:t.id,ref:"questionnaries",refInFor:!0,attrs:{isAdmin:"",isProfile:e.isProfile,questionnaire:t,getCurrentApplication:e.getCurrentApplication,currentApplication:e.currentApplication}})})),e.checkout?e._e():n("a-col",{staticClass:"inline-buttons",staticStyle:{width:"200px",margin:"auto","margin-top":"35px"},attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:e.loading,type:"primary",block:"","html-type":"submit"},on:{click:e.onApplicate}},[e._v(" Сохранить ")])],1)],2)])],1)],1)],1)],1)},r=[],i=n("46f9"),o=n("ade3"),s=n("5530"),c=n("2909"),u=n("1da1"),l=(n("99af"),n("c740"),n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("4de4"),n("caad"),n("2532"),n("ac1f"),n("1276"),n("498a"),n("96cf"),n("ac3d")),p=n("cd3f"),m=n.n(p),d=n("09bc"),f="https://студентгода63.рф/media",h={components:{Upload:l["a"]},props:["id"],data:function(){return{loading:!0,buttonDisabled:!1,questionnaries:[],participantQuestionnaire:{},isProfile:!1,isEmpty:!1,issuingAuthority:d["j"],userInfo:{},media:f,currentApplication:null,documentView:d["e"],activeTab:"edit/".concat(this.id,"/questionnaire"),routerTabs:[{name:"Основные сведения",id:"read/".concat(this.id)},{name:"Анкета участника",id:"edit/".concat(this.id,"/questionnaire")},{name:"Прикрепленные документы",id:"edit/".concat(this.id,"/achievements")}]}},computed:{checkout:function(){return this.$route.meta.check},initialIndicators:function(){return this.$store.state.app.indicator}},beforeRouteLeave:function(e,t,n){var a=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.isEmpty){t.next=3;break}return n(),t.abrupt("return");case 3:if(!e.query.next){t.next=8;break}return n(),t.abrupt("return");case 8:n();case 9:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.getBaseIndicators(),!e.checkout){t.next=6;break}return t.next=4,e.getCurrentApplication();case 4:t.next=8;break;case 6:return t.next=8,e.getUser();case 8:return t.next=10,e.getIndicatorsReport();case 10:return n=t.sent,e.questionnaries=[].concat(Object(c["a"])(e.questionnaries),Object(c["a"])(n)),t.next=14,e.getParticipantQuestionnaire();case 14:if(e.participantQuestionnaireResponse=t.sent,e.participantQuestionnaireResponse.certificate_place_study){t.next=19;break}return e.isEmpty=!0,e.loading=!1,t.abrupt("return");case 19:return t.next=21,e.renderQuestionnaires(e.participantQuestionnaireResponse);case 21:e.loading=!1;case 22:case"end":return t.stop()}}),t)})))()},methods:{getCurrentApplication:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"applications/".concat(e.id)});case 3:n=t.sent,e.currentApplication=n.data,e.userInfo=e.currentApplication.user,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"users/".concat(e.id)});case 3:n=t.sent,e.userInfo=n.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getParticipantQuestionnaire:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"participant-questionnaire",params:{user:e.userInfo.id}});case 3:return n=t.sent,t.abrupt("return",n.data);case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},renderQuestionnaires:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.questionnaries[t.questionnaries.findIndex((function(e){return"autobiography"===e.id}))].documents=e.autobiography,t.questionnaries[t.questionnaries.findIndex((function(e){return"certificate_place_study"===e.id}))].documents=e.certificate_place_study,t.questionnaries[t.questionnaries.findIndex((function(e){return"characteristic"===e.id}))].data=e.characteristic.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{score:1})})),!e.report_card){n.next=10;break}return e.report_card.map((function(e,n){t.questionnaries[t.questionnaries.findIndex((function(t){return t.id===e.indicator_report_card}))].data=Object(s["a"])(Object(s["a"])({},e),{},{position:n+1,score:e.preliminary_score_report_card})})),a=2,n.next=8,Promise.all(t.questionnaries.filter(function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("radio_and_multiple"!==n.type){e.next=11;break}if(!n.data){e.next=5;break}return e.abrupt("return",n.data);case 5:return e.next=7,t.rejectUnUsed("report_card_".concat(a));case 7:return a--,e.abrupt("return",!1);case 9:e.next=12;break;case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:t.questionnaries=n.sent,t.questionnaries=t.questionnaries.filter((function(e){return console.log(e),"radio_and_multiple"!==e.type||!!e.data}));case 10:return n.next=12,t.rejectUnUsedCharacteristics(t.questionnaries[t.questionnaries.findIndex((function(e){return"characteristic"===e.id}))].data);case 12:case"end":return n.stop()}}),n)})))()},rejectUnUsedCharacteristics:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var a,r,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.checkout){n.next=2;break}return n.abrupt("return");case 2:for(a=3,r=3,Array.isArray(e)&&e.length&&(r-=e.length),i=a-r+1,o=[],i;i<=a;i++)e[a],o.push(t.rejectUnUsed("characteristic_".concat(i)));return n.next=10,Promise.all(o);case 10:case"end":return n.stop()}}),n)})))()},rejectUnUsed:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.checkout){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.abrupt("return",t.$store.dispatch("app/saveEntity",{data:Object(o["a"])({},"stage_status_".concat(e),"rejected"),method:"patch",id:t.$route.params.id,entityName:"applications"}));case 6:n.prev=6,n.t0=n["catch"](2),console.log(n.t0),t.$toast.error("Неизвестная ошибка");case 10:case"end":return n.stop()}}),n,null,[[2,6]])})))()},getType:function(){return this.$route.path.includes("profile")},getBaseIndicators:function(){this.questionnaries=[{id:"certificate_place_study",name:"Справка с места учебы*",first_help_text:"Прикрепите сканированную копию справки с места учебы в формате jpeg, pdf, имеющую печать образовательной организации, датированную не ранее 05.04.2021 г. Можно прикрепить потом в личном кабинете. Отправить заявку без этого нельзя",title:"Прикрепить справку",type:"only_file",acceptFormats:["image/jpeg","application/pdf"],score:1},{id:"autobiography",name:"Автобиография конкурсанта",first_help_text:"Можно прикрепить только 1 документ формата doc, docx",title:"Прикрепить автобиографию",type:"only_file",acceptFormats:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],score:1},{id:"characteristic",name:"Характеристики, отзывы и ходатайства",first_help_text:"Вы можете прикрепить документы, подтверждающие Ваше участие и вклад в выбранном Вами направлении за последние два года. Например, характеристики, ходатайства и т.д. студенческих организаций (объединений), администрации вуза/ссуза и т.п. За каждый отдельный новый документ Вы можете получить 1 балл. Максимальное количество баллов – 3",type:"multiple"}]},getIndicatorsReport:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"indicator-report-card"});case 3:return n=t.sent,t.abrupt("return",e.renderIndicators(n));case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},renderIndicators:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.data.map((function(e){return e.type="radio_and_multiple",e})));case 1:case"end":return t.stop()}}),t)})))()},getFormData:function(e){var t=new FormData;for(var n in e)"documents"===n?e[n].map((function(e){t.append("documents",e)})):t.append(n,e[n]);return t},addDocumentName:function(e){if(e){var t=e.split("/");return t[t.length-1]}},renderDocuments:function(e){var t=this;return e.map((function(e){return e.documentName=t.addDocumentName(e.document),e}))},trimWhitespaces:function(e){for(var t in e)e[t]===String&&e[t].trim()},protectRouting:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Есть несохраненные данные",text:"Вы точно хотите уйти со страницы? Несохраненные данные будут утеряны.",showCancelButton:!0,confirmButtonText:"Продолжить",cancelButtonText:"Отмена"});case 2:return n=t.sent,a=n.isConfirmed,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},onApplicate:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i,o,s,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.buttonDisabled=!0,r=[],i=[],o=[],s=[],l=[],t.$refs.questionnaries.map((function(e){e.only_file_document&&l.push(e.id),o.push({reports:Object(c["a"])(e.reports),documents:Object(c["a"])(e.documents),id:e.id,type:e.questionnaire.type,characteristics:Object(c["a"])(e.characteristics),data:e.questionnaire.data})})),e.next=10,Promise.all(o.map(function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(o){var c,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("autobiography"!==o.id){e.next=7;break}if(o.documents.length){e.next=6;break}if(!l.includes(o.id)){e.next=4;break}return e.abrupt("return");case 4:e.next=7;break;case 6:n=o.documents[0];case 7:if("certificate_place_study"!==o.id){e.next=16;break}if(o.documents.length){e.next=15;break}if(!l.includes(o.id)){e.next=11;break}return e.abrupt("return");case 11:s.push("Прикрепите справку об обучении"),Promise.reject("error"),e.next=16;break;case 15:a=o.documents[0];case 16:if("characteristic"!==o.id||s.length){e.next=30;break}return e.prev=17,c=o.characteristics.filter((function(e){return!e.id})),e.next=21,t.createCharacteristics(c);case 21:if(u=e.sent,u.length){e.next=24;break}return e.abrupt("return");case 24:i.push(u),e.next=30;break;case 27:e.prev=27,e.t0=e["catch"](17),console.log(e.t0);case 30:if("radio_and_multiple"!==o.type||s.length){e.next=43;break}return e.prev=31,e.next=34,t.createReportCard(o);case 34:if(p=e.sent,p){e.next=37;break}return e.abrupt("return");case 37:r.push(p),e.next=43;break;case 40:e.prev=40,e.t1=e["catch"](31),console.log(e.t1);case 43:return e.abrupt("return","");case 44:case"end":return e.stop()}}),e,null,[[17,27],[31,40]])})));return function(t){return e.apply(this,arguments)}}()));case 10:if(!s.length){e.next=14;break}return s.map((function(e){t.$toast.error(e)})),s=[],e.abrupt("return");case 14:return p=m()({report_card:r,autobiography:n,certificate_place_study:a,characteristic:i}),p.characteristic.length||delete p.characteristic,p.report_card.length||delete p.report_card,n||delete p.autobiography,l.includes("certificate_place_study")&&delete p.certificate_place_study,p=t.getFormData(p),e.next=22,t.$store.dispatch("app/saveEntity",{id:t.participantQuestionnaireResponse.id,data:p,method:"patch",entityName:"participant-questionnaire"});case 22:t.$toast.success("Успешно сохранено"),e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](0),console.log(e.t0),t.$errors.show(e.t0.response.data);case 29:return e.prev=29,t.buttonDisabled=!1,e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[0,25,29,32]])})))()},createReportCard:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var a,r,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.reports.length){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.createReports(e.reports);case 4:return r=n.sent,i=t.getFormData({documents:e.documents,reports:r,indicator_report_card:e.id}),n.next=8,t.$store.dispatch("app/saveEntity",{entityName:"report-card",method:e.data?"patch":"post",id:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.id,data:i});case 8:return o=n.sent,n.abrupt("return",o.id);case 10:case"end":return n.stop()}}),n)})))()},createReports:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(e.map((function(e){return new Promise(function(){var n=Object(u["a"])(regeneratorRuntime.mark((function n(a){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("app/saveEntity",{entityName:"report",method:"post",data:e});case 2:r=n.sent,a(r.id);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},createCharacteristics:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(e.map((function(e){return new Promise(function(){var n=Object(u["a"])(regeneratorRuntime.mark((function n(a){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.getFormData(m()(e)),n.next=3,t.$store.dispatch("app/saveEntity",{entityName:"characteristic",method:"post",data:r});case 3:i=n.sent,a(i.id);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},generateExcel:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/saveEntity",{entityName:"user-all-data",method:"post",data:{application_id:e}});case 3:a=n.sent,r=document.createElement("a"),r.href="".concat(t.media,"/").concat(a),r.click(),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),console.log(n.t0),t.$errors.show(n.t0.response.data);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()}}},v=n("2dd8"),g=n("87d6"),b={components:{ComponentTabs:i["a"],CheckoutHeader:g["a"]},mixins:[h,v["a"]],data:function(){return{activeTab:"read/".concat(this.id,"/questionnaire"),routerTabs:[{name:"Основные сведения",id:"read/".concat(this.id)},{name:"Анкета участника",id:"read/".concat(this.id,"/questionnaire")},{name:"Прикрепленные документы",id:"read/".concat(this.id,"/achievements")}]}}},x=b,_=(n("aca1"),n("2877")),w=Object(_["a"])(x,a,r,!1,null,null,null);t["default"]=w.exports},"2dd8":function(e,t,n){"use strict";var a=n("5530"),r=n("1da1");n("498a"),n("99af"),n("96cf");t["a"]={data:function(){return{loading:!0,buttonDisabled:!1}},methods:{getEntity:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.loading=!0,n.next=4,t.$store.dispatch("app/getItem",{entityName:t.entityName,id:t.getID});case 4:if(r=n.sent,!e){n.next=7;break}return n.abrupt("return",r.data);case 7:t.formData=Object(a["a"])(Object(a["a"])({},t.formData),r.data),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},trimWhitespaces:function(e){for(var t in e)e[t]===String&&e[t].trim()},saveEntity:function(e,t,n){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a.buttonDisabled=!0,a.trimWhitespaces(a.formData),r.next=5,a.$store.dispatch("app/saveEntity",{id:t?n:a.getID,data:e||a.formData,method:t||a.method,entityName:a.entityName});case 5:i=r.sent,t||(a.$toast.success(a.getMessage),a.$router.push("/".concat(a.entityName,"/read/").concat(i.id))),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0),a.$errors.showOnce(r.t0.response.data);case 13:return r.prev=13,a.buttonDisabled=!1,r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[0,9,13,16]])})))()},deleteItem:function(e,t){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.loading=!0,a.prev=1,a.next=4,n.$store.dispatch("app/deleteItem",{entityName:t||n.entityName,id:e,nothingStoreDelete:!0});case 4:n.$toast.success("Успешно удалено"),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.log(a.t0),n.$errors.showOnce(a.t0.response.data);case 11:return a.prev=11,n.loading=!1,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,7,11,14]])})))()},uploadFile:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=new FormData,a.append("image_uri",e),n.next=4,t.$store.dispatch("app/saveEntity",{entityName:"static-image",data:a,method:"post"});case 4:return r=n.sent,n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()}},computed:{disabled:function(){return"read"===this.action},getID:function(){if("_"!==this.id)return this.id},method:function(){switch(this.action){case"create":return"post";case"edit":return"patch";default:return null}},getButtonAction:function(){switch(this.action){case"create":return"Создать";case"read":return"Редактировать";case"edit":return"Сохранить"}},getAction:function(){switch(this.action){case"create":return"Создание";case"read":return"Просмотр";case"edit":return"Редактирование"}},getMessage:function(){switch(this.action){case"create":return"Успешно создано";case"edit":return"Успешно сохранено"}}}}},3603:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{md:{span:22,offset:0},lg:{span:22,offset:0},xl:{span:22,offset:0}}},[n("x-input",{attrs:{label:"Название",name:"name",type:"text",validation:"required",disabled:e.disabled}}),n("x-input",{attrs:{label:"Текст под названием",name:"subname",type:"text",validation:"required",disabled:e.disabled}}),n("x-input",{attrs:{label:"Подсказка для предметов",name:"first_help_text",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length",help:e.formData.first_help_text&&"Максимально "+e.textareaMaxLength+". "+(e.textareaMaxLength-e.formData.first_help_text.length<=0?0:e.textareaMaxLength-e.formData.first_help_text.length)+" символось осталось."}}),n("x-input",{attrs:{label:"Подсказка для файлов",name:"second_help_text",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length",help:e.formData.second_help_text&&"Максимально "+e.textareaMaxLength+". "+(e.textareaMaxLength-e.formData.second_help_text.length<=0?0:e.textareaMaxLength-e.formData.second_help_text.length)+" символось осталось."}})],1),n("a-col",{attrs:{span:"6"}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" "+e._s(e.getButtonAction)+" ")])],1)])],1)],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),n("2dd8")),s={props:["action","id"],mixins:[o["a"]],data:function(){return{formData:{},entityName:"indicator-report-card",textareaMaxLength:1024}},methods:{onsubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("read"!==e.action){t.next=3;break}return e.$router.push("/indicator-report-card/edit/".concat(e.id)),t.abrupt("return");case 3:return t.next=5,e.saveEntity(e.formData);case 5:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("create"===e.action){t.next=3;break}return t.next=3,e.getEntity();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}},c=s,u=n("2877"),l=Object(u["a"])(c,a,r,!1,null,"1180da16",null);t["default"]=l.exports},"3e02":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{name:"formData",values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0}}},[e.formData.stories?n("FormulateInput",{attrs:{type:"group",name:"stories",repeatable:"",label:"Организаторы","add-label":"Добавить историю успеха",validation:"required"},scopedSlots:e._u([{key:"remove",fn:function(t){var a=t.index,r=t.removeItem;return[n("span",{staticClass:"formulate-input-group-repeatable-remove",on:{click:function(t){return e.onRemoveItem(a,r)}}},[e._v("Удалить")])]}},{key:"default",fn:function(t){var a=t.index;return[n("x-input",{staticClass:"item-name",attrs:{name:"initials",type:"text",validation:"isFullName",label:"Инициалы","validation-rules":{isFullName:function(e){var t=e.value;return 2===t.trim().split(" ").length}},"validation-messages":{isFullName:"Инициалы некорректны"},"error-behavior":"submit"}}),n("x-input",{attrs:{label:"Описание лидера",name:"about",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length"}}),n("x-input",{attrs:{label:"Цитата",name:"quite",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length"}}),n("file-component",{attrs:{acceptFormats:e.acceptFormats,hint_text:"Загрузите svg, png, jpeg файл","is-document":!!e.formData.stories[a]&&!!e.formData.stories[a].image_uri,"hidden-list":""},on:{change:function(t){return e.setFiles(t,a)}}}),e.formData.stories[a]&&e.formData.stories[a].image_uri?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},[n("span",{staticClass:"file-container__files--file",attrs:{target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(e.formData.stories[a]&&e.formData.stories[a].image_uri.image_uri))]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(t){return e.onRemoveFile(e.formData.stories[a].image_uri.id,a)}}})],1)])]):e._e()]}}],null,!1,2137795883)}):e._e()],1),n("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" Сохранить ")])],1)])],1)],1)],1)},r=[],i=n("2909"),o=n("5530"),s=n("3835"),c=n("1da1"),u=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("4fad"),n("a434"),n("96cf"),n("2dd8")),l=n("b48b"),p={props:["action","id"],components:{FileComponent:l["a"]},mixins:[u["a"]],data:function(){return{formData:{stories:[]},textareaMaxLength:2048,entityName:"static-success-stories",acceptFormats:["image/png","image/jpeg","image/svg+xml"]}},methods:{onRemoveItem:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t&&n.formData.stories.length){a.next=3;break}return a.abrupt("return");case 3:if(r=n.formData.stories[e],!r.id){a.next=7;break}return a.next=7,n.$store.dispatch("app/deleteItem",{entityName:"static-success-stories",id:r.id,nothingStoreDelete:!0});case 7:t(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},onsubmit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.saveItems();case 3:n=t.sent,e.formData={stories:n},e.$toast.success("Успешно сохранено"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$errors.show(t.t0.response.data);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},saveItems:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.formData.stories.map(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,Object.entries(n).map((function(e){var t=Object(s["a"])(e,2),n=t[0],r=t[1];"image_uri"!==n?a.append(n,r):a.append(n,r.id)})),t.next=4,e.$store.dispatch("app/saveEntity",{entityName:"static-success-stories",id:n.id,method:n.id?"patch":"post",data:a});case 4:return r=t.sent,t.abrupt("return",Object(o["a"])(Object(o["a"])({},r),{},{image_uri:n.image_uri}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getEntities:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/getEntities",{entityName:e});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},setFiles:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(i["a"])(n.formData.stories),a.prev=1,a.next=4,n.uploadFile(e[0]);case 4:s=a.sent,r.splice(t,1,Object(o["a"])(Object(o["a"])({},r[t]),{},{image_uri:s})),c={stories:r},n.$formulate.setValues("formData",c),console.log(n.formData,"123"),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),n.$errors.show(a.t0.response.data);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))()},onRemoveFile:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(i["a"])(n.formData.stories),a.prev=1,a.next=4,n.$store.dispatch("app/deleteItem",{entityName:"static-image",id:e,nothingStoreDelete:!0});case 4:r.splice(t,1,Object(o["a"])(Object(o["a"])({},r[t]),{},{image_uri:null})),n.formData={stories:r},console.log(n.formData,"123"),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),n.$errors.show(a.t0.response.data);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},getEntity:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$store.dispatch("app/getEntities",{entityName:"static-success-stories"});case 4:n=t.sent,e.formData={stories:n.data},t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEntity();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},m=p,d=n("2877"),f=Object(d["a"])(m,a,r,!1,null,"67e40e41",null);t["default"]=f.exports},4091:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[e.loading?e._e():n("x-table",{attrs:{entityName:"contest",data:e.contests,columns:e.columns,actions:["read","edit","delete","create"]},on:{delete:e.deleteItem}})],1)],1)],1)},r=[],i=n("1da1"),o=(n("99af"),n("96cf"),"https://студентгода63.рф/media"),s=[{title:"ID",dataIndex:"id"},{title:"Название конкурса",dataIndex:"name"}],c={data:function(){return{columns:s,loading:!0,media:o}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getContests();case 2:case"end":return t.stop()}}),t)})))()},computed:{contests:function(){return this.$store.state.app.contest}},methods:{getContests:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"contest"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:return t.prev=8,e.loading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,5,8,11]])})))()},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:"contest",id:e});case 4:t.$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()},generate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.key,n.prev=1,n.next=4,t.$store.dispatch("app/getEntities",{entityName:a});case 4:r=n.sent,i=document.createElement("a"),i.href="".concat(t.media,"/").concat(r.data),i.click(),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),console.log(n.t0),t.$errors.show(n.t0.response.data);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()}}},u=c,l=n("2877"),p=Object(l["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},"4c31":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[e.formData.period?n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:24,offset:0}}},[n("h6",{staticStyle:{"font-weight":"normal"}},[e._v(e._s(e.formData.indicators.name))]),n("a-divider")],1):e._e(),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Название",name:"name",type:"text",validation:"required","error-behavior":"submit",disabled:e.disabled}})],1),e.formData.degree_participation?n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Степень участия",name:"degree_participation",options:e.participationDegree,type:"select",validation:"required",disabled:e.disabled,"error-behavior":"submit"}})],1):e._e(),e.formData.period?n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Степень участия",name:"period",type:"text",validation:"required",disabled:e.disabled,"error-behavior":"submit"}})],1):e._e(),e.formData.url?n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Ссылка на видео",name:"url",type:"text",validation:"required",disabled:e.disabled,"error-behavior":"submit"}})],1):e._e(),e.formData.documents&&e.formData.documents.length?n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("label",{staticClass:"formulate-input-label"},[e._v(" Прикрепленный документ ")]),n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},[n("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(e.formData.documents[0].document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(e.addDocumentName(e.formData.documents[0].document)))])],1)])])]):e._e(),n("a-col",{attrs:{span:24}},[n("h5",{staticStyle:{color:"#6f346b"}},[e._v("Балл: "+e._s(e.formData.score))])])],1)],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),n("99af"),n("ac1f"),n("1276"),n("2dd8")),s=n("09bc"),c="https://студентгода63.рф/media",u={props:["action","id"],mixins:[o["a"]],data:function(){return{formData:{},entityName:"achievement",textareaMaxLength:255,participationDegree:s["k"],media:c}},methods:{getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},addDocumentName:function(e){if(e){var t=e.split("/");return t[t.length-1]}},onsubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("read"!==e.action){t.next=3;break}return e.$router.push("/achievement/edit/".concat(e.id)),t.abrupt("return");case 3:return n=cloneDeep(e.formData),t.next=6,e.saveEntity(n);case 6:case"end":return t.stop()}}),t)})))()},getEntities:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n.$store.dispatch("app/getItem",{entityName:e,id:t});case 3:return a.abrupt("return",a.sent);case 6:a.prev=6,a.t0=a["catch"](0),console.log(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("create"===e.action){t.next=7;break}return t.next=3,e.getEntity();case 3:return t.next=5,e.getEntities("indicator",e.formData.indicators);case 5:n=t.sent,e.formData.indicators=n.data;case 7:e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},computed:{}},l=u,p=n("2877"),m=Object(p["a"])(l,a,r,!1,null,"2c436106",null);t["default"]=m.exports},"4deb":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{name:"formData",values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0}}},[e.formData.stories?n("FormulateInput",{attrs:{type:"group",name:"stories",repeatable:"",label:"Организаторы","add-label":"Добавить организатора",validation:"required"},scopedSlots:e._u([{key:"remove",fn:function(t){var a=t.index,r=t.removeItem;return[n("span",{staticClass:"formulate-input-group-repeatable-remove",on:{click:function(t){return e.onRemoveItem(a,r)}}},[e._v("Удалить")])]}},{key:"default",fn:function(t){var a=t.index;return[n("x-input",{attrs:{label:"Название организатора",name:"name",type:"text",validation:"required","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Описание",name:"description",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length"}}),n("file-component",{attrs:{acceptFormats:e.acceptFormats,hint_text:"Загрузите svg, png, jpeg файл","is-document":!!e.formData.stories[a]&&!!e.formData.stories[a].image_uri,"hidden-list":""},on:{change:function(t){return e.setFiles(t,a)}}}),e.formData.stories[a]&&e.formData.stories[a].image_uri?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},[n("span",{staticClass:"file-container__files--file",attrs:{target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(e.formData.stories[a]&&e.formData.stories[a].image_uri.image_uri))]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(t){return e.onRemoveFile(e.formData.stories[a].image_uri.id,a)}}})],1)])]):e._e()]}}],null,!1,3188262179)}):e._e()],1),n("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" Сохранить ")])],1)])],1)],1)],1)},r=[],i=n("2909"),o=n("5530"),s=n("3835"),c=n("1da1"),u=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("4fad"),n("a434"),n("96cf"),n("2dd8")),l=n("b48b"),p={props:["action","id"],components:{FileComponent:l["a"]},mixins:[u["a"]],data:function(){return{formData:{stories:[]},textareaMaxLength:2048,entityName:"static-about-organizers",acceptFormats:["image/png","image/jpeg","image/svg+xml"]}},methods:{onRemoveItem:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t&&n.formData.stories.length){a.next=3;break}return a.abrupt("return");case 3:if(r=n.formData.stories[e],!r.id){a.next=7;break}return a.next=7,n.$store.dispatch("app/deleteItem",{entityName:"static-about-organizers",id:r.id,nothingStoreDelete:!0});case 7:t(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},onsubmit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.saveItems();case 3:n=t.sent,e.formData={stories:n},e.$toast.success("Успешно сохранено"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$errors.show(t.t0.response.data);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},saveItems:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.formData.stories.map(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,Object.entries(n).map((function(e){var t=Object(s["a"])(e,2),n=t[0],r=t[1];"image_uri"!==n?a.append(n,r):a.append(n,r.id)})),t.next=4,e.$store.dispatch("app/saveEntity",{entityName:"static-about-organizers",id:n.id,method:n.id?"patch":"post",data:a});case 4:return r=t.sent,t.abrupt("return",Object(o["a"])(Object(o["a"])({},r),{},{image_uri:n.image_uri}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getEntities:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/getEntities",{entityName:e});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},setFiles:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(i["a"])(n.formData.stories),a.prev=1,a.next=4,n.uploadFile(e[0]);case 4:s=a.sent,r.splice(t,1,Object(o["a"])(Object(o["a"])({},r[t]),{},{image_uri:s})),c={stories:r},n.$formulate.setValues("formData",c),console.log(n.formData,"123"),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),n.$errors.show(a.t0.response.data);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))()},onRemoveFile:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(i["a"])(n.formData.stories),a.prev=1,a.next=4,n.$store.dispatch("app/deleteItem",{entityName:"static-image",id:e,nothingStoreDelete:!0});case 4:r.splice(t,1,Object(o["a"])(Object(o["a"])({},r[t]),{},{image_uri:null})),n.formData={stories:r},console.log(n.formData,"123"),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),n.$errors.show(a.t0.response.data);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},getEntity:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$store.dispatch("app/getEntities",{entityName:"static-about-organizers"});case 4:n=t.sent,e.formData={stories:n.data},t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEntity();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},m=p,d=n("2877"),f=Object(d["a"])(m,a,r,!1,null,"b43ee526",null);t["default"]=f.exports},"4fa3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[n("x-table",{attrs:{entityName:"achievement",data:e.achievement,columns:e.columns,actions:["read"]},on:{delete:e.deleteItem}})],1)],1)],1)},r=[],i=n("1da1"),o=(n("d81d"),n("96cf"),n("5b55")),s=[{title:"ID",dataIndex:"id"},{title:"Название",dataIndex:"name",filterable:!0}],c={data:function(){return{columns:s,loading:!0}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAchievement();case 2:case"end":return t.stop()}}),t)})))()},computed:{achievement:function(){return this.$store.state.app[o["a"]].map((function(e){return e.achievement}))}},methods:{getAchievement:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:o["a"]});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:return t.prev=8,e.loading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,5,8,11]])})))()},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:o["a"],id:e});case 4:t.$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.show(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()}}},u=c,l=n("2877"),p=Object(l["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},5319:function(e,t,n){"use strict";var a=n("d784"),r=n("d039"),i=n("825a"),o=n("50c4"),s=n("a691"),c=n("1d80"),u=n("8aa5"),l=n("0cb2"),p=n("14c3"),m=n("b622"),d=m("replace"),f=Math.max,h=Math.min,v=function(e){return void 0===e?e:String(e)},g=function(){return"$0"==="a".replace(/./,"$0")}(),b=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),x=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var a=b?"$":"$0";return[function(e,n){var a=c(this),r=void 0==e?void 0:e[d];return void 0!==r?r.call(e,a,n):t.call(String(a),e,n)},function(e,r){if("string"===typeof r&&-1===r.indexOf(a)&&-1===r.indexOf("$<")){var c=n(t,this,e,r);if(c.done)return c.value}var m=i(this),d=String(e),g="function"===typeof r;g||(r=String(r));var b=m.global;if(b){var x=m.unicode;m.lastIndex=0}var _=[];while(1){var w=p(m,d);if(null===w)break;if(_.push(w),!b)break;var y=String(w[0]);""===y&&(m.lastIndex=u(d,o(m.lastIndex),x))}for(var k="",R=0,D=0;D<_.length;D++){w=_[D];for(var O=String(w[0]),j=f(h(s(w.index),d.length),0),$=[],C=1;C<w.length;C++)$.push(v(w[C]));var I=w.groups;if(g){var N=[O].concat($,j,d);void 0!==I&&N.push(I);var E=String(r.apply(void 0,N))}else E=l(O,d,j,$,I,r);j>=R&&(k+=d.slice(R,j)+E,R=j+O.length)}return k+d.slice(R)}]}),!x||!g||b)},6244:function(e,t,n){},6359:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{name:"formData",values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{attrs:{span:"24"}},[n("x-input",{attrs:{label:"Описание на главной",name:"text_main",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length",help:e.formData.text_main&&"Максимально "+e.textareaMaxLength+". "+(e.textareaMaxLength-e.formData.text_main.length<=0?0:e.textareaMaxLength-e.formData.text_main.length)+" символось осталось."}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0}}},[e.formData.nomination?n("FormulateInput",{attrs:{type:"group",name:"nomination",repeatable:"",label:"Номинации","add-label":"Добавить номинацию",validation:"required"},scopedSlots:e._u([{key:"remove",fn:function(t){var a=t.index,r=t.removeItem;return[n("span",{staticClass:"formulate-input-group-repeatable-remove",on:{click:function(t){return e.onRemoveItem(a,r)}}},[e._v("Удалить")])]}},{key:"default",fn:function(t){var a=t.index;return[n("x-input",{attrs:{label:"Номинация",name:"name",type:"text",validation:"required","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Описание",name:"description",type:"textarea",disabled:e.disabled,validation:"required|max:500,length"}}),n("file-component",{attrs:{acceptFormats:e.acceptFormats,hint_text:"Загрузите svg, png, jpeg файл","is-document":!!e.formData.nomination[a]&&!!e.formData.nomination[a].image_uri,"hidden-list":""},on:{change:function(t){return e.setFiles(t,a)}}}),e.formData.nomination[a]&&e.formData.nomination[a].image_uri?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},[n("span",{staticClass:"file-container__files--file",attrs:{target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(e.formData.nomination[a]&&e.formData.nomination[a].image_uri.image_uri))]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(t){return e.onRemoveFile(e.formData.nomination[a].image_uri.id,a)}}})],1)])]):e._e()]}}],null,!1,1299156069)}):e._e()],1),n("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" Сохранить ")])],1)])],1)],1)],1)},r=[],i=n("2909"),o=n("5530"),s=n("1da1"),c=(n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("a434"),n("96cf"),n("2dd8")),u=n("b48b"),l={props:["action","id"],components:{FileComponent:u["a"]},mixins:[c["a"]],data:function(){return{formData:{text_main:null,nomination:[]},textareaMaxLength:2048,entityName:"static-main-page",acceptFormats:["image/png","image/jpeg","image/svg+xml"]}},methods:{onRemoveItem:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t&&n.formData.nomination.length){a.next=3;break}return a.abrupt("return");case 3:if(r=n.formData.nomination[e],!r.id){a.next=7;break}return a.next=7,n.$store.dispatch("app/deleteItem",{entityName:"static-nomination",id:r.id,nothingStoreDelete:!0});case 7:t(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},onsubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.saveNominations();case 2:return n=t.sent,e.formData=Object(o["a"])(Object(o["a"])({},e.formData),{},{nomination:n}),a=new FormData,n.map((function(e){a.append("nomination",e.id)})),a.append("text_main",e.formData.text_main),t.prev=7,t.next=10,e.saveEntity(a,e.formData.id?"patch":"post",e.formData.id);case 10:r=t.sent,e.$toast.success("Успешно сохранено"),console.log(r),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](7),e.$errors.show(t.t0.response.data);case 18:case"end":return t.stop()}}),t,null,[[7,15]])})))()},saveNominations:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.formData.nomination.map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("app/saveEntity",{entityName:"static-nomination",id:n.id,method:n.id?"patch":"post",data:Object(o["a"])(Object(o["a"])({},n),{},{image_uri:n.image_uri.id})});case 2:return a=t.sent,t.abrupt("return",Object(o["a"])(Object(o["a"])({},a),{},{image_uri:n.image_uri}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getEntities:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/getEntities",{entityName:e});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},setFiles:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(i["a"])(n.formData.nomination),a.prev=1,a.next=4,n.uploadFile(e[0]);case 4:s=a.sent,console.log(s),r.splice(t,1,Object(o["a"])(Object(o["a"])({},r[t]),{},{image_uri:s})),c=Object(o["a"])(Object(o["a"])({},n.formData),{},{nomination:r}),n.$formulate.setValues("formData",c),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),n.$errors.show(a.t0.response.data);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))()},onRemoveFile:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(i["a"])(n.formData.nomination),a.prev=1,a.next=4,n.$store.dispatch("app/deleteItem",{entityName:"static-image",id:e,nothingStoreDelete:!0});case 4:r.splice(t,1,Object(o["a"])(Object(o["a"])({},r[t]),{},{image_uri:null})),n.formData=Object(o["a"])(Object(o["a"])({},n.formData),{},{nomination:r}),console.log(n.formData,"123"),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),n.$errors.show(a.t0.response.data);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},getEntity:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$store.dispatch("app/getItem",{entityName:"static-main-page",id:1});case 4:n=t.sent,e.formData=Object(o["a"])(Object(o["a"])({},e.formData),n.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEntity();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},p=l,m=n("2877"),d=Object(m["a"])(p,a,r,!1,null,"21627b32",null);t["default"]=d.exports},"7bae":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[e.loading?e._e():n("x-table",{attrs:{entityName:e.isActive("user")?"users":"expert",data:e.users,columns:e.isActive("user")?e.columns:e.expertColumns,actions:["read","edit","delete"]},on:{delete:e.deleteItem,generate:e.generate},scopedSlots:e._u([{key:"switched",fn:function(){return[n("div",{staticClass:"switches"},[n("a-button",{class:"add-button "+(e.isActive("user")?"active":"")+" ",on:{click:function(t){!e.isActive("user")&&e.getUsers()}}},[e._v(" Студенты ")]),n("a-button",{class:"add-button "+(e.isActive("expert")?"active":"")+" ",on:{click:function(t){!e.isActive("expert")&&e.getUsers("expert")}}},[e._v(" Эксперты ")])],1)]},proxy:!0}],null,!1,3801131991)})],1)],1)],1)},r=[],i=n("1da1"),o=(n("4de4"),n("d81d"),n("b0c0"),n("99af"),n("caad"),n("2532"),n("d3b7"),n("25f0"),n("498a"),n("a15b"),n("ac1f"),n("5319"),n("96cf"),n("5b55")),s="https://студентгода63.рф/media",c={data:function(){return{loading:!0,media:s,activeRole:"user",usersList:[]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getNominations();case 2:return t.next=4,e.getUsers(e.$route.query.role);case 4:case"end":return t.stop()}}),t)})))()},computed:{users:function(){return this.usersList.filter((function(e){return!!e.first_name}))},nominations:function(){return this.$store.state.app.nomination?this.$store.state.app.nomination.map((function(e){return{text:e.name,value:e.name}})):[]},expertColumns:function(){return[{title:"ID",dataIndex:"id"},{title:"ФИО",dataIndex:"initials",width:200,customRender:function(e,t,n){return"".concat(t.first_name," ").concat(t.last_name||""," ").concat(t.patronymic||"")},filterable:!0,onFilter:function(e,t){return"".concat(t.first_name," ").concat(t.last_name||""," ").concat(t.patronymic||"").toString().toLowerCase().includes(e.toLowerCase().trim())}},{title:"Подтвержден",dataIndex:"is_expert",customRender:function(e,t){return t.is_expert?"Да":"Нет"}}]},columns:function(){return[{title:"ID",dataIndex:"id"},{title:"ФИО",dataIndex:"initials",width:200,customRender:function(e,t,n){return"".concat(t.first_name," ").concat(t.last_name||""," ").concat(t.patronymic||"")},filterable:!0,onFilter:function(e,t){return"".concat(t.first_name," ").concat(t.last_name||""," ").concat(t.patronymic||"").toString().toLowerCase().includes(e.toLowerCase().trim())}},{title:"Место обучения",dataIndex:"name_place_education",width:300,sorter:function(e,t){return e.name_place_education.toLowerCase()<t.name_place_education.toLowerCase()}},{title:"Номинации",dataIndex:"nomination",customRender:function(e,t,n){return t.nomination.map((function(e){return e.name})).join(", ")},filters:this.nominations,onFilter:function(e,t){return t.nomination.some((function(t){return t.name===e}))}}]}},methods:{isActive:function(e){return this.activeRole===e},getUsers:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"user",t.loading=!0,n.prev=2,t.$router.replace(t.$route.path+"?role=".concat(a)).catch((function(){})),t.activeRole=a,n.next=7,t.$store.dispatch("app/getEntities",{entityName:"".concat(o["f"]),params:{role:a}});case 7:r=n.sent,t.usersList=r.data,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),console.log(n.t0);case 14:return n.prev=14,t.loading=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,11,14,17]])})))()},getNominations:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"nomination"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:return t.prev=8,e.loading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,5,8,11]])})))()},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:o["f"],id:e});case 4:t.$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()},generate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.key,n.prev=1,n.next=4,t.$store.dispatch("app/getEntities",{entityName:a});case 4:r=n.sent,i=document.createElement("a"),i.href="".concat(t.media,"/").concat(r.data),i.click(),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),console.log(n.t0),t.$errors.show(n.t0.response.data);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()}}},u=c,l=(n("e878"),n("2877")),p=Object(l["a"])(u,a,r,!1,null,"7cf75ca9",null);t["default"]=p.exports},"7d0c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{name:"formData",values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0}}},[e.formData.stories?n("FormulateInput",{attrs:{type:"group",name:"stories",repeatable:"",label:"Документы","add-label":"Добавить документ",validation:"required"},scopedSlots:e._u([{key:"remove",fn:function(t){var a=t.index,r=t.removeItem;return[n("span",{staticClass:"formulate-input-group-repeatable-remove",on:{click:function(t){return e.onRemoveItem(a,r)}}},[e._v("Удалить")])]}},{key:"default",fn:function(t){var a=t.index;return[n("x-input",{attrs:{label:"Название документа",name:"name",type:"text",validation:"required","error-behavior":"submit"}}),n("file-component",{attrs:{"max-size":30,acceptFormats:e.acceptFormats,hint_text:"Загрузите документ","is-document":!!e.formData.stories[a]&&!!e.formData.stories[a].image_uri,"hidden-list":""},on:{change:function(t){return e.setFiles(t,a)}}}),e.formData.stories[a]&&e.formData.stories[a].image_uri?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},[n("span",{staticClass:"file-container__files--file",attrs:{target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(e.formData.stories[a]&&e.formData.stories[a].image_uri.image_uri))]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(t){return e.onRemoveFile(e.formData.stories[a].image_uri.id,a)}}})],1)])]):e._e()]}}],null,!1,4186116069)}):e._e()],1),n("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" Сохранить ")])],1)])],1)],1)],1)},r=[],i=n("2909"),o=n("5530"),s=n("3835"),c=n("1da1"),u=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("4fad"),n("a434"),n("96cf"),n("2dd8")),l=n("b48b"),p={props:["action","id"],components:{FileComponent:l["a"]},mixins:[u["a"]],data:function(){return{formData:{stories:[]},textareaMaxLength:2048,entityName:"static-documents",acceptFormats:["image/png","image/heic","image/heif","image/jpeg","application/pdf","application/msword","application/vnd.ms-word","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.template.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"]}},methods:{onRemoveItem:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t&&n.formData.stories.length){a.next=3;break}return a.abrupt("return");case 3:if(r=n.formData.stories[e],!r.id){a.next=7;break}return a.next=7,n.$store.dispatch("app/deleteItem",{entityName:"static-documents",id:r.id,nothingStoreDelete:!0});case 7:t(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},onsubmit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.saveItems();case 3:n=t.sent,e.formData={stories:n},e.$toast.success("Успешно сохранено"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$errors.show(t.t0.response.data);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},saveItems:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.formData.stories.map(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,Object.entries(n).map((function(e){var t=Object(s["a"])(e,2),n=t[0],r=t[1];"image_uri"!==n?a.append(n,r):a.append(n,r.id)})),t.next=4,e.$store.dispatch("app/saveEntity",{entityName:"static-documents",id:n.id,method:n.id?"patch":"post",data:a});case 4:return r=t.sent,t.abrupt("return",Object(o["a"])(Object(o["a"])({},r),{},{image_uri:n.image_uri}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getEntities:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/getEntities",{entityName:e});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},setFiles:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(i["a"])(n.formData.stories),a.prev=1,a.next=4,n.uploadFile(e[0]);case 4:s=a.sent,r.splice(t,1,Object(o["a"])(Object(o["a"])({},r[t]),{},{image_uri:s})),c={stories:r},n.$formulate.setValues("formData",c),console.log(n.formData,"123"),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),n.$errors.show(a.t0.response.data);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))()},onRemoveFile:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(i["a"])(n.formData.stories),a.prev=1,a.next=4,n.$store.dispatch("app/deleteItem",{entityName:"static-image",id:e,nothingStoreDelete:!0});case 4:r.splice(t,1,Object(o["a"])(Object(o["a"])({},r[t]),{},{image_uri:null})),n.formData={stories:r},console.log(n.formData,"123"),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),n.$errors.show(a.t0.response.data);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},getEntity:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$store.dispatch("app/getEntities",{entityName:"static-documents"});case 4:n=t.sent,e.formData={stories:n.data},t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEntity();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},m=p,d=n("2877"),f=Object(d["a"])(m,a,r,!1,null,"a8c91e30",null);t["default"]=f.exports},"7e4a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},["create"===e.action?n("FormulateInput",{attrs:{label:"Тип показателя",type:"radio",name:"indicatorType",options:e.indicatorTypes,disabled:e.disabled},model:{value:e.indicatorCurrentType,callback:function(t){e.indicatorCurrentType=t},expression:"indicatorCurrentType"}}):e._e(),"default"===e.indicatorCurrentType?n("x-form",{attrs:{name:"defaultForm",values:e.defaultForm},on:{submit:function(t){return e.onsubmit("defaultForm")}},model:{value:e.defaultForm,callback:function(t){e.defaultForm=t},expression:"defaultForm"}},[n("default-form",{attrs:{checkboxes:e.checkboxes,disabled:e.disabled,formData:e.defaultForm,getButtonAction:e.getButtonAction}})],1):e._e(),"spec"===e.indicatorCurrentType?n("x-form",{attrs:{name:"specForm",values:e.specForm},on:{submit:function(t){return e.onsubmit("specForm")}},model:{value:e.specForm,callback:function(t){e.specForm=t},expression:"specForm"}},[n("spec-form",{attrs:{getButtonAction:e.getButtonAction,disabled:e.disabled,formData:e.specForm}})],1):e._e(),"specOrg"===e.indicatorCurrentType?n("x-form",{attrs:{name:"specOrgForm",values:e.specOrgForm},on:{submit:function(t){return e.onsubmit("specOrgForm")}},model:{value:e.specOrgForm,callback:function(t){e.specOrgForm=t},expression:"specOrgForm"}},[n("spec-org-form",{attrs:{getButtonAction:e.getButtonAction,disabled:e.disabled,formData:e.specOrgForm}})],1):e._e()],1)},r=[],i=n("5530"),o=n("1da1"),s=(n("d81d"),n("caad"),n("2532"),n("96cf"),n("2dd8")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Название",name:"name",type:"text",validation:"required",disabled:e.disabled}}),n("x-input",{attrs:{label:"Номинация",name:"nomination",options:e.$store.getters["app/optionNomination"],type:"select",validation:"required",disabled:e.disabled}}),n("x-input",{attrs:{label:"Элементы заполнения",type:"checkbox",name:"checkboxes",options:e.checkboxes,"error-behavior":"submit",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{type:"number",name:"max_count_achievement",label:"Максимальное количество достижений",validation:"required|number|min:0|max:50",min:"1",max:"200",disabled:e.disabled}}),n("x-input",{attrs:{type:"number",name:"count_score_per_achievement",label:"Балл за достижение",validation:"required|number|min:0|max:50",min:"0",max:"200",step:"0.5",disabled:e.disabled}}),n("x-input",{attrs:{label:"Период",name:"period",options:e.$store.getters["app/optionPeriod"],type:"select",validation:"required",disabled:e.disabled}})],1),e.formData.checkboxes&&e.formData.checkboxes.includes("hint")?n("a-col",{attrs:{span:"24"}},[n("x-input",{attrs:{label:"Подсказка",name:"hint_text",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length",help:e.formData.hint_text&&"Максимально "+e.textareaMaxLength+". "+(e.textareaMaxLength-e.formData.hint_text.length<=0?0:e.textareaMaxLength-e.formData.hint_text.length)+" символось осталось."}})],1):e._e(),n("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" "+e._s(e.getButtonAction)+" ")])],1)])],1)},u=[],l={props:["formData","disabled","checkboxes","getButtonAction"],data:function(){return{textareaMaxLength:1024}}},p=l,m=n("2877"),d=Object(m["a"])(p,c,u,!1,null,"572990b0",null),f=d.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{type:"text",name:"name",label:"Название показателя",validation:"required",disabled:e.disabled}}),n("x-input",{attrs:{type:"number",name:"count_score_part_1_spec",label:"Балл за описание",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:e.disabled}}),n("x-input",{attrs:{type:"number",name:"count_score_part_2_spec",label:"Балл за участников",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:e.disabled}}),n("x-input",{attrs:{type:"number",name:"minimum_number_participants_spec",label:"Мин. кол-во участников",validation:"required|number|min:0|max:999",help:"Минимальное количество занесённых участников для получения баллов",min:"1",max:"999",disabled:e.disabled}}),n("x-input",{attrs:{type:"number",name:"count_score_part_characteristic_spec",label:"Балл за характеристику",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{type:"number",name:"count_score_part_3_spec",label:"Балл за кол-во участников",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:e.disabled}}),n("x-input",{attrs:{type:"number",name:"count_score_part_4_spec",label:"Балл за документы",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:e.disabled}}),n("x-input",{attrs:{label:"Номинация",name:"nomination",options:e.$store.getters["app/optionNomination"],type:"select",validation:"required",disabled:e.disabled}}),n("x-input",{attrs:{label:"Подсказка",name:"hint_text",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length",help:e.formData.hint_text&&"Максимально "+e.textareaMaxLength+". "+(e.textareaMaxLength-e.formData.hint_text.length<=0?0:e.textareaMaxLength-e.formData.hint_text.length)+" символось осталось."}})],1),n("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" "+e._s(e.getButtonAction)+" ")])],1)])],1)},v=[],g={props:["formData","disabled","checkboxes","getButtonAction"],data:function(){return{textareaMaxLength:1024}}},b=g,x=Object(m["a"])(b,h,v,!1,null,"ff49fa88",null),_=x.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{type:"text",name:"name",label:"Название показателя",validation:"required",disabled:e.disabled}}),n("x-input",{attrs:{label:"Номинация",name:"nomination",options:e.$store.getters["app/optionNomination"],type:"select",validation:"required",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{type:"number",name:"count_score_spec_2",label:"Кол-во баллов",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:e.disabled}}),n("x-input",{attrs:{label:"Подсказка",name:"hint_text",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length",help:e.formData.hint_text&&"Максимально "+e.textareaMaxLength+". "+(e.textareaMaxLength-e.formData.hint_text.length<=0?0:e.textareaMaxLength-e.formData.hint_text.length)+" символось осталось."}})],1),n("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" "+e._s(e.getButtonAction)+" ")])],1)])],1)},y=[],k={props:["formData","disabled","checkboxes","getButtonAction"],data:function(){return{textareaMaxLength:1024}}},R=k,D=Object(m["a"])(R,w,y,!1,null,"0b33ce4e",null),O=D.exports,j=n("cd3f"),$=n.n(j),C={props:["action","id"],components:{DefaultForm:f,SpecForm:_,SpecOrgForm:O},mixins:[s["a"]],data:function(){return{defaultForm:{checkboxes:[]},specForm:{},specOrgForm:{},indicator:null,entityName:"indicator",checkboxes:[{value:"degree_participation",label:"Степень участия"},{value:"document",label:"Документ"},{value:"url",label:"Ссылка на видео"},{value:"hint",label:"Подсказка"}],indicatorCurrentType:"default",indicatorTypes:{default:"Показатель",spec:"Спец.показатель",specOrg:"Спец.показатель руководителя орг."}}},methods:{onsubmit:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("read"!==t.action){n.next=3;break}return t.$router.push("/indicator/edit/".concat(t.id)),n.abrupt("return");case 3:return a=$()(t[e]),"defaultForm"===e&&(a=t.saveDefault(a)),"specForm"===e&&(a=t.saveSpec(a)),"specOrgForm"===e&&(a=t.saveSpecOrg(a)),n.prev=7,n.next=10,t.saveEntity(a);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](7),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[7,12]])})))()},saveDefault:function(e){var t=Object(i["a"])({},e);return this.checkboxes.map((function(e){t[e.value]=t.checkboxes.includes(e.value)})),t.checkboxes.includes("hint")||(t.hint_text=null),t},saveSpec:function(e){return Object(i["a"])(Object(i["a"])({},e),{},{special_indicator:!0,max_count_achievement:1})},saveSpecOrg:function(e){return Object(i["a"])(Object(i["a"])({},e),{},{indicator_head_organization:!0,max_count_achievement:1})},getEntities:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/getEntities",{entityName:e});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},renderCheckboxes:function(){var e=this;this.defaultForm.period="".concat(this.defaultForm.period.id),this.defaultForm.hint_text&&this.defaultForm.checkboxes.push("hint");var t=function(t){e.checkboxes.some((function(n){return n.value===t&&e.defaultForm[t]}))&&e.defaultForm.checkboxes.push(t)};for(var n in this.defaultForm)t(n)},checkTypeIndicator:function(e){return e.special_indicator?(this.indicatorCurrentType="spec",this.specForm=e,void(this.specForm.nomination="".concat(this.specForm.nomination.id))):e.indicator_head_organization?(this.indicatorCurrentType="specOrg",this.specOrgForm=e,void(this.specOrgForm.nomination="".concat(this.specOrgForm.nomination.id))):(this.indicatorCurrentType="default",this.defaultForm=Object(i["a"])(Object(i["a"])({},this.defaultForm),e),this.defaultForm.nomination="".concat(this.defaultForm.nomination.id),void this.renderCheckboxes())}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEntities("nomination");case 2:return t.next=4,e.getEntities("period");case 4:if("create"===e.action){t.next=9;break}return t.next=7,e.getEntity(!0);case 7:n=t.sent,e.checkTypeIndicator(n);case 9:e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()}},I=C,N=Object(m["a"])(I,a,r,!1,null,"de3288f8",null);t["default"]=N.exports},"826e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["read"!==e.action||e.loading?e.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):e._e():n("users-table",{attrs:{n:e.formData.nomination_to_number_winner,id_contest:e.id}}),"read"!==e.action?n("a-row",[n("a-col",{attrs:{sm:{span:24,offset:0}}},[n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{name:"contestForm",values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Название",name:"name",type:"text",validation:"required","error-behavior":"submit",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Период",name:"period",options:e.$store.getters["app/optionPeriod"],type:"select",validation:"required",disabled:e.disabled,"error-behavior":"submit"}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0}}},[n("FormulateInput",{attrs:{type:"group",name:"nomination_to_number_winner",repeatable:"read"!==e.action,label:"Номинации","add-label":"Добавить номинацию",validation:"required"}},[n("x-input",{attrs:{label:"Номинация",name:"nomination",options:e.$store.getters["app/optionNomination"],type:"select",validation:"required",disabled:e.disabled,"error-behavior":"submit"}}),n("x-input",{attrs:{type:"number",name:"number_winners",label:"Количество мест",validation:"required|number|min:0|max:100","error-behavior":"submit",min:"0",max:"100",disabled:e.disabled,help:"Введите количество мест для прохождения в очный этап"}})],1)],1),n("a-col",{staticClass:"col-form",attrs:{xs:{span:24,offset:0},xl:{span:8,offset:8}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" "+e._s(e.getButtonAction)+" ")])],1)])],1)],1)],1)],1)],1):e._e()],1)},r=[],i=n("1da1"),o=n("5530"),s=(n("96cf"),n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("2dd8")),c=n("cd3f"),u=n.n(c),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[n("x-table",{attrs:{loading:e.loading,entityName:"check",isGenerate:"",data:e.applications||[],columns:e.columns,actions:["edit"],toWinner:e.activeContest},on:{generate:e.generate,onPublish:e.onPublish,delete:e.deleteItem},scopedSlots:e._u([{key:"switched",fn:function(){return[n("div",{staticClass:"checkout-title table-contest-switch"},[n("h6",[n("span",{staticStyle:{display:"flex",gap:"0.3rem"}},[e._v(" Количество победителей: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.activeContest,expression:"activeContest"}],staticClass:"custom-number",attrs:{type:"number",max:"50",min:"0"},domProps:{value:e.activeContest},on:{input:[function(t){t.target.composing||(e.activeContest=t.target.value)},function(t){return e.debounceInput(e.setNominationToNumberWinner)}]}})])]),n("h6",[e._v("Осталось проверить: "+e._s(e.countLeft))]),n("h6",[e._v("Проверено: "+e._s(e.countChecked))]),n("h6",[e._v("Заявок в номинации: "+e._s(e.applications.length))]),n("h6",[e._v("Ожидает проверки: "+e._s(e.countAwaiting))]),n("h6",[e._v("В работе: "+e._s(e.countInWork))])]),n("div",{staticClass:"nominations"},[e.loading?e._e():n("component-tabs",{attrs:{tabs:e.renderedNominations,activeTab:e.activeNomination},on:{setActiveNomination:e.getApplications}})],1)]},proxy:!0}])})],1)],1)],1)},p=[],m=(n("99af"),n("caad"),n("2532"),n("25f0"),n("a9e3"),n("7db0"),n("4de4"),n("ac1f"),n("5319"),n("a434"),n("c740"),n("46f9")),d=n("f7fe"),f=n.n(d),h="https://студентгода63.рф/media",v=[{title:"ID",dataIndex:"id"},{title:"ФИО",dataIndex:"initials",width:200,customRender:function(e,t,n){return t.user?"".concat(t.user.first_name||""," ").concat(t.user.last_name||""," ").concat(t.user.patronymic||""):"Нет пользователя"},filterable:!0,onFilter:function(e,t){return!!t.user&&"".concat(t.user.first_name," ").concat(t.user.last_name||""," ").concat(t.user.patronymic||"").toString().toLowerCase().includes(e.toLowerCase())}},{title:"ССУЗ/ВУЗ",dataIndex:"user.name_place_education",customRender:function(e,t){return t.user?t.user.name_place_education:"Нет пользователя"}},{title:"Кол-во достижений",dataIndex:"achievements",sorter:function(e,t){return e.achievements.length-t.achievements.length},customRender:function(e,t){return t.achievements.length}},{title:"Предварительный балл",dataIndex:"preliminary_score",sorter:function(e,t){return e.preliminary_score-t.preliminary_score}},{title:"Подтвержденный балл",dataIndex:"score",sorter:function(e,t){return e.score-t.score},customRender:function(e,t){return t.score||"Нет баллов"}},{title:"Статус",dataIndex:"status_application",customRender:function(e,t){return"in_work"===t.status_application?"В работе":"awaiting_verification"===t.status_application?"Ожидает проверки":"verified"===t.status_application?"Проверено":"Нет статуса"},filters:[{value:"in_work",text:"В работе"},{value:"awaiting_verification",text:"Ожидает проверки"},{value:"verified",text:"Проверено"}],onFilter:function(e,t){return t.status_application.includes(e)}},{title:"Статус в конкурсе",dataIndex:"victory_status",customRender:function(e,t){return"participant"===t.victory_status?"Участник":"full_time_stage"===t.victory_status?"Очный этап":"Нет статуса"},filters:[{value:"participant",text:"Участник"},{value:"full_time_stage",text:"Очный этап"}],onFilter:function(e,t){return t.victory_status.includes(e)}}],g={props:{n:{type:Array,required:!1},id_contest:{type:String|Number,required:!0}},components:{ComponentTabs:m["a"]},data:function(){return{columns:v,media:h,loading:!0,applications:[],activeNomination:null,activeContest:null}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.contestNominations=u()(e.n),t.next=4,e.getNomination();case 4:return t.next=6,e.getApplications(e.$route.query.nomination?e.$route.query.nomination:"admin"===e.userInfo.role?e.nomination[0].id:e.userInfo.expert_nominations[0]);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},computed:{activeNominationContest:function(){var e=this;return this.contestNominations.find((function(t){return t.nomination===e.activeNomination}))},userInfo:function(){return this.$store.state.user.userInfo},nomination:function(){return this.$store.state.app.nomination},renderedNominations:function(){var e=this;return this.nomination.filter((function(t){return e.contestNominations.some((function(e){return e.nomination===t.id}))}))},countAwaiting:function(){return this.applications.reduce((function(e,t){return"awaiting_verification"===t.status_application?e+1:e}),0)},countChecked:function(){return this.applications.reduce((function(e,t){return"verified"===t.status_application||"rejected"===t.status_application?e+1:e}),0)},countLeft:function(){var e=this.activeContest-this.countChecked;return e<=0?0:e},countInWork:function(){return this.applications.reduce((function(e,t){return"in_work"===t.status_application?e+1:e}),0)},allChecked:function(){return this.countChecked===this.applications.length}},methods:{generate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.key,n.prev=1,n.next=4,t.$store.dispatch("app/saveEntity",{entityName:a,method:"post",data:{id_contest:t.id_contest}});case 4:r=n.sent,i=document.createElement("a"),i.href="".concat(t.media,"/").concat(r),i.click(),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),console.log(n.t0),t.$errors.show(n.t0.response.data);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},onPublish:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/saveEntity",{method:"post",entityName:"set-status-user-contest",data:{id_contest:e.id_contest}});case 3:e.$toast.success("Результаты опубликованы"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getNomination:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"nomination"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},getApplications:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.loading=!0,a.prev=1,a.next=4,n.$store.dispatch("app/getEntities",{entityName:"applications",params:{nomination:e}});case 4:r=a.sent,n.applications=n.getLastVerifyApplicationAndSetCheckStatuses(r.data),n.activeNomination=Number(e),n.$router.replace(n.$route.path+"?nomination=".concat(e)).catch((function(){})),n.activeContest=t||n.activeNominationContest.number_winners,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),console.log(a.t0);case 14:return a.prev=14,n.loading=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[1,11,14,17]])})))()},getLastVerifyApplicationAndSetCheckStatuses:function(e){var t=e.filter((function(e){return"verified"===e.status_application||"rejected"===e.status_application})).pop();return t?e.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{needRecheck:("in_work"===e.status_application||"awaiting_verification"===e.status_application)&&e.preliminary_score>=t.score})})):e},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:"applications",id:e});case 4:t.$$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()},onMiscalculation:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$store.dispatch("app/saveEntity",{method:"post",entityName:"miscalculation-applications",data:{id_nomination:e.activeNomination}});case 4:return t.next=6,e.getApplications(e.activeNomination,e.activeContest);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0),e.$errors.showOnce(t.t0.response.data);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,8,12,15]])})))()},setNominationToNumberWinner:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,console.log(e.activeContest),t.next=5,e.$store.dispatch("app/saveEntity",{method:"patch",id:e.activeNominationContest.id,entityName:"nomination-to-number-winner",data:{number_winners:e.activeContest}});case 5:return n=t.sent,e.contestNominations.splice(e.contestNominations.findIndex((function(e){return e.id===n.id})),1,n),console.log(e.contestNominations),t.next=10,e.onMiscalculation();case 10:t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](1),console.log(t.t0),e.$errors.showOnce(t.t0.response.data);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))()},debounceInput:f()((function(e){e()}),500)}},b=g,x=n("2877"),_=Object(x["a"])(b,l,p,!1,null,null,null),w=_.exports,y={props:["action","id"],mixins:[s["a"]],components:{usersTable:w},data:function(){return{check:null,formData:{nomination:[]},users:null,entityName:"contest",textareaMaxLength:255,loading:!0,currentNominationState:[]}},watch:{check:function(e){e?(this.currentNominationState=u()(this.formData.nomination),this.formData=Object(o["a"])(Object(o["a"])({},this.formData),{},{nomination:u()(this.getNominationAllId)}),this.$formulate.setValues("contestForm",this.formData)):(this.formData=Object(o["a"])(Object(o["a"])({},this.formData),{},{nomination:u()(this.currentNominationState)}),this.$formulate.setValues("contestForm",this.formData),this.currentNominationState=null),this.$forceUpdate()}},methods:{onsubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("read"!==e.action){t.next=3;break}return e.$router.push("/contest/edit/".concat(e.id)),t.abrupt("return");case 3:return n=u()(e.formData),t.next=6,e.createNominations(n.nomination_to_number_winner);case 6:return n.nomination_to_number_winner=t.sent,n.nomination_to_number_winner=n.nomination_to_number_winner.map((function(e){return e.id})),t.next=10,e.saveEntity(n);case 10:case"end":return t.stop()}}),t)})))()},getEntities:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/getEntities",{entityName:e});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},createNominations:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all(e.map(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("app/saveEntity",{entityName:"nomination-to-number-winner",data:n,id:null===n||void 0===n?void 0:n.id,method:null!==n&&void 0!==n&&n.id?"patch":"post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return n.abrupt("return",n.sent);case 6:n.prev=6,n.t0=n["catch"](0),console.log(n.t0),t.$errors.show(n.t0.response.data);case 10:case"end":return n.stop()}}),n,null,[[0,6]])})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEntities("nomination");case 2:return t.next=4,e.getEntities("period");case 4:if("create"===e.action){t.next=8;break}return t.next=7,e.getEntity();case 7:e.formData.period=e.formData.period.id;case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},computed:{getNominationAllId:function(){return this.$store.state.app.nomination.map((function(e){return"".concat(e.id)}))}}},k=y,R=Object(x["a"])(k,a,r,!1,null,null,null);t["default"]=R.exports},"87d6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.currentApplication?n("h2",{staticClass:"page-title checkout-title"},[n("h6",[e._v(e._s(e.currentApplication.nomination.name))]),n("a-button",{staticStyle:{"margin-bottom":"2rem"},attrs:{"html-type":"submit",type:"primary"},on:{click:function(t){return e.generateExcel(e.currentApplication.id)}}},[e._v(" Выгрузить данные в excel ")])],1):e._e(),e.userInfo.id?n("user-head",{attrs:{userInfo:e.userInfo}},[e.currentApplication?n("h2",{staticClass:"page-title checkout-title"},[n("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap",gap:"1rem"}},[n("h6",[e._v(e._s(e.getStatus))]),n("h6",[e._v(" "+e._s(e.currentApplication.achievements.length||0)+" "+e._s(e.getWord(["Достижение","Достижения","Достижений"],e.currentApplication.achievements.length))+" ")]),n("h6",[e._v(" В работе: "+e._s(e.countInWork||0)+" ")]),n("h6",[e._v("Осталось проверить: "+e._s(e.countAwaiting))]),n("h6",[e._v("Проверено: "+e._s(e.countChecked))]),n("h6",[e._v(" "+e._s(e.currentApplication.preliminary_score||0)+" "+e._s(e.getWord(["Предварительный балл","Предварительных балла","Предварительных баллов"],e.currentApplication.preliminary_score))+" ")]),n("h6",[e._v(" "+e._s(e.currentApplication.score||0)+" "+e._s(e.getWord(["Подтвержденный балл","Подтвержденных балла","Подтвержденных баллов"],e.currentApplication.score))+" ")])])]):e._e()]):n("a-skeleton",{attrs:{active:"",paragraph:{rows:9}}})],1)},r=[],i=n("92f8"),o=n("1da1"),s=(n("96cf"),n("99af"),"https://студентгода63.рф/media"),c={data:function(){return{media:s}},computed:{countAwaiting:function(){return this.currentApplication.achievements.reduce((function(e,t){return"awaiting_verification"===t.stage_status?e+1:e}),0)},countChecked:function(){return this.currentApplication.achievements.reduce((function(e,t){return"accepted"===t.stage_status||"rejected"===t.stage_status?e+1:e}),0)},countInWork:function(){return this.currentApplication.achievements.reduce((function(e,t){return"in_work"===t.stage_status?e+1:e}),0)},allChecked:function(){return this.countChecked===this.currentApplication.achievements.length},getStatus:function(){return"in_work"===this.currentApplication.status_application?"В работе":"awaiting_verification"===this.currentApplication.status_application?"Ожидает проверки":"verified"===this.currentApplication.status_application?"Проверено":"Нет статуса"}},methods:{generateExcel:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/saveEntity",{entityName:"user-all-data",method:"post",data:{application_id:e}});case 3:a=n.sent,r=document.createElement("a"),r.href="".concat(t.media,"/").concat(a),r.click(),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),console.log(n.t0),t.$errors.show(n.t0.response.data);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},getWord:function(e,t){var n=Math.abs(t)%100,a=n%10;return n>10&&n<20?e[2]:a>1&&a<5?e[1]:1==a?e[0]:e[2]}}},u={props:{currentApplication:{type:Object,required:!1},userInfo:{type:Object,required:!0}},mixins:[c],components:{UserHead:i["a"]}},l=u,p=n("2877"),m=Object(p["a"])(l,a,r,!1,null,"8046f2d6",null);t["a"]=m.exports},"8a99":function(e,t,n){"use strict";n("94a5")},"94a5":function(e,t,n){},"960c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",[n("div",{staticClass:"container"},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("checkout-header",{attrs:{userInfo:e.userInfo,currentApplication:e.currentApplication}}),n("component-tabs",{attrs:{activeTab:e.activeTab,tabs:e.routerTabs},on:{setActiveNomination:function(t){return e.$router.push("/"+(e.checkout?"check":"users")+"/"+t)}}}),e.loading||e.checkout?e._e():n("component-tabs",{attrs:{tabs:e.userInfo.nomination,activeTab:e.activeNomination},on:{setActiveNomination:e.changeNomination}})],1),e.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",{staticClass:"container-body"},e._l(e.indicators,(function(t){return n("div",{key:t.id},[t.special_indicator||t.indicator_head_organization?e._e():n("Upload",{attrs:{onlyRead:e.onlyRead,indicator:t,saveAchievement:e.saveAchievement,getCurrentApplication:e.getCurrentApplication,participationDegree:e.participationDegree,achievements:t.achievements,isAdmin:""},on:{remove:e.removeAchievement}}),t.special_indicator?n("UploadSpec",{attrs:{participationDegree:e.participationDegree,achievements:t.achievements,indicator:t,saveAchievement:e.saveAchievement,getCurrentApplication:e.getCurrentApplication,onlyRead:e.onlyRead},on:{remove:e.removeAchievement}}):e._e(),t.indicator_head_organization?n("UploadSpecOrg",{attrs:{achievements:t.achievements,indicator:t,saveAchievement:e.saveAchievement,getCurrentApplication:e.getCurrentApplication,onlyRead:e.onlyRead},on:{remove:e.removeAchievement}}):e._e()],1)})),0)],1)],1)],1)])},r=[],i=n("1da1"),o=n("ade3"),s=(n("4de4"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("ac1f"),n("1276"),n("c740"),n("498a"),n("99af"),n("96cf"),n("2d21")),c=n("fb88"),u=n("5306"),l=n("46f9"),p=n("cd3f"),m=n.n(p),d=n("09bc"),f=n("5b55"),h="https://студентгода63.рф/media",v={components:{Upload:s["a"],ComponentTabs:l["a"],UploadSpec:c["a"],UploadSpecOrg:u["a"]},props:["id","check"],data:function(){var e;return e={entityName:"users",loading:!0,participationDegree:d["k"],buttonDisabled:!1},Object(o["a"])(e,"loading",!1),Object(o["a"])(e,"indicators",[]),Object(o["a"])(e,"media",h),Object(o["a"])(e,"onlyRead",!1),Object(o["a"])(e,"activeNomination",null),Object(o["a"])(e,"currentApplication",null),Object(o["a"])(e,"activeTab","edit/".concat(this.id,"/achievements")),Object(o["a"])(e,"userInfo",{}),Object(o["a"])(e,"routerTabs",[{name:"Основные сведения",id:"read/".concat(this.id)},{name:"Анкета участника",id:"edit/".concat(this.id,"/questionnaire")},{name:"Прикрепленные документы",id:"edit/".concat(this.id,"/achievements")}]),e},computed:{checkout:function(){return this.$route.meta.check},initialIndicators:function(){return this.$store.state.app.indicator},getMessage:function(){switch("create"){case"create":return"Успешно создано";case"edit":return"Успешно сохранено"}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,!e.checkout){t.next=8;break}return t.next=4,e.getCurrentApplication();case 4:return t.next=6,e.changeNomination(e.currentApplication.nomination.id);case 6:t.next=12;break;case 8:return t.next=10,e.getUser();case 10:return t.next=12,e.changeNomination(e.userInfo.nomination[0].id);case 12:case"end":return t.stop()}}),t)})))()},methods:{getCurrentApplication:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"applications/".concat(e.id)});case 3:n=t.sent,e.currentApplication=n.data,e.userInfo=e.currentApplication.user,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getUser:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"users/".concat(e.id)});case 3:n=t.sent,e.userInfo=n.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},changeNomination:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.activeNomination=e,n.next=3,t.getIndicatorsByNomination(t.activeNomination);case 3:return n.next=5,t.achievementsToIndicators(t.initialIndicators);case 5:t.indicators=n.sent,t.indicators=t.indicators.filter((function(e){return e.achievements.length})),t.loading=!1;case 8:case"end":return n.stop()}}),n)})))()},getIndicatorsByNomination:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.abrupt("return",t.$store.dispatch("app/getEntities",{entityName:f["b"],params:{nomination:e}}));case 4:n.prev=4,n.t0=n["catch"](0),console.log(n.t0);case 7:case"end":return n.stop()}}),n,null,[[0,4]])})))()},achievementsToIndicators:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(e.map((function(e){return new Promise(function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(a){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("app/getEntities",{entityName:f["a"],params:{indicator:e.id,user:t.checkout?t.userInfo.id:t.id}});case 2:r=n.sent,e.achievements=r.data.map((function(e){return e.achievement.documents&&(e.achievement.documents=t.renderDocuments(e.achievement.documents)),e.achievement})),a(e);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},renderDocuments:function(e){var t=this;return e.map((function(e){return e.documentName=t.addDocumentName(e.document),e}))},getFormData:function(e,t){var n=new FormData;for(var a in"spec"===t&&(e.full_name.map((function(e,t){n.append("full_name[".concat(t,"][0]"),e[0]),n.append("full_name[".concat(t,"][1]"),e[1])})),delete e.full_name),e)"documents"===a?e[a].map((function(e){n.append("documents",e)})):n.append(a,e[a]);return n},saveAchievement:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r=n.getFormData(m()(e),t),a.next=4,n.saveEntity(r,t);case 4:a.next=9;break;case 6:throw a.prev=6,a.t0=a["catch"](0),a.t0;case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},saveEntity:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n.buttonDisabled=!0,a.next=4,n.$store.dispatch("app/saveEntity",{data:e,method:"post",entityName:f["a"]});case 4:r=a.sent,n.addNewFields(r),n.$toast.success(n.getMessage),a.next=13;break;case 9:throw a.prev=9,a.t0=a["catch"](0),n.$formulate.handle(a.t0.response.data,t),a.t0;case 13:return a.prev=13,n.buttonDisabled=!1,a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[0,9,13,16]])})))()},addDocumentName:function(e){if(e){var t=e.split("/");return t[t.length-1]}},addNewFields:function(e){e.documents&&(e.documents=this.renderDocuments(e.documents));var t=this.indicators.findIndex((function(t){return e.indicators===t.id})),n=this.indicators[t];n.achievements.push(e)},removeAchievement:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:f["a"],id:e});case 4:return n.next=6,t.changeNomination(t.activeNomination);case 6:t.$swal("Успешно удалено!"),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 13:return n.prev=13,t.loading=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})))()},editAchievement:function(){},trimWhitespaces:function(e){for(var t in e)e[t]===String&&e[t].trim()},onApplicate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Отправить завку на конкурс?",text:"После подтверждения действия Вы не сможете редактировать введенные данные",showCancelButton:!0,confirmButtonText:"Отправить",cancelButtonText:"Отмена"});case 2:n=t.sent,n.isConfirmed;case 4:case"end":return t.stop()}}),t)})))()},generateExcel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/saveEntity",{entityName:"user-all-data",method:"post",data:{application_id:e}});case 3:a=n.sent,r=document.createElement("a"),r.href="".concat(t.media,"/").concat(a),r.click(),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),console.log(n.t0),t.$errors.show(n.t0.response.data);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()}}},g=n("87d6"),b={mixins:[v],components:{CheckoutHeader:g["a"]},data:function(){return{activeTab:"read/".concat(this.id,"/achievements"),routerTabs:[{name:"Основные сведения",id:"read/".concat(this.id)},{name:"Анкета участника",id:"read/".concat(this.id,"/questionnaire")},{name:"Прикрепленные документы",id:"read/".concat(this.id,"/achievements")}]}}},x=b,_=n("2877"),w=Object(_["a"])(x,a,r,!1,null,null,null);t["default"]=w.exports},"9e62":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("div",{staticClass:"container profile-info"},[e.userInfo?n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticStyle:{"margin-bottom":"20px"}},[n("checkout-header",{attrs:{userInfo:e.userInfo,currentApplication:e.currentApplication}}),n("component-tabs",{attrs:{activeTab:e.activeTab,tabs:e.routerTabs},on:{setActiveNomination:function(t){return e.$router.push("/"+(e.checkout?"check":"users")+"/"+t)}}})],1),n("profile-steps",{attrs:{"no-hint":"",synonym:e.userInfo.status_application}}),e.userInfo.certificates&&e.userInfo.certificates.length?n("div",{staticClass:"profile-nomination",staticStyle:{"margin-top":"1rem"}},[n("h3",{staticStyle:{flex:"0.66"}},[e._v("Документы участника")]),n("span",{staticClass:"rows"},e._l(e.userInfo.certificates,(function(t){return n("a",{key:t.id,attrs:{href:e.media+"/"+t.certificate,target:"_blank"}},[e._v(" Сертификат участия в "+e._s(t.nomination.name)+" "),n("svg",{staticStyle:{width:"10px",height:"10px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#3e1f63",viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"}})])])})),0)]):e._e(),n("passport-form",{attrs:{"is-admin":"","user-info":e.userInfo}}),e.checkout?e._e():n("div",{staticClass:"profile-nomination",staticStyle:{"margin-top":"1rem"}},[n("h3",[e._v("Статус пользователя")]),n("span",[n("FormulateInput",{staticClass:"status-application",attrs:{type:"select",name:"status_application",options:e.getOptionsByStatus},on:{change:e.onChangeStatus},model:{value:e.userInfo.status_application,callback:function(t){e.$set(e.userInfo,"status_application",t)},expression:"userInfo.status_application"}})],1)]),e.checkout?e._e():n("div",{staticClass:"profile-nomination"},[n("h3",[e._v("Подтверждение почты")]),n("span",[n("a-button",{staticClass:"login-form-button confirm-email-button",attrs:{type:"primary",block:"",disabled:e.userInfo.email_confirmed},on:{click:e.emailConfirm}},[e._v(" "+e._s(e.userInfo.email_confirmed?"Подтверждена":"Подтвердить вручную")+" ")])],1)]),n("profile-nomination",{attrs:{nominations:e.userInfo.nomination}}),e._l(e.infos,(function(t,a){return n("profile-infoblock",{key:a,attrs:{userInfo:e.userInfo,data:t.info,title:t.title}})}))],2)],1):e._e()],1),e.checkout?e._e():n("div",{staticClass:"crud-form-button inline-buttons",staticStyle:{width:"max-content",margin:"auto"}},[n("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:e.onDeleteApplications}},[e._v(" Удалить заявки пользователя ")]),n("router-link",{attrs:{to:"/users/edit/"+e.id}},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" Редактировать ")])],1)],1)])},r=[],i=n("1da1"),o=(n("a15b"),n("ac1f"),n("1276"),n("7db0"),n("c1f9"),n("4de4"),n("4fad"),n("498a"),n("99af"),n("96cf"),n("2dd8")),s=n("f729"),c=n("bfd1"),u=n("1359"),l=n("f60b"),p=n("e4a0"),m=n("09bc"),d=n("46f9"),f=n("87d6"),h=n("cbc7"),v="https://студентгода63.рф/media",g={props:["action","id"],mixins:[o["a"],s["a"],c["a"]],components:{ProfileNomination:u["a"],ProfileInfoblock:l["a"],ProfileSteps:p["a"],ComponentTabs:d["a"],CheckoutHeader:f["a"],PassportForm:h["a"]},data:function(){return{educationPlace:m["g"],formData:{},users:null,entityName:"users",textareaMaxLength:255,media:v,activeTab:"read/".concat(this.id),currentApplication:null,routerTabs:[{name:"Основные сведения",id:"read/".concat(this.id)},{name:"Анкета участника",id:"read/".concat(this.id,"/questionnaire")},{name:"Прикрепленные документы",id:"read/".concat(this.id,"/achievements")}],getOptionsByStatus:[{value:"fills_application",label:"Заполнение заявки",disabled:!0},{value:"submitted_application",label:"На рассмотрении"},{value:"correspondence_stage",label:"Заочный этап"},{value:"full_time_stage",label:"Очный этап"},{value:"nominee",label:"Номинант"},{value:"laureate",label:"Лауреат"},{value:"winner",label:"Победитель"}]}},methods:{onChangeStatus:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.target.value,n.prev=1,n.next=4,t.$store.dispatch("app/saveEntity",{entityName:"users",data:{status_application:a},method:"patch",id:t.userInfo.id});case 4:t.formData=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),400===(null===n.t0||void 0===n.t0||null===(r=n.t0.response)||void 0===r?void 0:r.status)?t.$errors.show(n.t0.response.data):t.$errors.showOnce("Неизвестная ошибка, повторите попытку позже");case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},getGender:function(e){return"male"===e?"Мужской":"Женский"},getBirthday:function(e){return e.split("-").reverse().join("-")},getPlaceEducation:function(e){return this.educationPlace.find((function(t){return t.value===e})).label},onDeleteApplications:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/saveEntity",{entityName:"delete-application-user",data:{id_user:e.formData.id},method:"post"});case 3:e.$toast.success("Заявки успешно удалены"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),400===(null===t.t0||void 0===t.t0||null===(n=t.t0.response)||void 0===n?void 0:n.status)?e.$errors.show(t.t0.response.data):e.$errors.showOnce("Неизвестная ошибка, повторите попытку позже");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},emailConfirm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/saveEntity",{entityName:"users",data:{is_active:!0,email_confirmed:!0},method:"patch",id:e.userInfo.id});case 3:e.formData=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),400===(null===t.t0||void 0===t.t0||null===(n=t.t0.response)||void 0===n?void 0:n.status)?e.$errors.show(t.t0.response.data):e.$errors.showOnce("Неизвестная ошибка, повторите попытку позже");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getCurrentApplication:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"applications/".concat(e.id)});case 3:n=t.sent,e.currentApplication=n.data,e.formData=e.currentApplication.user,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.checkout){t.next=5;break}return t.next=3,e.getCurrentApplication();case 3:return e.loading=!1,t.abrupt("return");case 5:if("create"===e.action){t.next=8;break}return t.next=8,e.getEntity();case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},computed:{checkout:function(){return this.$route.meta.check},userInfo:function(){return Object.fromEntries(Object.entries(this.formData).filter((function(e){return e[1]})))},getFullName:function(){var e=this.userInfo,t=e.first_name,n=e.last_name,a=e.patronymic;return"".concat(t," ").concat(n," ").concat(a||"").trim()},getAge:function(){return moment().diff(this.userInfo.date_birth,"years")}}},b=g,x=(n("8a99"),n("2877")),_=Object(x["a"])(b,a,r,!1,null,"8a9aa3da",null);t["default"]=_.exports},aca1:function(e,t,n){"use strict";n("6244")},bb1d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[n("x-table",{attrs:{entityName:"indicator-report-card",data:e.report,columns:e.columns,actions:["create","read","edit","delete"]},on:{delete:e.deleteItem}})],1)],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),[{title:"ID",dataIndex:"id"},{title:"Название",dataIndex:"name",filterable:!0}]),s={data:function(){return{columns:o}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getIndicator();case 2:case"end":return t.stop()}}),t)})))()},computed:{report:function(){return this.$store.state.app["indicator-report-card"]}},methods:{getIndicator:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"indicator-report-card"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:"indicator-report-card",id:e});case 4:t.$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()}}},c=s,u=n("2877"),l=Object(u["a"])(c,a,r,!1,null,null,null);t["default"]=l.exports},c13d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{name:"formData",values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0}}},[n("FormulateInput",{attrs:{type:"group",name:"stories",repeatable:"",label:"Года","add-label":"Добавить год",validation:"required"},scopedSlots:e._u([{key:"remove",fn:function(t){var a=t.index,r=t.removeItem;return[n("span",{staticClass:"formulate-input-group-repeatable-remove",on:{click:function(t){return e.onRemoveItem(a,r)}}},[e._v("Удалить")])]}}])},[n("x-input",{attrs:{label:"Год",name:"year",type:"text",validation:"required","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Описание",name:"description",type:"textarea",disabled:e.disabled,validation:"required|max:"+e.textareaMaxLength+",length"}})],1)],1),n("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" Сохранить ")])],1)])],1)],1)],1)},r=[],i=n("5530"),o=n("3835"),s=n("1da1"),c=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("4fad"),n("96cf"),n("2dd8")),u=n("b48b"),l={props:["action","id"],components:{FileComponent:u["a"]},mixins:[c["a"]],data:function(){return{formData:{stories:[]},textareaMaxLength:2048,entityName:"static-about-contest",acceptFormats:["image/png","image/jpeg","image/svg+xml"]}},methods:{onRemoveItem:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t&&n.formData.stories.length){a.next=3;break}return a.abrupt("return");case 3:if(r=n.formData.stories[e],!r.id){a.next=7;break}return a.next=7,n.$store.dispatch("app/deleteItem",{entityName:n.entityName,id:r.id,nothingStoreDelete:!0});case 7:t(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},onsubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.saveItems();case 3:n=t.sent,console.log(n),e.formData={stories:n},e.$toast.success("Успешно сохранено"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$errors.show(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},saveItems:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.formData.stories.map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,Object.entries(n).map((function(e){var t=Object(o["a"])(e,2),n=t[0],r=t[1];a.append(n,r)})),t.next=4,e.$store.dispatch("app/saveEntity",{entityName:e.entityName,id:n.id,method:n.id?"patch":"post",data:a});case 4:return r=t.sent,t.abrupt("return",Object(i["a"])({},r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getEntities:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("app/getEntities",{entityName:e});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},getEntity:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$store.dispatch("app/getEntities",{entityName:e.entityName});case 4:n=t.sent,e.formData={stories:n.data},t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEntity();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},p=l,m=n("2877"),d=Object(m["a"])(p,a,r,!1,null,"1ecccf22",null);t["default"]=d.exports},d00c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("component-tabs",{attrs:{activeTab:e.activeTab,tabs:e.routerTabs},on:{setActiveNomination:function(t){return e.$router.push("/users/"+t)}}}),e.loading?e._e():n("x-form",{staticClass:"profile-application-container",attrs:{values:e.form,name:"application"},on:{submit:e.saveForm},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("upload-photo",{attrs:{user_id:e.id,user_data:e.form}}),n("div",{staticClass:"profile-form"},[n("application-form",{attrs:{isProfile:"",items:e.items}})],1),n("a-col",{staticClass:"inline-buttons",staticStyle:{width:"200px",margin:"auto","margin-top":"35px"},attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:e.loading,type:"primary",block:"","html-type":"submit"}},[e._v(" Сохранить ")])],1)],1)],1)],1)],1)},r=[],i=n("5530"),o=n("1da1"),s=(n("96cf"),n("a15b"),n("ac1f"),n("1276"),n("d81d"),n("99af"),n("2dd8")),c=n("f729"),u=n("1bd6"),l=n("c1df"),p=n.n(l),m=n("09de"),d=n("09bc"),f=n("cd3f"),h=n.n(f),v=n("46f9"),g={props:["action","id"],mixins:[s["a"],c["a"]],components:{UploadPhoto:m["a"],ApplicationForm:u["a"],ComponentTabs:v["a"]},data:function(){return{educationForm:d["f"],form:{},users:null,entityName:"users",textareaMaxLength:255,activeTab:"edit/".concat(this.id),routerTabs:[{name:"Основные сведения",id:"edit/".concat(this.id)},{name:"Анкета участника",id:"edit/".concat(this.id,"/questionnaire")},{name:"Прикрепленные документы",id:"edit/".concat(this.id,"/achievements")}]}},methods:{getGender:function(e){return"male"===e?"Мужской":"Женский"},getBirthday:function(e){return e.split("-").reverse().join("-")},renderForm:function(){this.form.citizenshipCheckbox="РФ"!=this.form.citizenship?"Другое":"РФ",this.form.form_education=[this.form.form_education],this.form.nomination=this.form.nomination.map((function(e){return"".concat(e.id)}))},getNominations:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"nomination"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},saveForm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,n=h()(Object(i["a"])(Object(i["a"])({},e.form),{},{citizenship:"РФ"===e.form.citizenshipCheckbox?"РФ":e.form.citizenship,form_education:e.form.form_education[0]})),delete n.user_avatar,t.next=6,e.$store.dispatch("app/saveEntity",{entityName:"users",data:n,method:"patch",id:n.id});case 6:return t.next=8,e.$store.dispatch("user/getUserData");case 8:e.$toast.success("Успешно сохранено"),e.$router.push("/users/read/".concat(e.id)),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](1),console.log(t.t0),400===(null===t.t0||void 0===t.t0||null===(a=t.t0.response)||void 0===a?void 0:a.status)&&e.$errors.show(t.t0.response.data);case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,12,16,19]])})))()}},computed:{getFullName:function(){var e=this.form,t=e.first_name,n=e.last_name,a=e.patronymic;return"".concat(t," ").concat(n," ").concat(a)},getAge:function(){return p()().diff(this.form.date_birth,"years")}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getNominations();case 2:return t.next=4,e.getEntity();case 4:e.form=e.formData,e.renderForm(),e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}},b=g,x=n("2877"),_=Object(x["a"])(b,a,r,!1,null,"7f3a4e63",null);t["default"]=_.exports},db2a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[n("x-table",{attrs:{entityName:"indicator",data:e.indicator,columns:e.columns,actions:["create","read","edit","delete"]},on:{delete:e.deleteItem}})],1)],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),n("5b55")),s=[{title:"ID",dataIndex:"id"},{title:"Название",dataIndex:"name"},{title:"Тип",dataIndex:"type",customRender:function(e,t,n){return t.special_indicator?"Спец. показатель":t.indicator_head_organization?"Спец. показатель руководителя орг.":"Показатель"}}],c={data:function(){return{columns:s,loading:!0}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getIndicator();case 2:case"end":return t.stop()}}),t)})))()},computed:{indicator:function(){return this.$store.state.app.indicator}},methods:{getIndicator:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:o["b"]});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:return t.prev=8,e.loading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,5,8,11]])})))()},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:o["b"],id:e});case 4:t.$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()}}},u=c,l=n("2877"),p=Object(l["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},df49:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{md:{span:20,offset:2},xl:{span:12,offset:6}}},[n("x-input",{attrs:{label:"Название",name:"name",type:"text",validation:"required",disabled:e.disabled}}),n("x-input",{attrs:{label:"Образовательная организация",name:"types",type:"checkbox",options:[{label:"ВУЗ",value:"university"},{label:"ССУЗ",value:"college"}],validation:"required",disabled:e.disabled}}),n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" "+e._s(e.getButtonAction)+" ")])],1)],1)],1)],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),n("d81d"),n("caad"),n("2532"),n("2dd8")),s=(n("4360"),{props:["action","id"],mixins:[o["a"]],data:function(){return{formData:{types:[]},nomination:null,entityName:"nomination",textareaMaxLength:255}},methods:{onsubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("read"!==e.action){t.next=3;break}return e.$router.push("/nomination/edit/".concat(e.id)),t.abrupt("return");case 3:return e.formData.types.map((function(t){e.formData[t]=!0})),e.formData.university=e.formData.types.includes("university"),e.formData.college=e.formData.types.includes("college"),t.next=8,e.saveEntity(e.formData);case 8:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("create"===e.action){t.next=5;break}return t.next=3,e.getEntity();case 3:e.formData.university&&e.formData.types.push("university"),e.formData.college&&e.formData.types.push("college");case 5:e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()}}),c=s,u=n("2877"),l=Object(u["a"])(c,a,r,!1,null,"56cf0936",null);t["default"]=l.exports},e878:function(e,t,n){"use strict";n("edf0")},edf0:function(e,t,n){},f2c2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Период, начало",name:"start_achievement",options:["2023","2022","2021","2020","2019","2018","2017","2016","2015"],type:"select","error-behavior":"submit",disabled:e.disabled,validation:"required"}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Период, конец",name:"finish_achievement",options:["2023","2022","2021","2020","2019","2018","2017","2016","2015"],type:"select","error-behavior":"submit",disabled:e.disabled,validation:"required|comparison","validation-rules":{comparison:function(t){t.value;return Number(e.formData.finish_achievement)>=Number(e.formData.start_achievement)}},"validation-messages":{comparison:"Год окончания периода меньше начала"}}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{name:"start_entered_achievements",type:"datetime-local",label:"Начало выбора достижения",min:e.formData.start_achievement+"-01-01T00:00:00","error-behavior":"submit",max:e.formData.finish_achievement+"-12-31T23:59:59",validation:"required",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{name:"finish_entered_achievements",type:"datetime-local",label:"Конец выбора достижения",min:e.formData.start_entered_achievements,"error-behavior":"submit",max:e.formData.finish_achievement+"-12-31T23:59:59",validation:"required",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{name:"start_preliminary_verification_achievements",type:"datetime-local",label:"Дата начала предварительной проверки админа",min:e.formData.finish_entered_achievements,"error-behavior":"submit",max:e.formData.finish_achievement+"-12-31T23:59:59",validation:"required",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{name:"finish_preliminary_verification_achievements",type:"datetime-local",label:"Дата конца предварительной проверки админа",min:e.formData.start_entered_achievements,"error-behavior":"submit",max:e.formData.finish_achievement+"-12-31T23:59:59",validation:"required",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{name:"start_verification_achievements",type:"datetime-local",label:"Дата начала проверки достижений",min:e.formData.finish_preliminary_verification_achievement,"error-behavior":"submit",max:e.formData.finish_achievement+"-12-31T23:59:59",validation:"required",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{name:"finish_verification_achievements",type:"datetime-local",label:"Дата конца проверки достижений",min:e.formData.start_verification_achievements,"error-behavior":"submit",max:e.formData.finish_achievement+"-12-31T23:59:59",validation:"required",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{name:"date_publication_results",type:"datetime-local",label:"Начало публикации результатов",min:e.formData.finish_verification_achievements,"error-behavior":"submit",max:e.formData.finish_achievement+"-12-31T23:59:59",validation:"required",disabled:e.disabled}})],1),n("a-col",{staticClass:"col-form",attrs:{xs:{span:24,offset:0},xl:{span:12,offset:6}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" "+e._s(e.getButtonAction)+" ")])],1)])],1)],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),n("ac1f"),n("1276"),n("99af"),n("b0c0"),n("2dd8")),s=n("5b55"),c={props:["action","id"],mixins:[o["a"]],data:function(){return{formData:{date_publication_results:null,finish_achievement:null,finish_entered_achievements:null,finish_preliminary_verification_achievements:null,finish_verification_achievements:null,start_achievement:null,start_entered_achievements:null,start_preliminary_verification_achievements:null,start_verification_achievements:null},entityName:s["e"]}},methods:{renderData:function(){for(var e in this.formData)"string"==typeof this.formData[e]&&this.formData[e].indexOf("+")&&(this.formData[e]=this.formData[e].split("+")[0])},onsubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("read"!==e.action){t.next=3;break}return e.$router.push("/".concat(s["e"],"/edit/").concat(e.id)),t.abrupt("return");case 3:return e.formData.name="".concat(e.formData.start_achievement,"-").concat(e.formData.finish_achievement),t.next=6,e.saveEntity(e.formData);case 6:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("create"===e.action){t.next=4;break}return t.next=3,e.getEntity();case 3:e.renderData();case 4:e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}},u=c,l=n("2877"),p=Object(l["a"])(u,a,r,!1,null,"50270255",null);t["default"]=p.exports},f7fe:function(e,t,n){(function(t){var n="Expected a function",a=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,p="object"==typeof self&&self&&self.Object===Object&&self,m=l||p||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,v=Math.min,g=function(){return m.Date.now()};function b(e,t,a){var r,i,o,s,c,u,l=0,p=!1,m=!1,d=!0;if("function"!=typeof e)throw new TypeError(n);function f(t){var n=r,a=i;return r=i=void 0,l=t,s=e.apply(a,n),s}function b(e){return l=e,c=setTimeout(k,t),p?f(e):s}function _(e){var n=e-u,a=e-l,r=t-n;return m?v(r,o-a):r}function w(e){var n=e-u,a=e-l;return void 0===u||n>=t||n<0||m&&a>=o}function k(){var e=g();if(w(e))return R(e);c=setTimeout(k,_(e))}function R(e){return c=void 0,d&&r?f(e):(r=i=void 0,s)}function D(){void 0!==c&&clearTimeout(c),l=0,r=u=i=c=void 0}function O(){return void 0===c?s:R(g())}function j(){var e=g(),n=w(e);if(r=arguments,i=this,u=e,n){if(void 0===c)return b(u);if(m)return c=setTimeout(k,t),f(u)}return void 0===c&&(c=setTimeout(k,t)),s}return t=y(t)||0,x(a)&&(p=!!a.leading,m="maxWait"in a,o=m?h(y(a.maxWait)||0,t):o,d="trailing"in a?!!a.trailing:d),j.cancel=D,j.flush=O,j}function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){return!!e&&"object"==typeof e}function w(e){return"symbol"==typeof e||_(e)&&f.call(e)==r}function y(e){if("number"==typeof e)return e;if(w(e))return a;if(x(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=x(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?a:+e}e.exports=b}).call(this,n("c8ba"))},fada:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-crud",{attrs:{loading:e.loading}},[n("x-form",{attrs:{values:e.formData},on:{submit:e.onsubmit},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("a-row",{attrs:{gutter:[24,24]}},[n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("x-input",{attrs:{label:"Название альбома",name:"name",type:"text",disabled:e.disabled,validation:"required"}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[n("FormulateInput",{attrs:{disabled:e.disabled,type:"image",name:"image_uri",label:"Изображения",accept:e.acceptFormats,help:"Выберите или перетащите изображения",validation:"mime:"+e.acceptFormats.join(","),multiple:""}})],1),n("a-col",{staticClass:"col-form",attrs:{sm:{span:24,offset:0},xl:{span:12,offset:0}}},[e.formData.images.length?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},e._l(e.formData.images,(function(t,a){return n("span",{key:t.id,staticClass:"file-container__files--file",attrs:{target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[e._v(e._s(t.image_uri))]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(n){return e.onRemoveFile(t.id,a)}}})],1)})),0)]):e._e()]),n("a-col",{staticClass:"col-form",attrs:{xs:{span:24,offset:0},xl:{span:12,offset:6}}},[n("div",{staticClass:"crud-form-button"},[n("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[e._v(" "+e._s(e.getButtonAction)+" ")])],1)])],1)],1)],1)},r=[],i=n("5530"),o=n("2909"),s=n("1da1"),c=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("b0c0"),n("a434"),n("2dd8")),u={props:["action","id"],mixins:[c["a"]],data:function(){return{formData:{name:null,image_uri:[],images:[]},entityName:"static-category-gallery",acceptFormats:["image/png","image/jpeg","image/svg+xml"]}},methods:{onsubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("read"!==e.action){t.next=3;break}return e.$router.push("/static-category-gallery/edit/".concat(e.id)),t.abrupt("return");case 3:if(e.formData.image_uri.fileList){t.next=5;break}return t.abrupt("return");case 5:return n=new FormData,t.next=8,Promise.all(Object(o["a"])(e.formData.image_uri.fileList).map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.uploadFile(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:return a=t.sent,a.map((function(e){n.append("image_uri",e.id)})),e.formData.images.map((function(e){n.append("image_uri",e.id)})),n.append("name",e.formData.name),t.next=14,e.saveEntity(n);case 14:case"end":return t.stop()}}),t)})))()},setFiles:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(o["a"])(n.formData.stories),a.prev=1,a.next=4,n.uploadFile(e[0]);case 4:s=a.sent,r.splice(t,1,Object(i["a"])(Object(i["a"])({},r[t]),{},{image_uri:s})),c={stories:r},n.$formulate.setValues("formData",c),console.log(n.formData,"123"),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),n.$errors.show(a.t0.response.data);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))()},onRemoveFile:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(o["a"])(n.formData.images),a.prev=1,a.next=4,n.$store.dispatch("app/deleteItem",{entityName:"static-image",id:e,nothingStoreDelete:!0});case 4:r.splice(t,1),n.formData=Object(i["a"])(Object(i["a"])({},n.formData),{},{images:r}),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](1),console.log(a.t0),n.$errors.show(a.t0.response.data);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("create"===e.action){t.next=4;break}return t.next=3,e.getEntity();case 3:e.formData=Object(i["a"])(Object(i["a"])({},e.formData),{},{images:e.formData.image_uri,image_uri:[]});case 4:e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}},l=u,p=n("2877"),m=Object(p["a"])(l,a,r,!1,null,"b9e4f636",null);t["default"]=m.exports},fbf1:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[e.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:25}}}):n("x-table",{attrs:{entityName:"check",data:e.applications,columns:e.columns,actions:["edit"],toWinner:e.activeNominationContest.number_winners},on:{delete:e.deleteItem},scopedSlots:e._u([{key:"switched",fn:function(){return[n("div",{staticClass:"checkout-title table-contest-switch"},[n("h6",[e._v("Количество победителей: "+e._s(e.activeNominationContest.number_winners))]),n("h6",[e._v("Осталось проверить: "+e._s(e.countLeft))]),n("h6",[e._v("Проверено: "+e._s(e.countChecked))]),n("h6",[e._v("Заявок в номинации: "+e._s(e.applications.length))]),n("h6",[e._v("Ожидает проверки: "+e._s(e.countAwaiting))]),n("h6",[e._v("В работе: "+e._s(e.countInWork))])]),n("div",{staticClass:"nominations"},[e.loading?e._e():n("component-tabs",{attrs:{tabs:e.expertNominations,activeTab:e.activeNomination},on:{setActiveNomination:e.getApplications}})],1)]},proxy:!0}],null,!1,2905515134)})],1)],1)],1)},r=[],i=n("5530"),o=n("1da1"),s=(n("96cf"),n("99af"),n("caad"),n("2532"),n("d3b7"),n("25f0"),n("7db0"),n("4de4"),n("a9e3"),n("ac1f"),n("5319"),n("d81d"),n("46f9")),c=[{title:"ID",dataIndex:"id"},{title:"ФИО",dataIndex:"initials",width:200,customRender:function(e,t,n){return t.user?"".concat(t.user.first_name||""," ").concat(t.user.last_name||""," ").concat(t.user.patronymic||""):"Нет пользователя"},filterable:!0,onFilter:function(e,t){return!!t.user&&"".concat(t.user.first_name," ").concat(t.user.last_name||""," ").concat(t.user.patronymic||"").toString().toLowerCase().includes(e.toLowerCase())}},{title:"ССУЗ/ВУЗ",dataIndex:"user.name_place_education",customRender:function(e,t){return t.user?t.user.name_place_education:"Нет пользователя"}},{title:"Кол-во достижений",dataIndex:"achievements",sorter:function(e,t){return e.achievements.length-t.achievements.length},customRender:function(e,t){return t.achievements.length}},{title:"Предварительный балл",dataIndex:"preliminary_score",sorter:function(e,t){return e.preliminary_score-t.preliminary_score}},{title:"Подтвержденный балл",dataIndex:"score",sorter:function(e,t){return e.score-t.score},customRender:function(e,t){return t.score||"Нет баллов"}},{title:"Статус",dataIndex:"status_application",customRender:function(e,t){return"in_work"===t.status_application?"В работе":"awaiting_verification"===t.status_application?"Ожидает проверки":"verified"===t.status_application?"Проверено":"Нет статуса"},filters:[{value:"in_work",text:"В работе"},{value:"awaiting_verification",text:"Ожидает проверки"},{value:"verified",text:"Проверено"}],onFilter:function(e,t){return t.status_application.includes(e)}}],u={components:{ComponentTabs:s["a"]},data:function(){return{columns:c,loading:!0,activeNomination:null,applications:[]}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getNomination();case 3:return t.next=5,e.getContestNominations();case 5:return t.next=7,e.getApplications(e.$route.query.nomination?e.$route.query.nomination:"admin"===e.userInfo.role?e.nomination[0].id:e.userInfo.expert_nominations[0]);case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},computed:{userInfo:function(){return this.$store.state.user.userInfo},nomination_to_number_winner:function(){return this.$store.state.app["nomination-to-number-winner"]},activeNominationContest:function(){var e=this;return this.nomination_to_number_winner.find((function(t){return t.nomination===e.activeNomination}))},nomination:function(){return this.$store.state.app.nomination},expertNominations:function(){var e=this;return this.userInfo?"admin"===this.userInfo.role?this.nomination:this.nomination.filter((function(t){return e.userInfo.expert_nominations.includes(t.id)})):[]},countAwaiting:function(){return this.applications.reduce((function(e,t){return"awaiting_verification"===t.status_application?e+1:e}),0)},countChecked:function(){return this.applications.reduce((function(e,t){return"verified"===t.status_application||"rejected"===t.status_application?e+1:e}),0)},countLeft:function(){var e=this.activeNominationContest.number_winners-this.countChecked;return e<=0?0:e},countInWork:function(){return this.applications.reduce((function(e,t){return"in_work"===t.status_application?e+1:e}),0)},allChecked:function(){return this.countChecked===this.applications.length}},methods:{getNomination:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"nomination"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},getContestNominations:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"nomination-to-number-winner"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},getApplications:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/getEntities",{entityName:"applications",params:{nomination:e}});case 4:a=n.sent,t.activeNomination=Number(e),t.$router.replace(t.$route.path+"?nomination=".concat(e)).catch((function(){})),t.applications=t.getLastVerifyApplicationAndSetCheckStatuses(a.data),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),console.log(n.t0);case 13:return n.prev=13,t.loading=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,10,13,16]])})))()},getLastVerifyApplicationAndSetCheckStatuses:function(e){var t=e.filter((function(e){return"verified"===e.status_application||"rejected"===e.status_application})).pop();return t?e.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{needRecheck:e.preliminary_score>=t.score})})):e},deleteItem:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:"applications",id:e});case 4:t.$$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()}}},l=u,p=n("2877"),m=Object(p["a"])(l,a,r,!1,null,null,null);t["default"]=m.exports},fc1f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:24,type:"flex"}},[n("a-col",{staticClass:"mb-24",attrs:{span:24}},[n("x-table",{attrs:{entityName:"static-category-gallery",data:e.albums,columns:e.columns,actions:["create","read","edit","delete"]},on:{delete:e.deleteItem}})],1)],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),[{title:"ID",dataIndex:"id"},{title:"Название",dataIndex:"name",filterable:!0},{title:"Кол-во фотографий",dataIndex:"image_uri",customRender:function(e,t){return t.image_uri.length}}]),s={data:function(){return{columns:o}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAlbums();case 2:case"end":return t.stop()}}),t)})))()},computed:{albums:function(){return this.$store.state.app["static-category-gallery"]}},methods:{getAlbums:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"static-category-gallery"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$store.dispatch("app/deleteItem",{entityName:"static-category-gallery",id:e});case 4:t.$toast.success("Успешно удалено"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0),t.$errors.showOnce(n.t0.response.data);case 11:return n.prev=11,t.loading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()}}},c=s,u=n("2877"),l=Object(u["a"])(c,a,r,!1,null,null,null);t["default"]=l.exports}}]);