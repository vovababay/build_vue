(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{"026f":function(t,e,n){"use strict";n("eb47")},"0ed6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("h2",{staticClass:"page-title"},[t._v("Редактирование")]),n("component-tabs"),t.loading?t._e():n("component-tabs",{attrs:{tabs:t.userInfo.nomination,activeTab:t.activeNomination},on:{setActiveNomination:t.changeNomination}})],1),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",{staticClass:"container-body"},[t._l(t.indicators,(function(e){return n("div",{key:e.id},[e.special_indicator||e.indicator_head_organization?t._e():n("Upload",{attrs:{indicator:e,saveAchievement:t.saveAchievement,participationDegree:t.participationDegree,achievements:e.achievements},on:{remove:t.removeAchievement}}),e.special_indicator?n("UploadSpec",{attrs:{participationDegree:t.participationDegree,achievements:e.achievements,indicator:e,saveAchievement:t.saveAchievement},on:{remove:t.removeAchievement}}):t._e(),e.indicator_head_organization?n("UploadSpecOrg",{attrs:{achievements:e.achievements,indicator:e,saveAchievement:t.saveAchievement},on:{remove:t.removeAchievement}}):t._e()],1)})),n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("router-link",{staticClass:"button-link",attrs:{to:"/profile"}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"info",block:"","html-type":"submit"}},[t._v(" Продолжить позже ")])],1),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("Подача анкет скоро начнется")])]),n("a-button",{staticClass:"login-form-button button-disabled",attrs:{disabled:"",type:"primary",block:""},on:{click:t.onApplicate}},[t._v(" Отправить заявку на конкурс ")])],2)],1)],2)],1)],1)],1)},i=[],r=n("bb8d"),s={mixins:[r["a"]]},o=s,c=n("2877"),l=Object(c["a"])(o,a,i,!1,null,null,null);e["default"]=l.exports},"1c7e":function(t,e,n){var a=n("b622"),i=a("iterator"),r=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){r=!0}};o[i]=function(){return this},Array.from(o,(function(){throw 2}))}catch(c){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var a={};a[i]=function(){return{next:function(){return{done:n=!0}}}},t(a)}catch(c){}return n}},"1f31":function(t,e,n){"use strict";n("6236")},"254d":function(t,e,n){"use strict";n("f8a1")},"2cbe":function(t,e,n){},"36aa":function(t,e,n){},"3a12":function(t,e,n){},"3d50":function(t,e,n){},"3e35":function(t,e,n){"use strict";n("7bd3")},4032:function(t,e,n){},4434:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("x-form",{staticClass:"participantQuestionnaire",attrs:{values:t.participantQuestionnaire,name:"participant-questionnaire container"},model:{value:t.participantQuestionnaire,callback:function(e){t.participantQuestionnaire=e},expression:"participantQuestionnaire"}},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("span",{staticClass:"subtitle"},[t._v('Регистрация на конкурс "Студент года 2021"')]),n("h2",{staticClass:"page-title"},[t._v(" Этап 2. Анкета участника ")])]),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",{staticClass:"container-body"},[n("upload-photo"),t._l(t.questionnaries,(function(t){return n("Upload",{key:t.id,ref:"questionnaries",refInFor:!0,attrs:{questionnaire:t}})})),n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.buttonDisabled,type:"info",block:"","html-type":"submit"},on:{click:function(e){return t.onApplicate("profile")}}},[t._v(" Сохранить и выйти ")]),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.buttonDisabled,type:"primary",block:""},on:{click:function(e){return t.onApplicate("achievements")}}},[t._v(" Сохранить и продолжить ")])],1)],2)],1)],1)],1)},i=[],r=n("5f74"),s=n("09de"),o={components:{UploadPhoto:s["a"]},mixins:[r["a"]]},c=o,l=n("2877"),u=Object(l["a"])(c,a,i,!1,null,null,null);e["default"]=u.exports},4475:function(t,e,n){"use strict";n("6419")},"46f9":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-tabs",{attrs:{"tab-position":t.getWidth<920?"right":"top","default-active-key":t.activeTab?t.activeTab:t.activePage},on:{change:function(e){return t.activeTab?t.$emit("setActiveNomination",e):t.$router.push("/profile/"+e)}}},t._l(t.tabs?t.tabs:t.routerTabs,(function(t){return n("a-tab-pane",{key:t.id,attrs:{tab:t.name}})})),1)},i=[],r=(n("a9e3"),n("6528")),s={mixins:[r["a"]],props:{tabs:{type:Array},activeTab:{type:null|Number}},data:function(){return{routerTabs:[{name:"Основные сведения",id:"edit"},{name:"Анкета участника",id:"questionnaire"},{name:"Прикрепленные документы",id:"achievements"}]}},computed:{activePage:function(){return this.$route.meta.tabName}}},o=s,c=n("2877"),l=Object(c["a"])(o,a,i,!1,null,"06d32528",null);e["a"]=l.exports},"4b64":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("span",{staticClass:"subtitle"},[t._v('Регистрация на конкурс "Студент года 2021"')]),n("h2",{staticClass:"page-title"},[t._v(" Этап 3. Прикрепление документов согласно выбранной номинации ")]),n("span",{staticClass:"prompt"},[t._v("Заполняемая номинация:")]),t.loading?t._e():n("component-tabs",{attrs:{tabs:t.userInfo.nomination,activeTab:t.activeNomination},on:{setActiveNomination:t.changeNomination}})],1),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",{staticClass:"container-body"},[t._l(t.indicators,(function(e){return n("div",{key:e.id},[e.special_indicator||e.indicator_head_organization?t._e():n("Upload",{attrs:{indicator:e,saveAchievement:t.saveAchievement,participationDegree:t.participationDegree,achievements:e.achievements},on:{remove:t.removeAchievement}}),e.special_indicator?n("UploadSpec",{attrs:{participationDegree:t.participationDegree,achievements:e.achievements,indicator:e,saveAchievement:t.saveAchievement},on:{remove:t.removeAchievement}}):t._e(),e.indicator_head_organization?n("UploadSpecOrg",{attrs:{achievements:e.achievements,indicator:e,saveAchievement:t.saveAchievement},on:{remove:t.removeAchievement}}):t._e()],1)})),n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("router-link",{staticClass:"button-link",attrs:{to:"/profile"}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"info",block:"","html-type":"submit"}},[t._v(" Продолжить позже ")])],1),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("Подача анкет скоро начнется")])]),n("a-button",{staticClass:"login-form-button button-disabled",attrs:{disabled:"",type:"primary",block:""},on:{click:t.onApplicate}},[t._v(" Отправить заявку на конкурс ")])],2)],1)],2)],1)],1)],1)},i=[],r=n("bb8d"),s={mixins:[r["a"]]},o=s,c=n("2877"),l=Object(c["a"])(o,a,i,!1,null,null,null);e["default"]=l.exports},"4df4":function(t,e,n){"use strict";var a=n("0366"),i=n("7b0b"),r=n("9bdd"),s=n("e95a"),o=n("50c4"),c=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,m,p,d,f=i(t),v="function"==typeof this?this:Array,h=arguments.length,_=h>1?arguments[1]:void 0,b=void 0!==_,g=l(f),x=0;if(b&&(_=a(_,h>2?arguments[2]:void 0,2)),void 0==g||v==Array&&s(g))for(e=o(f.length),n=new v(e);e>x;x++)d=b?_(f[x],x):f[x],c(n,x,d);else for(m=g.call(f),p=m.next,n=new v;!(u=p.call(m)).done;x++)d=b?r(m,_,[u.value,x],!0):u.value,c(n,x,d);return n.length=x,n}},5904:function(t,e,n){"use strict";n("36aa")},"5c7b":function(t,e,n){"use strict";n("c155")},"5ead":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},["create-pass"===t.step?n("div",{staticClass:"container-back",on:{click:function(e){t.step="main"}}},[n("v-icon",{attrs:{name:"chevron-left"}}),n("div",[t._v("назад")])],1):t._e(),t._m(0),"main"===t.step?n("x-form",{staticClass:"user-application-container",attrs:{values:t.form,name:"application"},on:{submit:function(e){return t.toNextStep("next")}},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("div",{staticClass:"step-1"},[n("application-form",{attrs:{items:t.items}}),n("a-row",{staticClass:"clear-class",attrs:{gutter:[0,30]}},[n("div",{staticClass:"confirm-checkbox"},[n("x-input",{attrs:{type:"checkbox",name:"confirmCheckbox1",validation:"acceptAll","validation-rules":{acceptAll:function(t){var e=t.value;return 1===e.length}},"validation-messages":{acceptAll:"Нужно принять соглашение"},options:t.checkboxes,"error-behavior":"submit"}}),n("label",{staticClass:"label",attrs:{for:"formulate--application-26_clause"}},[t._v(" Ознакомлен и согласен с "),n("a",{attrs:{target:"_blank",href:"/position.pdf"}},[t._v("Положением о проведении конкурса по присуждению премии в области развития профессионального образования Самарской области «Студент года 2021»")])])],1),n("div",{staticClass:"confirm-checkbox"},[n("x-input",{attrs:{type:"checkbox",name:"confirmCheckbox2",options:t.checkboxes,"error-behavior":"submit",validation:"acceptAll","validation-rules":{acceptAll:function(t){var e=t.value;return 1===e.length}},"validation-messages":{acceptAll:"Нужно принять соглашение"}}}),n("label",{staticClass:"label",attrs:{for:"formulate--application-28_clause"}},[t._v(" Даю согласие на обработку моих персональных данных. "),n("a",{attrs:{target:"_blank",href:"/privacy.pdf"}},[t._v("С Политикой обработки персональных данных ознакомлен")])])],1),n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:12,offset:6},xl:{span:8,offset:8},lg:{span:16,offset:4},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"info",block:"","html-type":"submit"},on:{onSubmit:function(e){return t.toNextStep("back")}}},[t._v(" Сохранить и выйти ")]),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"primary",block:"","html-type":"submit"},on:{onSubmit:function(e){return t.toNextStep("next")}}},[t._v(" Сохранить и продолжить ")])],1)],1)],1)]):n("x-form",{attrs:{values:t.createPassForm,name:"pass-form"},on:{submit:t.onSubmit},model:{value:t.createPassForm,callback:function(e){t.createPassForm=e},expression:"createPassForm"}},[n("div",{staticClass:"step-2"},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:12,offset:6},lg:{span:12,offset:6},xl:{span:8,offset:8}}},[n("x-input",{attrs:{label:"Придумайте пароль",type:"password",name:"password",validation:"min:8,length","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Повторите пароль",type:"password",name:"password_confirm",validation:"min:8,length|confirm","validation-name":"Password confirmation","error-behavior":"submit"}}),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"primary",block:"","html-type":"submit"}},[t._v(" Завершить регистрацию ")])],1)],1)],1)])],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-title"},[n("span",{staticClass:"subtitle"},[t._v('Регистрация на конкурс "Студент года 2021"')]),n("h2",{staticClass:"page-title"},[t._v("Этап 1. Основные сведения")]),n("span",{staticClass:"prompt"},[t._v("* - поля, обязательные для заполнения")])])}],r=n("5530"),s=n("1da1"),o=(n("498a"),n("a9e3"),n("caad6"),n("2532"),n("96cf"),n("cd3f")),c=n.n(o),l=n("1bd6"),u=n("f729"),m={components:{ApplicationForm:l["a"]},mixins:[u["a"]],data:function(){return{form:{apartment:"",citizenship:null,citizenshipCheckbox:"",course_education:null,date_birth:"",district:"",email:"",first_name:"",form_education:["Очная"],gender:"",house:"",last_name:"",locality:"",nomination:[],patronymic:"",phone_number:"",place_education:"",name_place_education:"",postal_code:"",region:"Самарская область",street:"",url_vk:"",confirmCheckbox1:[],confirmCheckbox2:[]},checkboxes:{clause:""},createPassForm:{password:"",password_confirm:""},nomination:[],step:"main",loading:!1,errorsObj:{}}},watch:{form:function(){}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getNominations();case 2:case"end":return e.stop()}}),e)})))()},methods:{cloneData:function(t){return c()(t)},toNextStep:function(t){this.afterType=t,this.step="create-pass"},toPrevStep:function(){this.step="main"},onSubmit:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=t.cloneData(Object(r["a"])(Object(r["a"])({},t.form),{},{citizenship:"РФ"===t.form.citizenshipCheckbox?"РФ":t.form.citizenship,password:t.createPassForm.password,redirect:t.afterType,form_education:t.form.form_education[0]})),e.next=5,t.$store.dispatch("app/saveEntity",{entityName:"registration",data:n,method:"post"});case 5:return t.$router.push("/"),e.next=8,t.$swal.fire({title:"Регистрация прошла успешно",text:"На почту ".concat(n.email," было отправлено письмо. Для завершения регистрации перейдите по ссылке, указанной в письме."),confirmButtonText:"Хорошо"});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0),400===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)?(t.step="main",t.$formulate.handle(e.t0.response.data,"application")):t.$errors.showOnce("Ошибка входа");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})))()},trimWhitespacedAndToInt:function(t){for(var e in t)"string"==typeof t[e]&&(t[e]=t[e].trim()),t[e]!=Number(t[e])||t[e].includes("+")||"nomination"===e||(t[e]=Number(t[e]))},getNominations:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("app/getEntities",{entityName:"nomination"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()}}},p=m,d=(n("b641"),n("2877")),f=Object(d["a"])(p,a,i,!1,null,"746acfa4",null);e["default"]=f.exports},"5ef0":function(t,e,n){"use strict";n("8ba8")},"5f74":function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function i(t){if(Array.isArray(t))return a(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n("fb6a"),n("b0c0");function s(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||r(t)||s(t)||o()}var l=n("1da1"),u=(n("99af"),n("c740"),n("d81d"),n("caad6"),n("2532"),n("ac1f"),n("1276"),n("498a"),n("4de4"),n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"document-container"},[n("h6",{staticClass:"document-title"},[t._v(" "+t._s(t.questionnaire.name)+" ")]),"only_file"===t.questionnaire.type?n("div",{},[t.questionnaire.first_help_text?n("div",{staticClass:"document-clue"},[t._v(" "+t._s(t.questionnaire.first_help_text)+" ")]):t._e(),n("div",{staticClass:"achievement-list__item--info--block"},[t.only_file_document?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files questionnaire-file only-file"},[n("a",{staticClass:"file-container__files--file",attrs:{href:t.getDocumentLink(t.only_file_document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[t._v(t._s(t.addDocumentName(t.only_file_document)))])],1),n("v-icon",{staticClass:"times-icon",attrs:{name:"times"},on:{click:function(e){e.stopPropagation(),t.only_file_document=null}}})],1)]):n("file-component",{attrs:{title:t.questionnaire.title,acceptFormats:t.questionnaire.acceptFormats},on:{change:function(e){return t.setFiles(e)}}})],1)]):t._e(),"multiple"===t.questionnaire.type?n("div",{},[t.questionnaire.first_help_text?n("div",{staticClass:"document-clue"},[t._v(" "+t._s(t.questionnaire.first_help_text)+" ")]):t._e(),n("upload-questionnaire-characteristic",{attrs:{characteristics:t.characteristics},on:{remove:t.removeCharacteristic,add:t.addCharacteristic}})],1):t._e(),"radio_and_multiple"===t.questionnaire.type?n("div",{},[n("div",{staticClass:"document-clue"},[t._v(" "+t._s(t.questionnaire.subname)+" ")]),n("FormulateInput",{staticClass:"inline-checkbox",attrs:{type:"radio",name:"yes-"+t.questionnaire.id,options:t.yesno},model:{value:t.yesValue,callback:function(e){t.yesValue=e},expression:"yesValue"}}),"yes"===t.yesValue?n("div",{staticClass:"achievement-spec-block--reports"},[t.questionnaire.first_help_text?n("div",{staticClass:"document-clue"},[t._v(" "+t._s(t.questionnaire.first_help_text)+" ")]):t._e(),n("upload-questionnaire-report",{attrs:{reports:t.reports},on:{removeReport:t.removeReport,addReport:t.addReport}}),t.questionnaire.second_help_text?n("div",{staticClass:"document-clue"},[t._v(" "+t._s(t.questionnaire.second_help_text)+" ")]):t._e(),n("file-component",{attrs:{multiple:""},on:{change:function(e){return t.setFiles(e)}}}),n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files questionnaire-file"},[t.loadedDocuments.length?n("div",{staticClass:"questionnaire-file--files"},t._l(t.loadedDocuments,(function(e,a){return n("div",{key:e.id,staticClass:"multiple-file-questionnaire"},[n("a",{staticClass:"file-container__files--file",attrs:{href:t.getDocumentLink(e.document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[t._v(t._s(t.addDocumentName(e.document)))])],1),n("v-icon",{staticClass:"times-icon",attrs:{name:"times"},on:{click:function(n){return t.deleteDocument(e,a)}}})],1)})),0):t._e()])])],1):t._e()],1):t._e()])}),m=[],p=(n("a434"),n("b48b")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"achievement-spec-block"},[t._l(t.reports,(function(e,a){return n("li",{key:a,staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("span",{staticClass:"count"},[t._v(t._s(a+1))]),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("Удалить оценку")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(n){return t.deleteReport(a,e.id)}}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[t._v(t._s(e.name))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[t._v(t._s(e.rating))])])])])})),t.isVisible&&!t.loading?n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--info"},[n("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[n("x-form",{staticClass:"achievement-spec-block--form",attrs:{name:"reportForm"},on:{submit:t.addReport},model:{value:t.reportForm,callback:function(e){t.reportForm=e},expression:"reportForm"}},[n("div",{staticClass:"achievement-spec-block--form-item"},[n("span",{staticClass:"count"},[t._v(t._s(t.reports.length+1))]),n("x-input",{staticClass:"item-name",attrs:{name:"name",type:"text",validation:"required",label:"Название предмета","error-behavior":"submit"}}),n("x-input",{staticClass:"item-participation",attrs:{name:"rating",type:"select",validation:"required",options:t.rating,label:"Оценка","error-behavior":"submit"}})],1),n("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[t._v("Добавить предмет")])],1)],1)],1)])]):t._e()],2)},f=[],v=n("5530"),h={props:{reports:{type:Array,required:!0}},data:function(){return{reportForm:{},rating:[2,3,4,5],loading:!1}},computed:{isVisible:function(){return this.reports.length<20}},methods:{addReport:function(){var t=this;this.loading=!0,this.$emit("addReport",Object(v["a"])({},this.reportForm)),setTimeout((function(){t.reportForm={},t.loading=!1}),0)},deleteReport:function(t,e){this.$emit("removeReport",t,e)}}},_=h,b=(n("026f"),n("2877")),g=Object(b["a"])(_,d,f,!1,null,null,null),x=g.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"achievement-spec-block characteristic"},[t._l(t.characteristics,(function(e,a){return n("li",{key:a,staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("span",{staticClass:"count"},[t._v(t._s(a+1))]),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("Удалить характеристику")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(n){return t.deleteCharacteristic(a,e.id)}}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[t._v(t._s(e.document_type))])]),n("div",{staticClass:"achievement-list__item--read--item"},[n("span",[t._v(t._s(e.year_manufacture))])]),n("div",{staticClass:"achievement-list__item--read--item"},[n("span",[t._v(t._s(e.who_issued))])]),e.documents&&e.documents.length?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},[e.documents[0].document?n("a",{staticClass:"file-container__files--file",attrs:{href:t.getDocumentLink(e.documents[0].document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[t._v(t._s(e.documents[0].id?t.addDocumentName(e.documents[0].document):e.documents[0].name))])],1):n("a",{staticClass:"file-container__files--file"},[n("v-icon",{attrs:{name:"file"}}),n("span",[t._v(t._s(e.documents[0].id?t.addDocumentName(e.documents[0].document):e.documents[0].name))])],1)])]):t._e()])])})),t.isVisible&&!t.loading?n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--info"},[n("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[n("x-form",{staticClass:"achievement-spec-block--form",attrs:{valuses:t.form,name:"form"},on:{submit:t.add},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("div",{staticClass:"achievement-spec-block--form-item characteristic"},[n("span",{staticClass:"count"},[t._v(t._s(t.characteristics.length+1))]),n("x-input",{staticClass:"item-name",attrs:{name:"document_type",type:"text",validation:"required",label:"Вид документа","error-behavior":"submit"}}),n("x-input",{staticClass:"item-name item-name-year",attrs:{name:"year_manufacture",type:"number",min:"1900",max:"2100",validation:"required:min:1900|max:2100",label:"Год выдачи","error-behavior":"submit"}}),n("x-input",{staticClass:"item-participation",attrs:{name:"who_issued",type:"select",validation:"required",options:t.issuingAuthority,label:"Кто выдал","error-behavior":"submit"}})],1),n("div",{staticClass:"achievement-spec-block--form-item"},[n("file-component",{on:{change:function(e){return t.setFiles(e)}}})],1),n("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[t._v("Добавить характеристику")])],1)],1)],1)])]):t._e()],2)},C=[],w=n("09bc"),k="https://студентгода63.рф/media",q={components:{FileComponent:p["a"]},props:{characteristics:{type:Array,required:!0}},data:function(){return{loading:!1,form:{},media:k,issuingAuthority:w["j"]}},computed:{isVisible:function(){return this.characteristics.length<3}},methods:{add:function(){var t=this;this.loading=!0,this.$emit("add",Object(v["a"])({},this.form)),setTimeout((function(){t.form={},t.loading=!1}),0)},deleteCharacteristic:function(t,e){this.$emit("remove",t,e)},getDocumentLink:function(t){return"".concat(this.media,"/").concat(t)},addDocumentName:function(t){if(t){console.log(t);var e=t.split("/");return e[e.length-1]}},setFiles:function(t){this.form.documents=t}}},R=q,F=(n("daa8"),Object(b["a"])(R,y,C,!1,null,null,null)),j=F.exports,$=n("cd3f"),O=n.n($),A="https://студентгода63.рф/media",D={components:{FileComponent:p["a"],UploadQuestionnaireReport:x,UploadQuestionnaireCharacteristic:j},props:{questionnaire:{type:Object,required:!0},isProfile:{type:Boolean,required:!1}},data:function(){return{id:this.questionnaire.id,media:A,form:{},yesValue:"yes",yesno:{yes:"Да",no:"Нет"},reports:[],documents:[],characteristics:[],only_file_document:null,loadedDocuments:[]}},mounted:function(){"only_file"===this.questionnaire.type&&this.questionnaire.documents&&(this.only_file_document=this.questionnaire.documents),"multiple"===this.questionnaire.type&&this.questionnaire.data&&(this.characteristics=this.questionnaire.data),"radio_and_multiple"===this.questionnaire.type&&this.questionnaire.data&&(this.loadedDocuments=O()(this.questionnaire.data.documents),this.reports=this.questionnaire.data.reports)},methods:{addDocumentName:function(t){if(t){var e=t.split("/");return e[e.length-1]}},getDocumentLink:function(t){return"".concat(this.media,"/").concat(t)},setFiles:function(t){this.documents=t,console.log(this.documents)},addReport:function(t){this.reports.push(t)},removeReport:function(t,e){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=10;break}return a.prev=1,a.next=4,n.$store.dispatch("app/deleteItem",{entityName:"report",id:e,nothingStoreDelete:!0});case 4:a.next=10;break;case 6:a.prev=6,a.t0=a["catch"](1),console.log(a.t0),n.$errors.show(a.t0.response.data);case 10:n.reports.splice(t,1);case 11:case"end":return a.stop()}}),a,null,[[1,6]])})))()},removeCharacteristic:function(t,e){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=10;break}return a.prev=1,a.next=4,n.$store.dispatch("app/deleteItem",{entityName:"characteristic",id:e,nothingStoreDelete:!0});case 4:a.next=10;break;case 6:a.prev=6,a.t0=a["catch"](1),console.log(a.t0),n.$errors.show(a.t0.response.data);case 10:n.characteristics.splice(t,1);case 11:case"end":return a.stop()}}),a,null,[[1,6]])})))()},addCharacteristic:function(t){this.characteristics.push(t),console.log(this.characteristics)},deleteDocument:function(t,e){var n=this;this.loading=!0,this.loadedDocuments.splice(e,1),setTimeout((function(){n.loading=!1}),0)}}},N=D,I=(n("a8f3"),n("75a1"),Object(b["a"])(N,u,m,!1,null,null,null)),P=I.exports;n("5b55"),e["a"]={components:{Upload:P},data:function(){return{loading:!0,buttonDisabled:!1,questionnaries:[],participantQuestionnaire:{},isProfile:!1,issuingAuthority:w["j"],documentView:w["e"]}},computed:{userInfo:function(){return this.$store.state.user.userInfo},initialIndicators:function(){return this.$store.state.app.indicator}},beforeRouteLeave:function(t,e,n){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.query),!t.query.next){e.next=6;break}return n(),e.abrupt("return");case 6:return e.next=8,a.protectRouting();case 8:if(!e.sent){e.next=10;break}n();case 10:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getBaseIndicators(),e.next=3,t.getIndicatorsReport();case 3:if(n=e.sent,t.questionnaries=[].concat(c(t.questionnaries),c(n)),t.isProfile=t.getType(),!t.isProfile){e.next=11;break}return e.next=9,t.getParticipantQuestionnaire();case 9:t.participantQuestionnaireResponse=e.sent,t.renderQuestionnaires(t.participantQuestionnaireResponse);case 11:t.loading=!1;case 12:case"end":return e.stop()}}),e)})))()},methods:{getParticipantQuestionnaire:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("app/getEntities",{entityName:"participant-questionnaire"});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},renderQuestionnaires:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.questionnaries[e.questionnaries.findIndex((function(t){return"autobiography"===t.id}))].documents=t.autobiography,e.questionnaries[e.questionnaries.findIndex((function(t){return"certificate_place_study"===t.id}))].documents=t.certificate_place_study,e.questionnaries[e.questionnaries.findIndex((function(t){return"characteristic"===t.id}))].data=t.characteristic,t.report_card&&t.report_card.map((function(t){e.questionnaries[e.questionnaries.findIndex((function(e){return e.id===t.indicator_report_card}))].data=t})),console.log(e.questionnaries);case 5:case"end":return n.stop()}}),n)})))()},getType:function(){return this.$route.path.includes("profile")},getBaseIndicators:function(){this.questionnaries=[{id:"certificate_place_study",name:"Справка с места учебы*",first_help_text:"Прикрепите сканированную копию справки с места учебы в формате jpeg, pdf, имеющую печать образовательной организации, датированную не ранее 05.04.2021 г. Можно прикрепить потом в личном кабинете. Отправить заявку без этого нельзя",title:"Прикрепить справку",type:"only_file",acceptFormats:["image/jpeg","application/pdf"]},{id:"autobiography",name:"Автобиография конкурсанта",first_help_text:"Можно прикрепить только 1 документ формата doc, docx",title:"Прикрепить автобиографию",type:"only_file",acceptFormats:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"]},{id:"characteristic",name:"Характеристики, отзывы и ходатайства",first_help_text:"Вы можете прикрепить документы, подтверждающие Ваше участие и вклад в выбранном Вами направлении за последние два года. Например, характеристики, ходатайства и т.д. студенческих организаций (объединений), администрации вуза/ссуза и т.п. За каждый отдельный новый документ Вы можете получить 1 балл. Максимальное количество баллов – 3",type:"multiple"}]},getIndicatorsReport:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("app/getEntities",{entityName:"indicator-report-card"});case 3:return n=e.sent,e.abrupt("return",t.renderIndicators(n));case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},renderIndicators:function(t){return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.data.map((function(t){return t.type="radio_and_multiple",t})));case 1:case"end":return e.stop()}}),e)})))()},getFormData:function(t){var e=new FormData;for(var n in t)"documents"===n?t[n].map((function(t){e.append("documents",t)})):e.append(n,t[n]);return e},addDocumentName:function(t){if(t){var e=t.split("/");return e[e.length-1]}},renderDocuments:function(t){var e=this;return t.map((function(t){return t.documentName=e.addDocumentName(t.document),t}))},trimWhitespaces:function(t){for(var e in t)t[e]===String&&t[e].trim()},protectRouting:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$swal.fire({title:"Есть несохраненные данные",text:"Вы точно хотите уйти со страницы? Несохраненные данные будут утеряны.",showCancelButton:!0,confirmButtonText:"Продолжить",cancelButtonText:"Отмена"});case 2:return n=e.sent,a=n.isConfirmed,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},onApplicate:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,i,r,s,o,u,m,p,d,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.buttonDisabled=!0,o=[],u=[],m=[],p=[],d=[],e.$refs.questionnaries.map((function(t){t.only_file_document&&d.push(t.id),console.log(t),m.push({reports:c(t.reports),documents:c(t.documents),id:t.id,type:t.questionnaire.type,characteristics:c(t.characteristics),data:t.questionnaire.data})})),n.next=10,Promise.all(m.map(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(n){var a,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("autobiography"!==n.id){t.next=7;break}if(n.documents.length){t.next=6;break}if(!d.includes(n.id)){t.next=4;break}return t.abrupt("return");case 4:t.next=7;break;case 6:r=n.documents[0];case 7:if("certificate_place_study"!==n.id){t.next=16;break}if(n.documents.length){t.next=15;break}if(!d.includes(n.id)){t.next=11;break}return t.abrupt("return");case 11:p.push("Прикрепите справку об обучении"),Promise.reject("error"),t.next=16;break;case 15:s=n.documents[0];case 16:if("characteristic"!==n.id||p.length){t.next=31;break}return t.prev=17,a=n.characteristics.filter((function(t){return!t.id})),console.log(a),t.next=22,e.createCharacteristics(a);case 22:if(i=t.sent,i.length){t.next=25;break}return t.abrupt("return");case 25:u.push(i),t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](17),console.log(t.t0);case 31:if("radio_and_multiple"!==n.type||p.length){t.next=44;break}return t.prev=32,t.next=35,e.createReportCard(n);case 35:if(c=t.sent,c){t.next=38;break}return t.abrupt("return");case 38:o.push(c),t.next=44;break;case 41:t.prev=41,t.t1=t["catch"](32),console.log(t.t1);case 44:return t.abrupt("return","");case 45:case"end":return t.stop()}}),t,null,[[17,28],[32,41]])})));return function(e){return t.apply(this,arguments)}}()));case 10:if(!p.length){n.next=14;break}return p.map((function(t){e.$toast.error(t)})),p=[],n.abrupt("return");case 14:return f=O()({report_card:o,autobiography:r,certificate_place_study:s,characteristic:u}),f.characteristic.length||delete f.characteristic,f.report_card.length||delete f.report_card,r||delete f.autobiography,d.includes("certificate_place_study")&&delete f.certificate_place_study,f=e.getFormData(f),console.log(f),n.next=23,e.$store.dispatch("app/saveEntity",{id:null===(a=e.participantQuestionnaireResponse)||void 0===a?void 0:a.id,data:f,method:null!==(i=e.participantQuestionnaireResponse)&&void 0!==i&&i.id?"patch":"post",entityName:"participant-questionnaire"});case 23:e.$toast.success("Успешно сохранено"),e.$router.push({path:"/".concat(t),query:{next:!0}}),n.next=31;break;case 27:n.prev=27,n.t0=n["catch"](0),console.log(n.t0),e.$errors.show(n.t0.response.data);case 31:return n.prev=31,e.buttonDisabled=!1,n.finish(31);case 34:case"end":return n.stop()}}),n,null,[[0,27,31,34]])})))()},createReportCard:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,i,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(t),t.reports.length){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,e.createReports(t.reports);case 5:return i=n.sent,r=e.getFormData({documents:t.documents,reports:i,indicator_report_card:t.id}),console.log(r),n.next=10,e.$store.dispatch("app/saveEntity",{entityName:"report-card",method:t.data?"patch":"post",id:null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id,data:r});case 10:return s=n.sent,n.abrupt("return",s.id);case 12:case"end":return n.stop()}}),n)})))()},createReports:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(t.map((function(t){return new Promise(function(){var n=Object(l["a"])(regeneratorRuntime.mark((function n(a){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("app/saveEntity",{entityName:"report",method:"post",data:t});case 2:i=n.sent,a(i.id);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},createCharacteristics:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(t.map((function(t){return new Promise(function(){var n=Object(l["a"])(regeneratorRuntime.mark((function n(a){var i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.getFormData(O()(t)),n.next=3,e.$store.dispatch("app/saveEntity",{entityName:"characteristic",method:"post",data:i});case 3:r=n.sent,a(r.id);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()}}}},6236:function(t,e,n){},6419:function(t,e,n){},6528:function(t,e,n){"use strict";e["a"]={data:function(){return{windowWidth:window.innerWidth}},computed:{getWidth:function(){return this.windowWidth}},mounted:function(){window.addEventListener("resize",this.onResize)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{onResize:function(){this.windowWidth=window.innerWidth}}}},"75a1":function(t,e,n){"use strict";n("894dc")},"7bd3":function(t,e,n){},8640:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.userInfo?n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("h2",{staticClass:"page-title"},[t._v("Редактирование")]),n("component-tabs")],1),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("x-form",{staticClass:"profile-application-container",attrs:{values:t.form,name:"application"},on:{submit:t.saveForm},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("upload-photo"),n("div",{staticClass:"profile-form"},[n("span",{staticClass:"prompt"},[t._v("*-поля, обязательные для заполнения")]),n("application-form",{attrs:{isProfile:"",items:t.items}})],1),n("change-password"),n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"info",block:"","html-type":"submit"}},[t._v(" Сохранить и выйти ")]),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"primary",block:"","html-type":"submit"}},[t._v(" Сохранить и продолжить ")])],1)],1)],1)],1):t._e()],1)},i=[],r=n("5530"),s=n("1da1"),o=(n("a15b"),n("ac1f"),n("1276"),n("d81d"),n("99af"),n("96cf"),n("1bd6")),c=n("46f9"),l=n("c1df"),u=n.n(l),m=n("09de"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"password-container"},[t._m(0),n("x-form",{staticClass:"password-form",attrs:{values:t.form},on:{submit:t.saveForm},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("div",{staticClass:"password-form-inputs"},[n("x-input",{attrs:{label:"Текущий пароль",type:"password",name:"currentPassword",validation:"required","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Придумайте пароль",type:"password",name:"password",validation:"min:8,length","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Повторите пароль",type:"password",name:"password_confirm",validation:"min:8,length|confirm","validation-name":"Password confirmation","error-behavior":"submit"}})],1),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"primary",block:"","html-type":"submit"}},[t._v(" Сохранить ")])],1)],1)},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"password-container--title"},[n("h4",[t._v("Смена пароля")])])}],f={data:function(){return{loading:!1,form:{currentPassword:"",password:"",password_confirm:""}}},methods:{saveForm:function(){}}},v=f,h=(n("908d"),n("2877")),_=Object(h["a"])(v,p,d,!1,null,"39e6083a",null),b=_.exports,g=n("09bc"),x=n("cd3f"),y=n.n(x),C=n("f729"),w={components:{UploadPhoto:m["a"],ApplicationForm:o["a"],ComponentTabs:c["a"],ChangePassword:b},mixins:[C["a"]],data:function(){return{loading:!0,educationForm:g["f"],form:{}}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getNominations();case 2:t.form=y()(t.userInfo),t.renderForm(),t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},methods:{getGender:function(t){return"male"===t?"Мужской":"Женский"},getBirthday:function(t){return t.split("-").reverse().join("-")},renderForm:function(){this.form.citizenshipCheckbox="РФ"!=this.form.citizenship?"Другое":"РФ",this.form.form_education=[this.form.form_education],this.form.nomination=this.form.nomination.map((function(t){return"".concat(t.id)}))},getNominations:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("app/getEntities",{entityName:"nomination"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},saveForm:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=y()(Object(r["a"])(Object(r["a"])({},t.form),{},{citizenship:"РФ"===t.form.citizenshipCheckbox?"РФ":t.form.citizenship,form_education:t.form.form_education[0]})),delete n.user_avatar,e.next=6,t.$store.dispatch("app/saveEntity",{entityName:"users",data:n,method:"patch",id:n.id});case 6:return e.next=8,t.$store.dispatch("user/getUserData");case 8:t.$toast.success("Успешно сохранено"),t.$router.push("/profile"),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),console.log(e.t0),400===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)?t.$errors.show(e.t0.response.data):t.$errors.showOnce("Ошибка входа");case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})))()}},computed:{userInfo:function(){return this.$store.state.user.userInfo},getFullName:function(){var t=this.userInfo,e=t.first_name,n=t.last_name,a=t.patronymic;return"".concat(e," ").concat(n," ").concat(a)},getAge:function(){return u()().diff(this.userInfo.date_birth,"years")},activePage:function(){return this.$route.meta.tabName}}},k=w,q=(n("d80a"),Object(h["a"])(k,a,i,!1,null,"cd1bed56",null));e["default"]=q.exports},"894dc":function(t,e,n){},"8ba8":function(t,e,n){},"908d":function(t,e,n){"use strict";n("2cbe")},"9bdd":function(t,e,n){var a=n("825a"),i=n("2a62");t.exports=function(t,e,n,r){try{return r?e(a(n)[0],n[1]):e(n)}catch(s){throw i(t),s}}},"9ebe":function(t,e,n){"use strict";n("b60a")},a630:function(t,e,n){var a=n("23e7"),i=n("4df4"),r=n("1c7e"),s=!r((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:s},{from:i})},a8f3:function(t,e,n){"use strict";n("3d50")},b166:function(t,e,n){},b48b:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},t._l(t.files,(function(e){return n("div",{key:e.name,staticClass:"file-container__files--file"},[n("v-icon",{attrs:{name:"file"}}),n("span",[t._v(t._s(e.name))]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(n){return t.removeFiles(e)}}})],1)})),0),n("FormulateInput",{staticClass:"document-uploader user-upload not-active achievement",attrs:{"label-class":"document-label",name:"documents",type:"file",validation:"mime:"+t.acceptFormat.join(",")+"|download","validation-rules":{download:function(e){e.value;return t.files.length}},"validation-messages":{download:"Загрузите документ"}},scopedSlots:t._u([{key:"element",fn:function(){return[n("input",{ref:"files",staticClass:"document-uploader--input",attrs:{type:"file",multiple:t.multiple,accept:t.acceptFormat.join(","),isDrag:t.dragHover},on:{dragover:function(e){t.dragHover=!0},dragleave:function(e){t.dragHover=!1},dragend:function(e){t.dragHover=!1},drop:t.setFile,change:t.setFile}}),n("label",{staticClass:"document-uploader--custom",attrs:{name:"file",for:"upload"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[t._v(t._s(t.title||t.getLabel))])],1)]},proxy:!0}])})],1)},i=[],r=n("1da1"),s=(n("96cf"),n("a434"),n("c740"),n("b0c0"),n("159b"),n("7db0"),n("caad6"),n("2532"),n("09bc")),o={props:{multiple:{type:Boolean},title:{type:String,required:!1},acceptFormats:{type:Array,required:!1}},data:function(){return{dragHover:!1,uploadPercentage:0,files:[],acceptFormat:this.acceptFormats?this.acceptFormats:s["a"]}},computed:{getLabel:function(){return this.dragHover?"Перетащите сюда":"Прикрепить файл"}},methods:{removeFiles:function(t){this.files.splice(this.files.findIndex((function(e){return e.name===t.name})),1)},setFile:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(e.acceptFormat),e.dragHover=!1,!e.multiple){n.next=7;break}t.target.files.forEach((function(t,n){e.files.find((function(e){return console.log(e,t),e.name===t.name})),e.files.find((function(e){return e.name===t.name}))||(e.acceptFormat.includes(t.type)?e.files.push(t):e.$toast.error("Неккоректный формат"))})),e.$emit("change",e.files),n.next=17;break;case 7:if(a=t.target.files,a.length){n.next=10;break}return n.abrupt("return");case 10:if(console.log(a[0]),e.acceptFormat.includes(a[0].type)){n.next=14;break}return e.$toast.error("Неккоректный формат"),n.abrupt("return");case 14:e.files=[t.target.files[0]],e.$refs.files.value=null,e.$emit("change",e.files);case 17:case"end":return n.stop()}}),n)})))()}}},c=o,l=n("2877"),u=Object(l["a"])(c,a,i,!1,null,"ea9a5438",null);e["a"]=u.exports},b60a:function(t,e,n){},b641:function(t,e,n){"use strict";n("b166")},bb8d:function(t,e,n){"use strict";var a=n("1da1"),i=n("ade3"),r=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("ac1f"),n("1276"),n("c740"),n("498a"),n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"document-container"},[n("h6",{staticClass:"document-title"},[t._v(" "+t._s(t.indicator.name)+" ")]),t.indicator.hint_text?n("div",{staticClass:"document-clue"},[t._v(" "+t._s(t.indicator.hint_text)+" ")]):t._e(),n("div",[n("ol",{staticClass:"achievement-list"},[t._l(t.indicator.achievements,(function(e,a){return n("upload-achievements-item-info",{key:e.id,attrs:{position:a+1,participationDegree:t.participationDegree,setFiles:t.setFiles,item:e,disabled:!0,indicator:t.indicator},on:{remove:function(e){return t.$emit("remove",e)}}})})),n("x-form",{attrs:{values:t.form,name:"achievement"},on:{submit:function(e){return t.submit(t.indicator.id)}},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("upload-achievements-item",{key:t.achievements.length+1,attrs:{setFiles:t.setFiles,position:t.achievements.length+1,participationDegree:t.participationDegree,indicator:t.indicator}})],1)],2)])])}),s=[],o=n("5530"),c=n("b48b"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"achievement-list__item only-achievements"},[t.isVisible?t._e():n("div",{staticClass:"achievement-list__item--info"},[n("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[n("span",{staticClass:"count"},[t._v(t._s(t.position))]),n("x-input",{staticClass:"item-name",attrs:{name:"name",type:"text",validation:"required",label:"Название достижения","error-behavior":"submit"}}),t.indicator.degree_participation?n("x-input",{staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:t.participationDegree,label:"Степень участия","error-behavior":"submit"}}):t._e(),n("x-input",{staticClass:"item-period",attrs:{name:"period",type:"select",validation:"required",options:t.getPeriod,label:"Год","error-behavior":"submit"}})],1),n("div",{staticClass:"achievement-list__item--info--block"},[t.indicator.url?n("x-input",{staticStyle:{width:"100%"},attrs:{type:"url",name:"url",validation:"required",label:"Вставьте ссылку на видео","error-behavior":"submit"}}):t._e()],1),n("div",{staticClass:"achievement-list__item--info--block"},[t.indicator.document?n("file-component",{on:{change:function(e){return t.setFiles(e)}}}):t._e()],1),n("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[t._v("Сохранить данные достижения")])],1)],1)])},u=[],m=(n("a9e3"),{components:{FileComponent:c["a"]},props:{participationDegree:{type:Array,required:!0},position:{type:Number,required:!0},setFiles:{type:Function,required:!1},indicator:{type:Object,required:!0}},computed:{isVisible:function(){return this.indicator.max_count_achievement===this.indicator.achievements.length},getPeriod:function(){for(var t=this.indicator.period,e=t.start_achievement,n=t.finish_achievement,a=[],i=e;i<=n;i++)a.push(i);return a}}}),p=m,d=(n("254d"),n("2877")),f=Object(d["a"])(p,l,u,!1,null,"2183febc",null),v=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("span",{staticClass:"count"},[t._v(t._s(t.position))]),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("Удалить достижение")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:t.deleteAchievement}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[t._v(t._s(t.item.name))])]),t.item.degree_participation?n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[t._v(t._s(t.item.degree_participation))])]):t._e(),n("div",{staticClass:"achievement-list__item--read--item item-period"},[n("span",[t._v(t._s(t.item.period))])])]),t.item.url?n("div",{staticClass:"achievement-list__item--read--item"},[n("a",{attrs:{href:t.item.url,target:"_blank"}},[t._v(t._s(t.item.url))])]):t._e(),t.item.documents.length?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},[n("a",{staticClass:"file-container__files--file",attrs:{href:t.getDocumentLink(t.item.documents[0].document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[t._v(t._s(t.item.documents[0].documentName))])],1)])]):t._e()])},_=[],b=(n("99af"),"https://студентгода63.рф/media"),g={components:{FileComponent:c["a"]},data:function(){return{media:b}},props:{participationDegree:{type:Array,required:!0},position:{type:Number,required:!0},setFiles:{type:Function,required:!1},item:{type:Object,required:!0}},methods:{getDocumentLink:function(t){return"".concat(this.media,"/").concat(t)},deleteAchievement:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0});case 2:n=e.sent,a=n.isConfirmed,a&&t.$emit("remove",t.item.id);case 5:case"end":return e.stop()}}),e)})))()}}},x=g,y=(n("1f31"),Object(d["a"])(x,h,_,!1,null,"143f06f0",null)),C=y.exports,w={components:{UploadAchievementsItem:v,FileComponent:c["a"],UploadAchievementsItemInfo:C},props:{achievements:{type:Array,required:!0},participationDegree:{type:Array,required:!0},indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0}},data:function(){return{form:{}}},methods:{setFiles:function(t){this.form.documents=t},submit:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.saveAchievement(Object(o["a"])(Object(o["a"])({},e.form),{},{indicators:t}),"achievement");case 3:e.form={},n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),console.log(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()}}},k=w,q=(n("3e35"),n("5c7b"),Object(d["a"])(k,r,s,!1,null,null,null)),R=q.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"document-container upload-spec-org"},[n("h6",{staticClass:"document-title"},[t._v(" "+t._s(t.indicator.name)+" ")]),t.indicator.hint_text?n("div",{staticClass:"document-clue"},[t._v(" "+t._s(t.indicator.hint_text)+" ")]):t._e(),n("div",[t.achievements.length?n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("Удалить достижение")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:t.deleteAchievement}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[t._v("Название достижения")]),n("span",[t._v(t._s(t.achievements[0].name))])]),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[t._v("Наименование ассоциации")]),n("span",[t._v(t._s(t.achievements[0].name_association))])]),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[t._v("Образовательная организация")]),n("span",[t._v(t._s(t.achievements[0].educational_organization))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[t._v("Год основания")]),n("span",[t._v(t._s(t.achievements[0].year_foundation))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[t._v("Характеристика")]),n("span",[t._v(t._s(t.achievements[0].brief_description_association))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[t._v("Участники")]),n("ul",{staticClass:"participation-person-list"},t._l(t.achievements[0].full_name,(function(e,a){return n("li",{key:a,staticClass:"participation-person-list--item"},[n("span",[t._v(t._s(e[0]))]),n("span",[t._v(t._s(e[1]))])])})),0)]),n("div",{staticClass:"achievement-list__item--read--item item-period"},[n("span",[t._v("Кол-во участников")]),n("span",[t._v(t._s(t.achievements[0].number_participants))])])]),t.achievements[0].documents.length?n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-container__files"},t._l(t.achievements[0].documents,(function(e){return n("a",{key:e.id,staticClass:"file-container__files--file",attrs:{href:t.getDocumentLink(e.document),target:"_blank"}},[n("v-icon",{attrs:{name:"file"}}),n("span",[t._v(t._s(e.documentName))])],1)})),0)]):t._e()]):n("x-form",{staticClass:"achievement-spec",attrs:{values:t.form,name:"spec"},on:{submit:function(e){return t.submit(t.indicator.id)}},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("div",{staticClass:"achievement-spec-block"},[n("x-input",{attrs:{type:"text",name:"name",label:"Название достижения",validation:"required"}})],1),n("upload-spec-description"),n("upload-spec-participant",{attrs:{participants:t.participants,participationDegree:t.participationDegree},on:{"remove-participant":t.removeParticipant,"add-participant":t.addParticipant}}),n("div",{staticClass:"achievement-spec-block"},[n("x-input",{attrs:{type:"number",name:"number_participants",label:"Кол-во участников",validation:"required|number|min:0|max:50",min:"0",max:"200"}})],1),n("div",{staticClass:"achievement-spec-block"},[n("file-component",{attrs:{multiple:""},on:{change:function(e){return t.setFiles(e)}}})],1),n("a-button",{staticClass:"document-container-button spec-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[t._v("Сохранить данные достижения")])],1)],1)],1)])},j=[],$=(n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ol",{staticClass:"achievement-spec-block spec-participant"},[t._l(t.participants,(function(e,a){return n("li",{key:e.fullname,staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("span",{staticClass:"count"},[t._v(t._s(a+1))]),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("Удалить участника")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(e){return t.deleteParticipant(a)}}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[t._v(t._s(e.fullname))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[t._v(t._s(e.degree_participation))])])])])})),t.loading?t._e():n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--info"},[n("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[n("x-form",{staticClass:"achievement-spec-block--form",attrs:{name:"participantForm"},on:{submit:t.addParticipant},model:{value:t.participantForm,callback:function(e){t.participantForm=e},expression:"participantForm"}},[n("div",{staticClass:"achievement-spec-block--form-item"},[n("span",{staticClass:"count"},[t._v(t._s(t.participants.length+1))]),n("x-input",{staticClass:"item-name",attrs:{name:"fullname",type:"text",validation:"isFullName",label:"ФИО участника","validation-rules":{isFullName:function(t){var e=t.value;return 3===e.trim().split(" ").length}},"validation-messages":{isFullName:"Введите ФИО"},"error-behavior":"submit"}}),n("x-input",{staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:t.participationDegree,label:"Степень участия","error-behavior":"submit"}})],1),n("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[t._v("Добавить участника")])],1)],1)],1)])])],2)}),O=[],A={props:{participationDegree:{type:Array,required:!0},participants:{type:Array,required:!0}},data:function(){return{loading:!1,participantForm:{}}},methods:{addParticipant:function(){var t=this;this.loading=!0,this.$emit("add-participant",Object(o["a"])({},this.participantForm)),setTimeout((function(){t.participantForm={},t.loading=!1}),0)},deleteParticipant:function(t){this.$emit("remove-participant",t)}}},D=A,N=(n("9ebe"),Object(d["a"])(D,$,O,!1,null,null,null)),I=N.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"achievement-spec-block achievement-spec-block--descirption"},[n("x-input",{staticClass:"item-name",attrs:{name:"name_association",type:"text",validation:"required",label:"Наименование ассоциации","error-behavior":"submit"}}),n("x-input",{staticClass:"item-participation",attrs:{name:"educational_organization",type:"text",validation:"required",label:"Образовательная организация","error-behavior":"submit"}}),n("x-input",{staticClass:"item-period",attrs:{name:"year_foundation",type:"number",min:"1900",max:"2100",validation:"required:min:1900|max:2100",label:"Год основания","error-behavior":"submit"}}),n("x-input",{staticClass:"item-period",attrs:{name:"brief_description_association",type:"textarea",validation:"required",label:"Характеристика","error-behavior":"submit"}})],1)},E=[],S={},z=S,T=(n("5904"),Object(d["a"])(z,P,E,!1,null,null,null)),U=T.exports,B="https://студентгода63.рф/media",Q={components:{FileComponent:c["a"],UploadSpecParticipant:I,UploadSpecDescription:U},props:{participationDegree:{type:Array,required:!0},indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},achievements:{type:Array,required:!0}},data:function(){return{media:B,form:{},participants:[]}},methods:{getDocumentLink:function(t){return"".concat(this.media,"/").concat(t)},setFiles:function(t){this.form.documents=t},submit:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a=e.participants.map((function(t){return[t.fullname,t.degree_participation]})),n.next=4,e.saveAchievement(Object(o["a"])(Object(o["a"])({},e.form),{},{full_name:a,indicators:t}),"spec");case 4:e.form={},n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},deleteAchievement:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0});case 2:n=e.sent,a=n.isConfirmed,a&&t.$emit("remove",t.achievements[0].id);case 5:case"end":return e.stop()}}),e)})))()},addParticipant:function(t){this.participants.push(t)},removeParticipant:function(t){this.participants.splice(t,1)}}},L=Q,V=(n("4475"),Object(d["a"])(L,F,j,!1,null,null,null)),W=V.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"document-container upload-spec-org"},[n("h6",{staticClass:"document-title"},[t._v(" "+t._s(t.indicator.name)+" ")]),n("div",[t.achievements.length?n("li",{staticClass:"achievement-list__item"},[n("div",{staticClass:"achievement-list__item--read"},[n("div",{staticClass:"achievement-list__item--tools"},[n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("Удалить достижение")])]),n("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:t.deleteAchievement}})],2)],1),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[t._v("Название достижения")]),n("span",[t._v(t._s(t.achievements[0].name))])]),n("div",{staticClass:"achievement-list__item--read--item item-name"},[n("span",[t._v("ФИО организатора")]),n("span",[t._v(t._s(t.achievements[0].full_name_head_organization))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[t._v("Курс")]),n("span",[t._v(t._s(t.achievements[0].course_head_organization))])]),n("div",{staticClass:"achievement-list__item--read--item item-participation"},[n("span",[t._v("Номер телефона")]),n("span",[t._v(t._s(t.achievements[0].phone_head_organization))])]),n("div",{staticClass:"achievement-list__item--read--item item-period"},[n("span",[t._v("E-mail")]),n("span",[t._v(t._s(t.achievements[0].email_head_organization))])])])]):n("x-form",{attrs:{values:t.form,name:"spec-org"},on:{submit:function(e){return t.submit(t.indicator.id)}},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("x-input",{attrs:{type:"text",name:"name",label:"Название достижения",validation:"required"}}),n("x-input",{attrs:{type:"text",name:"full_name_head_organization",label:"ФИО организатора",validation:"isFullName","validation-rules":{isFullName:function(t){var e=t.value;return 3===e.trim().split(" ").length}},"validation-messages":{isFullName:"Введите ФИО"}}}),n("x-input",{attrs:{type:"select",options:[1,2,3,4,5,6],name:"course_head_organization",label:"Курс",validation:"required"}}),n("x-input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"`+7 (###) ###-##-##`"}],attrs:{type:"tel",name:"phone_head_organization",label:"Номер телефона",validation:[["required"],["min","18"]]}}),n("x-input",{attrs:{type:"email",name:"email_head_organization",label:"E-mail",validation:"required"}}),n("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[n("v-icon",{attrs:{name:"plus"}}),n("span",[t._v("Сохранить данные достижения")])],1)],1)],1)])},M=[],G=n("3a60"),J={directives:{mask:G["mask"]},components:{FileComponent:c["a"],UploadSpecParticipant:I,UploadSpecDescription:U},props:{indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},achievements:{type:Array,required:!0}},data:function(){return{form:{}}},methods:{submit:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.saveAchievement(Object(o["a"])(Object(o["a"])({},e.form),{},{indicators:t}),"spec-org");case 3:e.form={},n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),console.log(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},deleteAchievement:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0});case 2:n=e.sent,a=n.isConfirmed,a&&t.$emit("remove",t.achievements[0].id);case 5:case"end":return e.stop()}}),e)})))()}}},K=J,X=Object(d["a"])(K,H,M,!1,null,null,null),Y=X.exports,Z=n("46f9"),tt=n("cd3f"),et=n.n(tt),nt=n("09bc"),at=n("5b55");e["a"]={components:{Upload:R,ComponentTabs:Z["a"],UploadSpec:W,UploadSpecOrg:Y},data:function(){var t;return t={loading:!0,participationDegree:nt["l"],buttonDisabled:!1},Object(i["a"])(t,"loading",!1),Object(i["a"])(t,"indicators",[]),Object(i["a"])(t,"activeNomination",null),t},computed:{userInfo:function(){return this.$store.state.user.userInfo},initialIndicators:function(){return this.$store.state.app.indicator},getMessage:function(){switch("create"){case"create":return"Успешно создано";case"edit":return"Успешно сохранено"}}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.dispatch("user/getUserData");case 3:return e.next=5,t.changeNomination(t.userInfo.nomination[0].id);case 5:case"end":return e.stop()}}),e)})))()},methods:{changeNomination:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.activeNomination=t,n.next=3,e.getIndicatorsByNomination(e.activeNomination);case 3:return n.next=5,e.getAchievementsToIndicators(e.initialIndicators);case 5:e.indicators=n.sent,console.log(e.indicators),e.loading=!1;case 8:case"end":return n.stop()}}),n)})))()},getIndicatorsByNomination:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("app/getEntities",{entityName:at["b"],params:{nomination:t}});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},getAchievementsToIndicators:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(t.map((function(t){return new Promise(function(){var n=Object(a["a"])(regeneratorRuntime.mark((function n(a){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("app/getEntities",{entityName:at["a"],params:{indicator:t.id}});case 2:i=n.sent,t.achievements=i.data.map((function(t){return t.documents&&(t.documents=e.renderDocuments(t.documents)),t})),a(t);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},renderDocuments:function(t){var e=this;return t.map((function(t){return t.documentName=e.addDocumentName(t.document),t}))},getFormData:function(t,e){var n=new FormData;for(var a in"spec"===e&&(t.full_name.map((function(t,e){n.append("full_name[".concat(e,"][0]"),t[0]),n.append("full_name[".concat(e,"][1]"),t[1])})),delete t.full_name),t)"documents"===a?t[a].map((function(t){n.append("documents",t)})):n.append(a,t[a]);return n},saveAchievement:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,i=n.getFormData(et()(t),e),console.log(t),a.next=5,n.saveEntity(i,e);case 5:a.next=10;break;case 7:throw a.prev=7,a.t0=a["catch"](0),a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},saveEntity:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n.buttonDisabled=!0,a.next=4,n.$store.dispatch("app/saveEntity",{data:t,method:"post",entityName:at["a"]});case 4:i=a.sent,n.addNewFields(i),n.$toast.success(n.getMessage),a.next=14;break;case 9:throw a.prev=9,a.t0=a["catch"](0),console.log(a.t0,e),n.$formulate.handle(a.t0.response.data,e),a.t0;case 14:return a.prev=14,n.buttonDisabled=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[0,9,14,17]])})))()},addDocumentName:function(t){if(t){var e=t.split("/");return e[e.length-1]}},addNewFields:function(t){t.documents&&(t.documents=this.renderDocuments(t.documents));var e=this.indicators.findIndex((function(e){return t.indicators===e.id})),n=this.indicators[e];n.achievements.push(t)},removeAchievement:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,n.next=4,e.$store.dispatch("app/deleteItem",{entityName:at["a"],id:t});case 4:return n.next=6,e.changeNomination(e.activeNomination);case 6:e.$swal("Успешно удалено!"),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0),e.$errors.showOnce(n.t0.response.data);case 13:return n.prev=13,e.loading=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})))()},editAchievement:function(){},trimWhitespaces:function(t){for(var e in t)t[e]===String&&t[e].trim()},onApplicate:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$swal.fire({title:"Отправить завку на конкурс?",text:"После подтверждения действия Вы не сможете редактировать введенные данные",showCancelButton:!0,confirmButtonText:"Отправить",cancelButtonText:"Отмена"});case 2:n=e.sent,n.isConfirmed;case 4:case"end":return e.stop()}}),e)})))()}}}},c155:function(t,e,n){},cabe:function(t,e,n){"use strict";n("dcfc")},cd22:function(t,e,n){},cfdd:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("x-form",{staticClass:"participantQuestionnaire",attrs:{values:t.participantQuestionnaire,name:"participant-questionnaire container"},model:{value:t.participantQuestionnaire,callback:function(e){t.participantQuestionnaire=e},expression:"participantQuestionnaire"}},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("h2",{staticClass:"page-title"},[t._v("Редактирование")]),n("component-tabs")],1),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",{staticClass:"container-body"},[t._l(t.questionnaries,(function(e){return n("Upload",{key:e.id,ref:"questionnaries",refInFor:!0,attrs:{isProfile:t.isProfile,questionnaire:e}})})),n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.buttonDisabled,type:"info",block:"","html-type":"submit"},on:{click:function(e){return t.onApplicate("profile")}}},[t._v(" Сохранить и выйти ")]),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.buttonDisabled,type:"primary",block:""},on:{click:function(e){return t.onApplicate("profile/achievements")}}},[t._v(" Сохранить и продолжить ")])],1)],2)],1)],1)],1)},i=[],r=n("46f9"),s=n("5f74"),o={components:{ComponentTabs:r["a"]},mixins:[s["a"]]},c=o,l=(n("5ef0"),n("2877")),u=Object(l["a"])(c,a,i,!1,null,null,null);e["default"]=u.exports},d28b:function(t,e,n){var a=n("746f");a("iterator")},d80a:function(t,e,n){"use strict";n("cd22")},daa8:function(t,e,n){"use strict";n("4032")},dcb8:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container profile-info"},[t.userInfo?n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"head"},[n("div",{staticClass:"head__photo"},[t.userInfo.user_avatar?n("img",{attrs:{src:t.media+"/"+t.userInfo.user_avatar,alt:"Аватар студента"}}):n("v-icon",{attrs:{name:"camera"}})],1),n("div",{staticClass:"head__info"},[n("h2",[t._v(t._s(t.getFullName))]),n("div",{staticClass:"head__info__indicators"},[n("span",[t._v(t._s(t.getAge)+" лет")]),n("span",{staticClass:"points"},[t._v(t._s(t.userInfo.district))]),n("span",[t._v(t._s(t.userInfo.course_education)+" курс")])]),n("div",{staticClass:"inline-buttons"},[n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("Подача анкет скоро начнется")])]),n("a-button",{staticClass:"login-form-button button-disabled",attrs:{disabled:"",type:"primary",block:""}},[t._v(" Отправить заявку на конкурс ")])],2),n("router-link",{staticClass:"button-link",attrs:{to:"/profile/edit"}},[n("a-button",{staticClass:"login-form-button",attrs:{type:"info",block:"","html-type":"submit"}},[t._v(" Редактировать анкету ")])],1)],1)])]),n("profile-steps",{attrs:{currentStep:0}}),n("profile-nomination",{attrs:{nominations:t.userInfo.nomination}}),t._l(t.infos,(function(e,a){return n("profile-infoblock",{key:a,attrs:{userInfo:t.userInfo,data:e.info,title:e.title}})}))],2)],1):t._e()],1)},i=[],r=(n("a15b"),n("ac1f"),n("1276"),n("7db0"),n("c1f9"),n("4de4"),n("4fad"),n("498a"),n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"profile-steps"},t._l(t.steps,(function(e,a){return n("div",{key:e.name,class:"profile-steps__step "+t.getStepClass(e.id)},[n("div",{staticClass:"profile-steps__step--count"},[t._v(t._s(a+1))]),n("div",{staticClass:"inline"},[n("div",{staticClass:"profile-steps__step--name",style:t.getStyle(e)},[t._v(t._s(e.name))]),t.showPrompt(e.id)?n("div",{staticClass:"profile-steps__step--prompt"},[t._v(" "+t._s(e.prompt)+" ")]):t._e()])])})),0)}),s=[],o=(n("a9e3"),{props:{currentStep:{type:Number,required:!1}},data:function(){return{steps:[{id:0,name:"Заполнение заявки",color:"#d88ca8",prompt:"Поздравляем! Вы успешно прошли этап регистрации"},{id:1,name:"На рассмотрении",prompt:"Ваша заявка на конкурс проверяется экспертами",color:"#0094B3"},{id:2,name:"Участник заочного этапа",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#797dea"},{id:3,name:"Участник очного этапа",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#6E2C6B"},{id:4,name:"Номинант",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#E62D3B"},{id:5,name:"Лауреат",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#FCD800 "},{id:6,name:"Победитель",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#459D27 "}]}},methods:{getStepClass:function(t){return t<this.currentStep?"profile-steps__step--award":t===this.currentStep?"profile-steps__step--current":t>this.currentStep?"profile-steps__step--not-award":void 0},showPrompt:function(t){return t<=this.currentStep},getStyle:function(t){return{background:this.showPrompt(t.id)?t.color:"transparent"}}}}),c=o,l=(n("cabe"),n("2877")),u=Object(l["a"])(c,r,s,!1,null,"79d057f3",null),m=u.exports,p=n("1359"),d=n("f60b"),f=n("09bc"),v=n("bfd1"),h=n("c1df"),_=n.n(h),b="https://студентгода63.рф/media",g={mixins:[v["a"]],components:{ProfileSteps:m,ProfileNomination:p["a"],ProfileInfoblock:d["a"]},data:function(){return{media:b,educationPlace:f["g"]}},methods:{getGender:function(t){return"male"===t?"Мужской":"Женский"},getBirthday:function(t){return t.split("-").reverse().join("-")},getPlaceEducation:function(t){return this.educationPlace.find((function(e){return e.value===t})).label}},computed:{userInfo:function(){return Object.fromEntries(Object.entries(this.$store.state.user.userInfo).filter((function(t){return t[1]})))},getFullName:function(){var t=this.userInfo,e=t.first_name,n=t.last_name,a=t.patronymic;return"".concat(e," ").concat(n," ").concat(a||"").trim()},getAge:function(){return _()().diff(this.userInfo.date_birth,"years")}}},x=g,y=(n("ec19"),Object(l["a"])(x,a,i,!1,null,"734125f9",null));e["default"]=y.exports},dcfc:function(t,e,n){},e01a:function(t,e,n){"use strict";var a=n("23e7"),i=n("83ab"),r=n("da84"),s=n("5135"),o=n("861d"),c=n("9bf2").f,l=n("e893"),u=r.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var m={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(m[e]=!0),e};l(p,u);var d=p.prototype=u.prototype;d.constructor=p;var f=d.toString,v="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;c(d,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=f.call(t);if(s(m,t))return"";var n=v?e.slice(7,-1):e.replace(h,"$1");return""===n?void 0:n}}),a({global:!0,forced:!0},{Symbol:p})}},eb47:function(t,e,n){},ec19:function(t,e,n){"use strict";n("3a12")},f8a1:function(t,e,n){}}]);