(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b0a0734"],{"2dd8":function(t,e,a){"use strict";var r=a("5530"),n=a("1da1");a("498a"),a("99af"),a("96cf");e["a"]={data:function(){return{loading:!0,buttonDisabled:!1}},methods:{getEntity:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,e.$store.dispatch("app/getItem",{entityName:e.entityName,id:e.getID});case 4:if(n=a.sent,!t){a.next=7;break}return a.abrupt("return",n.data);case 7:e.formData=Object(r["a"])(Object(r["a"])({},e.formData),n.data),console.log(e.formData),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},trimWhitespaces:function(t){for(var e in t)t[e]===String&&t[e].trim()},saveEntity:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.buttonDisabled=!0,e.trimWhitespaces(e.formData),a.next=5,e.$store.dispatch("app/saveEntity",{id:e.getID,data:t||e.formData,method:e.method,entityName:e.entityName});case 5:r=a.sent,e.$toast.success(e.getMessage),e.$router.push("/".concat(e.entityName,"/read/").concat(r.id)),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0),e.$errors.showOnce(a.t0.response.data);case 14:return a.prev=14,e.buttonDisabled=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[0,10,14,17]])})))()},deleteItem:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,e.$store.dispatch("app/deleteItem",{entityName:e.entityName,id:t});case 4:e.$toast.success("Успешно удалено"),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.log(a.t0),e.$errors.showOnce(a.t0.response.data);case 11:return a.prev=11,e.loading=!1,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,7,11,14]])})))()}},computed:{disabled:function(){return"read"===this.action},getID:function(){if("_"!==this.id)return this.id},method:function(){switch(this.action){case"create":return"post";case"edit":return"patch";default:return null}},getButtonAction:function(){switch(this.action){case"create":return"Создать";case"read":return"Редактировать";case"edit":return"Сохранить"}},getAction:function(){switch(this.action){case"create":return"Создание";case"read":return"Просмотр";case"edit":return"Редактирование"}},getMessage:function(){switch(this.action){case"create":return"Успешно создано";case"edit":return"Успешно сохранено"}}}}},3603:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("x-crud",{attrs:{loading:t.loading}},[a("x-form",{attrs:{values:t.formData},on:{submit:t.onsubmit},model:{value:t.formData,callback:function(e){t.formData=e},expression:"formData"}},[a("a-row",{attrs:{gutter:[24,24]}},[a("a-col",{staticClass:"col-form",attrs:{md:{span:22,offset:0},lg:{span:22,offset:0},xl:{span:22,offset:0}}},[a("x-input",{attrs:{label:"Название",name:"name",type:"text",validation:"required",disabled:t.disabled}}),a("x-input",{attrs:{label:"Подсказка для предметов",name:"first_help_text",type:"textarea",disabled:t.disabled,validation:"required|max:"+t.textareaMaxLength+",length",help:t.formData.first_help_text&&"Максимально "+t.textareaMaxLength+". "+(t.textareaMaxLength-t.formData.first_help_text.length<=0?0:t.textareaMaxLength-t.formData.first_help_text.length)+" символось осталось."}}),a("x-input",{attrs:{label:"Подсказка для файлов",name:"second_help_text",type:"textarea",disabled:t.disabled,validation:"required|max:"+t.textareaMaxLength+",length",help:t.formData.second_help_text&&"Максимально "+t.textareaMaxLength+". "+(t.textareaMaxLength-t.formData.second_help_text.length<=0?0:t.textareaMaxLength-t.formData.second_help_text.length)+" символось осталось."}})],1),a("a-col",{attrs:{span:"6"}},[a("div",{staticClass:"crud-form-button"},[a("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[t._v(" "+t._s(t.getButtonAction)+" ")])],1)])],1)],1)],1)},n=[],i=a("1da1"),s=(a("96cf"),a("2dd8")),o={props:["action","id"],mixins:[s["a"]],data:function(){return{formData:{},entityName:"indicator-report-card",textareaMaxLength:1024}},methods:{onsubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("read"!==t.action){e.next=3;break}return t.$router.push("/indicator-report-card/edit/".concat(t.id)),e.abrupt("return");case 3:return e.next=5,t.saveEntity(t.formData);case 5:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("create"===t.action){e.next=3;break}return e.next=3,t.getEntity();case 3:t.loading=!1,console.log(t.action,t.id,t.disabled);case 5:case"end":return e.stop()}}),e)})))()}},c=o,u=a("2877"),d=Object(u["a"])(c,r,n,!1,null,"bfd6bfb0",null);e["default"]=d.exports},"498a":function(t,e,a){"use strict";var r=a("23e7"),n=a("58a8").trim,i=a("c8d2");r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},c8d2:function(t,e,a){var r=a("d039"),n=a("5899"),i="​᠎";t.exports=function(t){return r((function(){return!!n[t]()||i[t]()!=i||n[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-4b0a0734.0c933287.js.map