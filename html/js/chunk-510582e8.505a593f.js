(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-510582e8"],{"09de":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"photo-container"},[n("Avatar",{attrs:{userInfo:e.userInfo,avatarSrc:e.userInfo.user_avatar?e.media+"/"+e.userInfo.user_avatar:null}}),e._m(0)],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"photo-container--description"},[e._v(" Изображение должно быть четкое, положение фотографируемого в анфас "),n("br"),n("br"),e._v(" Лицо фотографируемого должно занимать не менее трети свободной площади фотографии "),n("br"),n("br"),e._v(" Фотографируемый должен быть равномерно освещен для получения отличной детализации лица "),n("br"),n("br"),e._v(" Выражение лица спокойное "),n("br"),n("br"),e._v(" Взгляд направлен прямо (в объектив фотокамеры), глаза не должны быть закрыты или прищурены "),n("br"),n("br"),e._v(" На фотографии не допускаются затемненные очки, головные уборы, а также элементы одежды, которые, так или иначе, скрывают части лица или волос. "),n("br"),n("br"),e._v(" Изображение на фотографии - цветное "),n("br"),n("br"),e._v(" Количество человек, изображенных на фотографии, не должно быть более одного "),n("br"),n("br")])}],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"photo-upload-container"},[n("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar1","list-type":"picture-card","show-upload-list":!1,accept:"image/jpeg,image/png,image/heic","before-upload":e.beforeUpload,action:"/api/v1/users/999999"},on:{change:e.handleChange}},[e.avatarSrc?n("img",{attrs:{src:e.avatarSrc,alt:"avatar"}}):n("div",[n("v-icon",{attrs:{name:"camera"}})],1)]),n("div",{staticClass:"help-text"},[e._v("Нажмите, чтобы прикрепить (до 5МБ)")])],1)},o=[],s=n("1da1");n("96cf");function u(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)}var c={props:{avatarSrc:{type:String,required:!1},userInfo:{type:Object,required:!0}},data:function(){return{loading:!1,fileList:[]}},methods:{handleChange:function(e){var t=this;console.log(e.file.status),"uploading"!==e.file.status?"error"===e.file.status&&u(e.file.originFileObj,function(){var n=Object(s["a"])(regeneratorRuntime.mark((function n(a){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=new FormData,r.append("user_avatar",e.file.originFileObj),n.prev=2,n.next=5,t.saveEntity(r);case 5:i=n.sent,t.$store.commit("user/SET_USER_INFO",i),console.log(t.avatarSrc),t.$toast.success("Успешно сохранено"),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),console.log(n.t0);case 14:return n.prev=14,t.loading=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,11,14,17]])})));return function(e){return n.apply(this,arguments)}}()):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/heic"===e.type||"image/heif"===e.type;t||this.$toast.error("Некорректный формат");var n=e.size/1024/1024<5;return n||this.$toast.error("Фото должно быть меньше 5мб"),t&&n},saveEntity:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.abrupt("return",t.$store.dispatch("app/saveEntity",{data:e,method:"patch",entityName:"users",id:t.userInfo.id}));case 4:throw n.prev=4,n.t0=n["catch"](0),n.t0;case 7:case"end":return n.stop()}}),n,null,[[0,4]])})))()}}},l=c,f=(n("6233"),n("63f0"),n("2877")),d=Object(f["a"])(l,i,o,!1,null,"5bb4bba4",null),m=d.exports,p="https://студентгода63.рф/media",v={components:{Avatar:m},data:function(){return{media:p}},computed:{userInfo:function(){return this.$store.state.user.userInfo}}},h=v,b=(n("9ac3"),Object(f["a"])(h,a,r,!1,null,"41fd6d02",null));t["a"]=b.exports},"0fa5":function(e,t,n){},"1bd6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.items,(function(t,a){return n("a-row",{key:a,attrs:{gutter:[24]}},e._l(t,(function(t){return n("a-col",{key:t.name,attrs:{sm:{span:t.sm?t.sm:24},md:{span:t.md?t.md:12},xl:{span:t.xl?t.xl:8},span:24}},[t.mask||t.disabled?e._e():n("x-input",{ref:t.name,refInFor:!0,class:e.getClass(t),attrs:{label:e.getVisible(t.visible)?e.getLabel(t):"",type:e.getVisible(t.visible)?t.type:"hidden",name:t.name,max:t.max,min:t.min,maxlength:t.maxlength,validation:e.getVisible(t.visible)?t.validation:"",options:e.getOptions(t),multiple:t.multiple,selectable:t.selectable,"error-behavior":"submit"}}),t.mask?n("x-input",{directives:[{name:"mask",rawName:"v-mask",value:t.mask,expression:"input.mask"}],attrs:{label:t.label,type:t.type,name:t.name,validation:t.validation,options:e.getOptions(t),multiple:t.multiple,selectable:t.selectable,"error-behavior":"submit"}}):e._e(),t.disabled?n("x-input",{class:t.class,attrs:{label:t.label,type:t.type,name:t.name,disabled:"","error-behavior":"submit"}}):e._e()],1)})),1)})),1)},r=[],i=n("3a60"),o={directives:{mask:i["mask"]},props:{items:{type:Array,required:!0}},methods:{getVisible:function(e){return!e||e()},getClass:function(e){return"function"==typeof e.class?e.class():e.class},getOptions:function(e){return e.optionName?this.$store.getters[e.optionName]:"function"==typeof e.options?e.options():e.options},getLabel:function(e){return"function"==typeof e.label?e.label():e.label}}},s=o,u=n("2877"),c=Object(u["a"])(s,a,r,!1,null,"3ca6e5ff",null);t["a"]=c.exports},"27d4":function(e,t,n){},"3a60":function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=10)}([function(e,t){e.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},"!":{escape:!0}}},function(e,t,n){"use strict";function a(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var r=n(2),i=n(0),o=n.n(i);t.a=function(e,t){var i=t.value;if((Array.isArray(i)||"string"==typeof i)&&(i={mask:i,tokens:o.a}),"INPUT"!==e.tagName.toLocaleUpperCase()){var s=e.getElementsByTagName("input");if(1!==s.length)throw new Error("v-mask directive requires 1 input, found "+s.length);e=s[0]}e.oninput=function(t){if(t.isTrusted){var o=e.selectionEnd,s=e.value[o-1];for(e.value=n.i(r.a)(e.value,i.mask,!0,i.tokens);o<e.value.length&&e.value.charAt(o-1)!==s;)o++;e===document.activeElement&&(e.setSelectionRange(o,o),setTimeout((function(){e.setSelectionRange(o,o)}),0)),e.dispatchEvent(a("input"))}};var u=n.i(r.a)(e.value,i.mask,!0,i.tokens);u!==e.value&&(e.value=u,e.dispatchEvent(a("input")))}},function(e,t,n){"use strict";var a=n(6),r=n(5);t.a=function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];return Array.isArray(t)?n.i(r.a)(a.a,t,o)(e,t,i,o):n.i(a.a)(e,t,i,o)}},function(e,t,n){"use strict";function a(e){e.component(u.a.name,u.a),e.directive("mask",o.a)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),s=n(7),u=n.n(s);n.d(t,"TheMask",(function(){return u.a})),n.d(t,"mask",(function(){return o.a})),n.d(t,"tokens",(function(){return i.a})),n.d(t,"version",(function(){return c}));var c="0.11.1";t.default=a,"undefined"!=typeof window&&window.Vue&&window.Vue.use(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=n(0),i=n.n(r),o=n(2);t.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return i.a}}},directives:{mask:a.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(e){e!==this.lastValue&&(this.display=e)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(e){e.isTrusted||this.refresh(e.target.value)},refresh:function(e){this.display=e;e=n.i(o.a)(e,this.mask,this.masked,this.tokens);e!==this.lastValue&&(this.lastValue=e,this.$emit("input",e))}}}},function(e,t,n){"use strict";function a(e,t,n){return t=t.sort((function(e,t){return e.length-t.length})),function(a,r){for(var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=0;o<t.length;){var s=t[o];o++;var u=t[o];if(!(u&&e(a,u,!0,n).length>s.length))return e(a,s,i,n)}return""}}t.a=a},function(e,t,n){"use strict";function a(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments[3];e=e||"",t=t||"";for(var r=0,i=0,o="";r<t.length&&i<e.length;){var s=t[r],u=a[s],c=e[i];u&&!u.escape?(u.pattern.test(c)&&(o+=u.transform?u.transform(c):c,r++),i++):(u&&u.escape&&(r++,s=t[r]),n&&(o+=s),c===s&&i++,r++)}for(var l="";r<t.length&&n;){s=t[r];if(a[s]){l="";break}l+=s,r++}return o+l}t.a=a},function(e,t,n){var a=n(8)(n(4),n(9),null,null);e.exports=a.exports},function(e,t){e.exports=function(e,t,n,a){var r,i=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(r=e,i=e.default);var s="function"==typeof i?i.options:i;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),n&&(s._scopeId=n),a){var u=s.computed||(s.computed={});Object.keys(a).forEach((function(e){var t=a[e];u[e]=function(){return t}}))}return{esModule:r,exports:i,options:s}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"mask",rawName:"v-mask",value:e.config,expression:"config"}],attrs:{type:"text"},domProps:{value:e.display},on:{input:e.onInput}})},staticRenderFns:[]}},function(e,t,n){e.exports=n(3)}])}))},"46f9":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-tabs",{attrs:{"tab-position":e.getWidth<920?"right":"top","default-active-key":e.activeTab?e.activeTab:e.activePage},on:{change:function(t){return e.activeTab?e.$emit("setActiveNomination",t):e.$router.push("/profile/"+t)}}},e._l(e.tabs?e.tabs:e.routerTabs,(function(e){return n("a-tab-pane",{key:e.id,attrs:{tab:e.name}})})),1)},r=[],i=(n("a9e3"),n("6528")),o={mixins:[i["a"]],props:{tabs:{type:Array},activeTab:{type:null|Number}},data:function(){return{routerTabs:[{name:"Основные сведения",id:"edit"},{name:"Прикрепленные документы",id:"achievements"}]}},computed:{activePage:function(){return this.$route.meta.tabName}}},s=o,u=n("2877"),c=Object(u["a"])(s,a,r,!1,null,"442d747e",null);t["a"]=c.exports},6233:function(e,t,n){"use strict";n("c336")},"63f0":function(e,t,n){"use strict";n("b158")},6528:function(e,t,n){"use strict";t["a"]={data:function(){return{windowWidth:window.innerWidth}},computed:{getWidth:function(){return this.windowWidth}},mounted:function(){window.addEventListener("resize",this.onResize)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{onResize:function(){this.windowWidth=window.innerWidth}}}},"7d70":function(e,t,n){"use strict";n("e01a")},8640:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e.userInfo?n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("h2",{staticClass:"page-title"},[e._v("Редактирование")]),n("component-tabs")],1),e.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("x-form",{staticClass:"profile-application-container",attrs:{values:e.form},on:{submit:e.saveForm},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("upload-photo"),n("div",{staticClass:"profile-form"},[n("span",{staticClass:"prompt"},[e._v("*-поля, обязательные для заполнения")]),n("application-form",{attrs:{items:e.items}})],1),n("change-password"),n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:e.loading,type:"info",block:"","html-type":"submit"},on:{onSubmit:function(t){return e.toNextStep("back")}}},[e._v(" Сохранить и выйти ")]),n("a-button",{staticClass:"login-form-button",attrs:{disabled:e.loading,type:"primary",block:"","html-type":"submit"},on:{onSubmit:function(t){return e.toNextStep("next")}}},[e._v(" Сохранить и продолжить ")])],1)],1)],1)],1):e._e()],1)},r=[],i=n("5530"),o=n("1da1"),s=(n("a15b"),n("ac1f"),n("1276"),n("d81d"),n("99af"),n("96cf"),n("e4a0")),u=n("1359"),c=n("f60b"),l=n("1bd6"),f=n("46f9"),d=n("c1df"),m=n.n(d),p=n("09de"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"password-container"},[e._m(0),n("x-form",{staticClass:"password-form",attrs:{values:e.form},on:{submit:e.saveForm},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("div",{staticClass:"password-form-inputs"},[n("x-input",{attrs:{label:"Текущий пароль",type:"password",name:"currentPassword",validation:"required","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Придумайте пароль",type:"password",name:"password",validation:"min:8,length","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Повторите пароль",type:"password",name:"password_confirm",validation:"min:8,length|confirm","validation-name":"Password confirmation","error-behavior":"submit"}})],1),n("a-button",{staticClass:"login-form-button",attrs:{disabled:e.loading,type:"primary",block:"","html-type":"submit"}},[e._v(" Сохранить ")])],1)],1)},h=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"password-container--title"},[n("h4",[e._v("Смена пароля")]),n("span",{staticClass:"show-message"},[e._v(" Изменения сохранены ")])])}],b={data:function(){return{loading:!1,form:{currentPassword:"",password:"",password_confirm:""}}},methods:{saveForm:function(){}}},g=b,y=(n("7d70"),n("2877")),_=Object(y["a"])(g,v,h,!1,null,"5e9f08e6",null),x=_.exports,w=n("09bc"),k=n("cd3f"),C=n.n(k),O=n("f729"),j={components:{UploadPhoto:p["a"],ProfileSteps:s["a"],ProfileNomination:u["a"],ProfileInfoblock:c["a"],ApplicationForm:l["a"],ComponentTabs:f["a"],ChangePassword:x},mixins:[O["a"]],data:function(){return{loading:!0,educationForm:w["f"],form:{}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.items),t.next=3,e.getNominations();case 3:e.form=C()(e.userInfo),e.renderForm(),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},methods:{getGender:function(e){return"male"===e?"Мужской":"Женский"},getBirthday:function(e){return e.split("-").reverse().join("-")},renderForm:function(){var e=this;console.log(this.form),this.form.citizenshipCheckbox="РФ"!=this.form.citizenship?"Другое":"РФ",this.educationForm.some((function(t){return t===e.form.form_education}))||(this.form.form_education_another=this.form.form_education,this.form.form_education="Другая"),this.form.nomination=this.form.nomination.map((function(e){return"".concat(e.id)}))},getNominations:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("app/getEntities",{entityName:"nomination"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},saveForm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,console.log(e.form),n=C()(Object(i["a"])(Object(i["a"])({},e.form),{},{form_education:e.form.form_education_another?e.form.form_education_another:e.form.form_education,citizenship:"РФ"===e.form.citizenshipCheckbox?"РФ":e.form.citizenship})),delete n.user_avatar,t.next=7,e.$store.dispatch("app/saveEntity",{entityName:"users",data:n,method:"patch",id:n.id});case 7:return t.next=9,e.$store.dispatch("user/getUserData");case 9:e.$toast.success("Успешно сохранено"),e.$router.push("/profile"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](1),console.log(t.t0),400===(null===t.t0||void 0===t.t0||null===(a=t.t0.response)||void 0===a?void 0:a.status)?(e.$errors.show(t.t0.response.data),e.step="main"):e.$errors.showOnce("Ошибка входа");case 17:return t.prev=17,e.loading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,13,17,20]])})))()}},computed:{userInfo:function(){return this.$store.state.user.userInfo},getFullName:function(){var e=this.userInfo,t=e.first_name,n=e.last_name,a=e.patronymic;return"".concat(t," ").concat(n," ").concat(a)},getAge:function(){return m()().diff(this.userInfo.date_birth,"years")},activePage:function(){return this.$route.meta.tabName}}},E=j,$=(n("b921"),Object(y["a"])(E,a,r,!1,null,"4c27da05",null));t["default"]=$.exports},"9ac3":function(e,t,n){"use strict";n("27d4")},b158:function(e,t,n){},b921:function(e,t,n){"use strict";n("0fa5")},c336:function(e,t,n){},e01a:function(e,t,n){},f729:function(e,t,n){"use strict";var a=n("ade3"),r=n("09bc");t["a"]={data:function(){var e,t=this;return{items:[[{name:"first_name",validation:"required",type:"text",label:"Фамилия"},{name:"last_name",validation:"required",type:"text",label:"Имя"},{name:"patronymic",type:"text",label:"Отчество",md:24}],[{name:"gender",validation:"required",type:"radio",label:"Пол",options:{male:"Мужской",female:"Женский"},class:"inline-checkbox"},{name:"date_birth",validation:"required|after:1950-01-01|before:2005-01-01",min:"1950-01-01",max:"2005-01-01",type:"date",label:"Дата рождения"},{name:"phone_number",validation:[["required"],["min","18"]],mask:"+7 (###) ###-##-##",type:"tel",label:"Номер телефона",md:24}],[{name:"citizenshipCheckbox",validation:"required",type:"radio",label:"Гражданство",options:["РФ","Другое"],class:"inline-checkbox"},{name:"citizenship",validation:"required",visible:function(){return"Другое"===t.form.citizenshipCheckbox},type:"text",label:"Другое гражданство"},{name:"email",validation:"required",type:"text",label:"Email"},{name:"url_vk",validation:"required",type:"url",label:"Ссылка на страницу ВК",md:24,xl:24}],[{name:"region",type:"text",label:"Регион",disabled:!0},{name:"locality",validation:"required",label:"Район/Городской округ",type:"select",options:r["h"]},{name:"district",validation:"required",label:"Населенный пункт",type:"select",options:r["b"],md:24}],[Object(a["a"])({name:"postal_code",validation:"required",type:"text",label:"Почтовый индекс",maxlength:6},"validation","required|min:6,length|max:6,length"),{name:"street",validation:"required",type:"text",label:"Улица"},{name:"house",validation:"required",type:"text",label:"Номер дома",xl:4},{name:"apartment",type:"text",label:"Квартира",xl:4}],[{name:"form_education",validation:"required",type:"select",label:"Форма обучения",options:r["f"]},{name:"form_education_another",validation:"required",visible:function(){return"Другая"===t.form.form_education},type:"text",label:"Другая форма обучения"},{name:"place_education",validation:"required",label:"Место обучения",type:"select",options:r["g"]},(e={name:"name_place_education",validation:"required",label:"Образовательная организация",type:"select"},Object(a["a"])(e,"label",(function(){return"colleges"===t.form.place_education?"ССУЗ":"ВУЗ"})),Object(a["a"])(e,"type","select"),Object(a["a"])(e,"options",(function(){return"colleges"===t.form.place_education?r["c"]:r["l"]})),Object(a["a"])(e,"md",24),Object(a["a"])(e,"xl",24),e)],[{name:"course_education",validation:"required",label:"Курс обучения",type:"select",options:r["d"]},{name:"nomination",validation:"required",label:"Номинация",type:"vue-select",multiple:!0,class:function(){return t.form.nomination.length>=2?"has-all":""},selectable:function(){return t.form.nomination.length<3},optionName:"app/optionNomination",xl:16}]]}}}}}]);
//# sourceMappingURL=chunk-510582e8.505a593f.js.map