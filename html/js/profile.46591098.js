(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{"0ed6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("h2",{staticClass:"page-title"},[t._v(t._s(t.onlyRead?"Просмотр":"Редактирование"))]),n("component-tabs",{attrs:{onlyRead:t.onlyRead}}),t.loading?t._e():n("component-tabs",{attrs:{tabs:t.userInfo.nomination,activeTab:t.activeNomination},on:{setActiveNomination:t.changeNomination}})],1),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",{staticClass:"container-body"},[t._l(t.indicators,(function(e){return n("div",{key:e.id},[e.special_indicator||e.indicator_head_organization?t._e():n("Upload",{attrs:{onlyRead:t.onlyRead,indicator:e,saveAchievement:t.saveAchievement,participationDegree:t.participationDegree,achievements:e.achievements},on:{remove:t.removeAchievement}}),e.special_indicator?n("UploadSpec",{attrs:{onlyRead:t.onlyRead,participationDegree:t.participationDegree,achievements:e.achievements,indicator:e,saveAchievement:t.saveAchievement},on:{remove:t.removeAchievement}}):t._e(),e.indicator_head_organization?n("UploadSpecOrg",{attrs:{onlyRead:t.onlyRead,achievements:e.achievements,indicator:e,saveAchievement:t.saveAchievement},on:{remove:t.removeAchievement}}):t._e()],1)})),t.onlyRead?t._e():n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("router-link",{staticClass:"button-link",attrs:{to:"/profile"}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"info",block:"","html-type":"submit"}},[t._v(" Продолжить позже ")])],1),n("a-tooltip",{attrs:{placement:"top"}},[n("a-button",{staticClass:"login-form-button",attrs:{type:"primary",block:"",disabled:t.buttonDisabled},on:{click:t.applicateAndPush}},[t._v(" "+t._s("submitted_application"===t.userInfo.status_application?"Обновить заявку":"Отправить заявку на конкурс")+" ")])],1)],1)],2)],1)],1)],1)},r=[],i=n("1da1"),s=(n("96cf"),n("bb8d")),o={mixins:[s["a"]],methods:{applicateAndPush:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/sendApplicationContest");case 2:t.$router.push("/profile");case 3:case"end":return e.stop()}}),e)})))()}}},c=o,u=n("2877"),l=Object(u["a"])(c,a,r,!1,null,null,null);e["default"]=l.exports},3235:function(t,e,n){},4434:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("x-form",{staticClass:"participantQuestionnaire",attrs:{values:t.participantQuestionnaire,name:"participant-questionnaire container"},model:{value:t.participantQuestionnaire,callback:function(e){t.participantQuestionnaire=e},expression:"participantQuestionnaire"}},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("span",{staticClass:"subtitle"},[t._v('Регистрация на конкурс "Студент года 2021"')]),n("h2",{staticClass:"page-title"},[t._v(" Этап 2. Анкета участника ")])]),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",{staticClass:"container-body"},[n("upload-photo"),t._l(t.questionnaries,(function(e){return n("Upload",{key:e.id,ref:"questionnaries",refInFor:!0,attrs:{questionnaire:e,onlyRead:t.onlyRead}})})),t.onlyRead?t._e():n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.buttonDisabled,type:"info",block:"","html-type":"submit"},on:{click:function(e){return t.onApplicate("profile")}}},[t._v(" Сохранить и выйти ")]),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.buttonDisabled,type:"primary",block:""},on:{click:function(e){return t.onApplicate("achievements")}}},[t._v(" Сохранить и продолжить ")])],1)],2)],1)],1)],1)},r=[],i=n("5f74"),s=n("09de"),o={components:{UploadPhoto:s["a"]},mixins:[i["a"]]},c=o,u=n("2877"),l=Object(u["a"])(c,a,r,!1,null,null,null);e["default"]=l.exports},"44ef":function(t,e,n){"use strict";n("f4f3")},"4b64":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("span",{staticClass:"subtitle"},[t._v('Регистрация на конкурс "Студент года 2021"')]),n("h2",{staticClass:"page-title"},[t._v(" Этап 3. Прикрепление документов согласно выбранной номинации ")]),n("span",{staticClass:"prompt"},[t._v("Заполняемая номинация:")]),t.loading?t._e():n("component-tabs",{attrs:{tabs:t.userInfo.nomination,activeTab:t.activeNomination},on:{setActiveNomination:t.changeNomination}})],1),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",{staticClass:"container-body"},[t._l(t.indicators,(function(e){return n("div",{key:e.id},[e.special_indicator||e.indicator_head_organization?t._e():n("Upload",{attrs:{onlyRead:t.onlyRead,indicator:e,saveAchievement:t.saveAchievement,participationDegree:t.participationDegree,achievements:e.achievements},on:{remove:t.removeAchievement}}),e.special_indicator?n("UploadSpec",{attrs:{onlyRead:t.onlyRead,participationDegree:t.participationDegree,achievements:e.achievements,indicator:e,saveAchievement:t.saveAchievement},on:{remove:t.removeAchievement}}):t._e(),e.indicator_head_organization?n("UploadSpecOrg",{attrs:{onlyRead:t.onlyRead,achievements:e.achievements,indicator:e,saveAchievement:t.saveAchievement},on:{remove:t.removeAchievement}}):t._e()],1)})),t.onlyRead?t._e():n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("router-link",{staticClass:"button-link",attrs:{to:"/profile"}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"info",block:"","html-type":"submit"}},[t._v(" Продолжить позже ")])],1),n("a-tooltip",{attrs:{placement:"top"}},[n("a-button",{staticClass:"login-form-button",attrs:{type:"primary",block:"",disabled:t.buttonDisabled},on:{click:t.applicateAndPush}},[t._v(" "+t._s("submitted_application"===t.userInfo.status_application?"Обновить заявку":"Отправить заявку на конкурс")+" ")])],1)],1)],2)],1)],1)],1)},r=[],i=n("1da1"),s=(n("96cf"),n("bb8d")),o={mixins:[s["a"]],methods:{applicateAndPush:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/sendApplicationContest");case 2:if(n=e.sent,!n){e.next=5;break}return e.abrupt("return");case 5:t.$router.push("/profile");case 6:case"end":return e.stop()}}),e)})))()}}},c=o,u=n("2877"),l=Object(u["a"])(c,a,r,!1,null,null,null);e["default"]=l.exports},5053:function(t,e,n){},"5ead":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},["create-pass"===t.step?n("div",{staticClass:"container-back",on:{click:function(e){t.step="main"}}},[n("v-icon",{attrs:{name:"chevron-left"}}),n("div",[t._v("назад")])],1):t._e(),t._m(0),n("x-form",{directives:[{name:"show",rawName:"v-show",value:"main"===t.step,expression:"step === 'main'"}],staticClass:"user-application-container",attrs:{values:t.form,name:"application"},on:{submit:function(e){return t.toNextStep("next")},"failed-validation":t.scrollToError},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("div",{staticClass:"step-1"},[n("application-form",{attrs:{items:t.items}}),n("a-row",{staticClass:"clear-class",attrs:{gutter:[0,30]}},[n("div",{staticClass:"confirm-checkbox"},[n("x-input",{attrs:{type:"checkbox",name:"confirmCheckbox1",validation:"acceptAll","validation-rules":{acceptAll:function(t){var e=t.value;return 1===e.length}},"validation-messages":{acceptAll:"Нужно принять соглашение"},options:t.checkboxes,"error-behavior":"submit"}}),n("label",{staticClass:"label",attrs:{for:"formulate--application-26_clause"}},[t._v(" Ознакомлен и согласен с "),n("a",{attrs:{target:"_blank",href:"/position.pdf"}},[t._v("Положением о проведении конкурса по присуждению премии в области развития профессионального образования Самарской области «Студент года 2021»")])])],1),n("div",{staticClass:"confirm-checkbox"},[n("x-input",{attrs:{type:"checkbox",name:"confirmCheckbox2",options:t.checkboxes,"error-behavior":"submit",validation:"acceptAll","validation-rules":{acceptAll:function(t){var e=t.value;return 1===e.length}},"validation-messages":{acceptAll:"Нужно принять соглашение"}}}),n("label",{staticClass:"label",attrs:{for:"formulate--application-28_clause"}},[t._v(" Даю согласие на обработку моих персональных данных. "),n("a",{attrs:{target:"_blank",href:"/privacy.pdf"}},[t._v("С Политикой обработки персональных данных ознакомлен")])])],1),n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:12,offset:6},xl:{span:8,offset:8},lg:{span:16,offset:4},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"info","data-type":"prev",block:"","html-type":"submit"}},[t._v(" Сохранить и выйти ")]),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"primary",block:"","html-type":"submit","data-type":"next"}},[t._v(" Сохранить и продолжить ")])],1)],1)],1)]),n("x-form",{directives:[{name:"show",rawName:"v-show",value:"main"!==t.step,expression:"step !== 'main'"}],attrs:{values:t.createPassForm,name:"pass-form"},on:{submit:t.onSubmit},model:{value:t.createPassForm,callback:function(e){t.createPassForm=e},expression:"createPassForm"}},[n("div",{staticClass:"step-2"},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:12,offset:6},lg:{span:12,offset:6},xl:{span:8,offset:8}}},[n("x-input",{attrs:{label:"Придумайте пароль",type:"password",name:"password",validation:"min:8,length","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Повторите пароль",type:"password",name:"password_confirm",validation:"min:8,length|confirm","validation-name":"Password confirmation","error-behavior":"submit"}}),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"primary",block:"","html-type":"submit"}},[t._v(" Завершить регистрацию ")])],1)],1)],1)])],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-title"},[n("span",{staticClass:"subtitle"},[t._v('Регистрация на конкурс "Студент года 2021"')]),n("h2",{staticClass:"page-title"},[t._v("Этап 1. Основные сведения")]),n("span",{staticClass:"prompt"},[t._v("* - поля, обязательные для заполнения")])])}],i=n("5530"),s=n("1da1"),o=(n("498a"),n("a9e3"),n("caad"),n("2532"),n("96cf"),n("cd3f")),c=n.n(o),u=n("1bd6"),l=n("f729"),p={components:{ApplicationForm:u["a"]},mixins:[l["a"]],data:function(){return{form:{apartment:"",citizenship:null,citizenshipCheckbox:"",course_education:null,date_birth:"",district:"",email:"",first_name:"",form_education:["Очная"],gender:"",house:"",last_name:"",locality:"",nomination:[],patronymic:"",phone_number:"",place_education:"",name_place_education:"",postal_code:"",region:"Самарская область",street:"",url_vk:"",confirmCheckbox1:[],confirmCheckbox2:[]},checkboxes:{clause:""},createPassForm:{password:"",password_confirm:""},nomination:[],step:"main",loading:!1,errorsObj:{}}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getNominations();case 2:case"end":return e.stop()}}),e)})))()},watch:{"form.place_education":function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Array.isArray(t.form.place_education)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.getNominations(t.form.place_education);case 4:t.$formulate.setValues("application",Object(i["a"])(Object(i["a"])({},t.form),{},{nomination:[],name_place_education:null}));case 5:case"end":return e.stop()}}),e)})))()}},methods:{cloneData:function(t){return c()(t)},toNextStep:function(t){this.afterType=t,this.step="create-pass"},toPrevStep:function(){this.step="main"},scrollToError:function(){var t=document.querySelectorAll(".formulate-input-errors");t.length&&t[0].scrollIntoView({block:"center",behavior:"smooth"})},onSubmit:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=t.cloneData(Object(i["a"])(Object(i["a"])({},t.form),{},{citizenship:"РФ"===t.form.citizenshipCheckbox?"РФ":t.form.citizenship,district:"Другое"===t.form.district?t.form.district_another:t.form.district,password:t.createPassForm.password,redirect:t.afterType,form_education:t.form.form_education[0]})),e.next=5,t.$store.dispatch("app/saveEntity",{entityName:"registration",data:n,method:"post"});case 5:return t.$router.push("/"),e.next=8,t.$swal.fire({title:"Регистрация прошла успешно",text:"На почту ".concat(n.email," было отправлено письмо. Для завершения регистрации перейдите по ссылке, указанной в письме."),confirmButtonText:"Хорошо"});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0),400===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)?(t.step="main",t.$formulate.handle(e.t0.response.data,"application")):t.$errors.showOnce("Ошибка входа");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})))()},trimWhitespacedAndToInt:function(t){for(var e in t)"string"==typeof t[e]&&(t[e]=t[e].trim()),t[e]!=Number(t[e])||t[e].includes("+")||"nomination"===e||(t[e]=Number(t[e]))},getNominations:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a={entityName:"nomination",params:{}},t&&(a.params[t]=!0),n.next=5,e.$store.dispatch("app/getEntities",a);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}},d=p,m=(n("6dd3"),n("2877")),f=Object(m["a"])(d,a,r,!1,null,"62bb1a76",null);e["default"]=f.exports},"5ef0":function(t,e,n){"use strict";n("8ba8")},"5f74":function(t,e,n){"use strict";var a=n("2909"),r=n("1da1"),i=(n("99af"),n("c740"),n("d81d"),n("caad"),n("2532"),n("ac1f"),n("1276"),n("498a"),n("d3b7"),n("3ca3"),n("ddb0"),n("4de4"),n("96cf"),n("ac3d")),s=n("cd3f"),o=n.n(s),c=(n("5b55"),n("09bc"));e["a"]={components:{Upload:i["a"]},data:function(){return{loading:!0,buttonDisabled:!1,questionnaries:[],participantQuestionnaire:{},isProfile:!1,issuingAuthority:c["j"],documentView:c["e"]}},computed:{onlyRead:function(){return this.isDateSendApplicationPeriodEnded||this.userInfo&&"fills_application"!==this.userInfo.status_application},isDateSendApplicationPeriodEnded:function(){return this.$store.getters["app/isDateSendApplicationPeriodEnded"]},userInfo:function(){return this.$store.state.user.userInfo},initialIndicators:function(){return this.$store.state.app.indicator}},beforeRouteLeave:function(t,e,n){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.onlyRead&&a.userInfo){e.next=3;break}return n(),e.abrupt("return");case 3:if(!t.query.next){e.next=8;break}return n(),e.abrupt("return");case 8:return e.next=10,a.protectRouting();case 10:if(!e.sent){e.next=12;break}n();case 12:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getBaseIndicators(),e.next=3,t.getIndicatorsReport();case 3:return n=e.sent,t.questionnaries=[].concat(Object(a["a"])(t.questionnaries),Object(a["a"])(n)),t.isProfile=t.getType(),e.next=8,t.getParticipantQuestionnaire();case 8:t.participantQuestionnaireResponse=e.sent,t.participantQuestionnaireResponse&&t.renderQuestionnaires(t.participantQuestionnaireResponse),t.loading=!1;case 11:case"end":return e.stop()}}),e)})))()},methods:{getParticipantQuestionnaire:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("app/getEntities",{entityName:"participant-questionnaire"});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},renderQuestionnaires:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.questionnaries[e.questionnaries.findIndex((function(t){return"autobiography"===t.id}))].documents=t.autobiography,e.questionnaries[e.questionnaries.findIndex((function(t){return"certificate_place_study"===t.id}))].documents=t.certificate_place_study,e.questionnaries[e.questionnaries.findIndex((function(t){return"characteristic"===t.id}))].data=t.characteristic,t.report_card&&t.report_card.map((function(t){e.questionnaries[e.questionnaries.findIndex((function(e){return e.id===t.indicator_report_card}))].data=t}));case 4:case"end":return n.stop()}}),n)})))()},getType:function(){return this.$route.path.includes("profile")},getBaseIndicators:function(){this.questionnaries=[{id:"certificate_place_study",name:"Справка с места учебы*",first_help_text:"Прикрепите сканированную копию справки с места учебы в формате jpeg, pdf, имеющую печать образовательной организации, датированную не ранее 05.04.2021 г. Можно прикрепить потом в личном кабинете. Отправить заявку без этого нельзя",title:"Прикрепить справку",type:"only_file",acceptFormats:["image/jpeg","application/pdf"]},{id:"autobiography",name:"Автобиография конкурсанта*",first_help_text:"Можно прикрепить только 1 документ формата doc, docx",title:"Прикрепить автобиографию",type:"only_file",acceptFormats:["","application/vnd.ms-word","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"]},{id:"characteristic",name:"Характеристики, отзывы и ходатайства",first_help_text:"Вы можете прикрепить документы, подтверждающие Ваше участие и вклад в выбранном Вами направлении за последние два года. Например, характеристики, ходатайства и т.д. студенческих организаций (объединений), администрации вуза/ссуза и т.п. За каждый отдельный новый документ Вы можете получить 1 балл. Максимальное количество баллов – 3",type:"multiple",acceptFormats:["application/pdf"]}]},getIndicatorsReport:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("app/getEntities",{entityName:"indicator-report-card"});case 3:return n=e.sent,e.abrupt("return",t.renderIndicators(n));case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},renderIndicators:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.data.map((function(t){return t.type="radio_and_multiple",t})));case 1:case"end":return e.stop()}}),e)})))()},getFormData:function(t){var e=new FormData;for(var n in t)"documents"===n?t[n].map((function(t){e.append("documents",t)})):e.append(n,t[n]);return e},addDocumentName:function(t){if(t){var e=t.split("/");return e[e.length-1]}},renderDocuments:function(t){var e=this;return t.map((function(t){return t.documentName=e.addDocumentName(t.document),t}))},trimWhitespaces:function(t){for(var e in t)t[e]===String&&t[e].trim()},protectRouting:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$swal.fire({title:"Есть несохраненные данные",text:"Вы точно хотите уйти со страницы? Несохраненные данные будут утеряны.",showCancelButton:!0,confirmButtonText:"Продолжить",cancelButtonText:"Отмена"});case 2:return n=e.sent,a=n.isConfirmed,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},onApplicate:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,s,c,u,l,p,d,m,f,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.buttonDisabled=!0,c=null,u=null,l=[],p=[],d=[],m=[],f=[],e.$refs.questionnaries.map((function(t){t.only_file_document&&f.push(t.id),d.push({reports:Object(a["a"])(t.reports),documents:Object(a["a"])(t.documents),id:t.id,type:t.questionnaire.type,characteristics:Object(a["a"])(t.characteristics),data:t.questionnaire.data})})),n.next=12,Promise.all(d.map(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("autobiography"===n.id&&n.documents.length&&(c=n.documents[0]),"certificate_place_study"===n.id&&n.documents.length&&(u=n.documents[0]),"characteristic"!==n.id||m.length){t.next=10;break}return a=n.characteristics,t.next=6,e.createCharacteristics(a);case 6:if(r=t.sent,r.length){t.next=9;break}return t.abrupt("return");case 9:p.push(r);case 10:if("radio_and_multiple"!==n.type||m.length){t.next=17;break}return n.documents.length&&!n.reports.length&&(m.push("Заполните успеваемость"),Promise.reject("error"),l.push([])),n.data||n.documents.length||!n.reports.length||(m.push("Прикрепите документ к успеваемости"),Promise.reject("error"),l.push([])),t.next=15,e.createReportCard(n);case 15:i=t.sent,l.push(i);case 17:return t.abrupt("return","");case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 12:if(!m.length){n.next=16;break}return m.map((function(t){e.$toast.error(t)})),m=[],n.abrupt("return");case 16:return h=o()({report_card:l.filter((function(t){return!!t})),autobiography:c,certificate_place_study:u,characteristic:p}),h.characteristic.length||delete h.characteristic,h.report_card.length||delete h.report_card,c||delete h.autobiography,h.autobiography||delete h.autobiography,h.certificate_place_study||delete h.certificate_place_study,h=e.getFormData(h),n.next=25,e.$store.dispatch("app/saveEntity",{id:null===(i=e.participantQuestionnaireResponse)||void 0===i?void 0:i.id,data:h,method:null!==(s=e.participantQuestionnaireResponse)&&void 0!==s&&s.id?"patch":"post",entityName:"participant-questionnaire"});case 25:e.$toast.success("Успешно сохранено"),e.$router.push({path:"/".concat(t),query:{next:!0}}),n.next=33;break;case 29:n.prev=29,n.t0=n["catch"](0),console.log(n.t0),e.$errors.show(n.t0.response.data);case 33:return n.prev=33,e.buttonDisabled=!1,n.finish(33);case 36:case"end":return n.stop()}}),n,null,[[0,29,33,36]])})))()},createReportCard:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.reports.length){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.createReports(t.reports);case 4:return a=n.sent,r=e.getFormData({documents:t.documents,reports:a,indicator_report_card:t.id}),n.prev=6,n.next=9,e.$store.dispatch("app/saveEntity",{entityName:"report-card",method:t.data?"patch":"post",id:null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.id,data:r});case 9:return s=n.sent,n.abrupt("return",s.id);case 13:n.prev=13,n.t0=n["catch"](6),console.log(n.t0),e.$toast.error("Анкета заполнена не полностью");case 17:return n.prev=17,e.buttonDisabled=!1,n.finish(17);case 20:case"end":return n.stop()}}),n,null,[[6,13,17,20]])})))()},createReports:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(t.map((function(t){return new Promise(function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(a){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("app/saveEntity",{entityName:"report",method:"post",data:t});case 3:r=n.sent,a(r.id),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0),e.$errors.show(n.t0.response.data);case 11:return n.prev=11,e.buttonDisabled=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,7,11,14]])})));return function(t){return n.apply(this,arguments)}}())})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},createCharacteristics:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(t.map((function(t){return new Promise(function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(a){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.getFormDataCharacteristic(o()(t)),n.prev=1,n.next=4,e.$store.dispatch("app/saveEntity",{entityName:"characteristic",id:null===t||void 0===t?void 0:t.id,method:t.id?"patch":"post",data:r});case 4:i=n.sent,a(i.id),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0),e.$errors.show(n.t0.response.data);case 12:return n.prev=12,e.buttonDisabled=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,8,12,15]])})));return function(t){return n.apply(this,arguments)}}())})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},getFormDataCharacteristic:function(t){var e=new FormData;for(var n in t)"documents"===n?t[n].map((function(t){e.append("documents",t.id)})):e.append(n,t[n]);return e}}}},"6dd3":function(t,e,n){"use strict";n("dda5")},"82e8":function(t,e,n){},8640:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.userInfo?n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("h2",{staticClass:"page-title"},[t._v("Редактирование")]),n("component-tabs",{attrs:{onlyRead:t.onlyRead}})],1),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("x-form",{staticClass:"profile-application-container",attrs:{values:t.form,name:"application"},on:{submit:t.saveForm},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("upload-photo"),n("div",{staticClass:"profile-form"},[n("span",{staticClass:"prompt"},[t._v("*-поля, обязательные для заполнения")]),n("application-form",{attrs:{isProfile:"",items:t.items}})],1),n("change-password",{attrs:{user_id:t.form.id}}),n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"info",block:"","html-type":"submit"}},[t._v(" Сохранить и выйти ")]),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"primary",block:"","html-type":"submit"}},[t._v(" Сохранить и продолжить ")])],1)],1)],1)],1):t._e()],1)},r=[],i=n("5530"),s=n("1da1"),o=(n("a15b"),n("ac1f"),n("1276"),n("caad"),n("2532"),n("d81d"),n("99af"),n("96cf"),n("1bd6")),c=n("46f9"),u=n("c1df"),l=n.n(u),p=n("09de"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"password-container"},[t._m(0),n("x-form",{staticClass:"password-form",attrs:{values:t.form},on:{submit:t.saveForm},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("div",{staticClass:"password-form-inputs"},[n("x-input",{attrs:{label:"Текущий пароль",type:"password",name:"currentPassword",validation:"isNotEqual","error-behavior":"submit","validation-rules":{isNotEqual:function(){return t.form.currentPassword!==t.form.password_confirm}},"validation-messages":{isNotEqual:"Текущий пароль совпадает с новым"}}}),n("x-input",{attrs:{label:"Придумайте пароль",type:"password",name:"password",validation:"min:8,length","error-behavior":"submit"}}),n("x-input",{attrs:{label:"Повторите пароль",type:"password",name:"password_confirm",validation:"min:8,length|confirm","validation-name":"Password confirmation","error-behavior":"submit"}})],1),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.loading,type:"primary",block:"","html-type":"submit"}},[t._v(" Сохранить ")])],1)],1)},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"password-container--title"},[n("h4",[t._v("Смена пароля")])])}],f={data:function(){return{loading:!1,form:{currentPassword:"",password:"",password_confirm:""}}},methods:{saveForm:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,t.$store.dispatch("app/saveEntity",{data:{password:t.form.password},entityName:"reset-password",method:"post"});case 4:t.form={},t.$toast.success("Пароль успешно изменён"),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$toast.error("Такого пользователя не существует");case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})))()}}},h=f,v=(n("dcd4"),n("2877")),b=Object(v["a"])(h,d,m,!1,null,"2304e9ef",null),g=b.exports,_=n("09bc"),x=n("cd3f"),w=n.n(x),y=n("f729"),k={components:{UploadPhoto:p["a"],ApplicationForm:o["a"],ComponentTabs:c["a"],ChangePassword:g},mixins:[y["a"]],data:function(){return{loading:!0,educationForm:_["f"],cities:_["b"],form:{}}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getNominations();case 2:t.form=w()(t.userInfo),t.renderForm(),t.$nextTick((function(){t.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()},watch:{"form.place_education":function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt("return");case 2:if(!Array.isArray(t.form.place_education)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.getNominations(t.form.place_education);case 6:t.$formulate.setValues("application",Object(i["a"])(Object(i["a"])({},t.form),{},{nomination:[],name_place_education:null}));case 7:case"end":return e.stop()}}),e)})))()}},methods:{getGender:function(t){return"male"===t?"Мужской":"Женский"},getBirthday:function(t){return t.split("-").reverse().join("-")},renderForm:function(){this.form.citizenshipCheckbox="РФ"!=this.form.citizenship?"Другое":"РФ",this.form.district_another=this.cities.includes(this.form.district)?null:this.form.district,this.form.district=this.form.district_another?"Другое":this.form.district,this.form.form_education=[this.form.form_education],this.form.nomination=this.form.nomination.map((function(t){return"".concat(t.id)}))},getNominations:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a={entityName:"nomination",params:{}},t&&(a.params[t]=!0),n.next=5,e.$store.dispatch("app/getEntities",a);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},saveForm:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=w()(Object(i["a"])(Object(i["a"])({},t.form),{},{citizenship:"РФ"===t.form.citizenshipCheckbox?"РФ":t.form.citizenship,district:"Другое"===t.form.district?t.form.district_another:t.form.district,form_education:t.form.form_education[0]})),delete n.user_avatar,e.next=6,t.$store.dispatch("app/saveEntity",{entityName:"users",data:n,method:"patch",id:n.id});case 6:return e.next=8,t.$store.dispatch("user/getUserData");case 8:t.$toast.success("Успешно сохранено"),t.$router.push("/profile"),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),console.log(e.t0),400===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)?t.$errors.show(e.t0.response.data):t.$errors.showOnce("Ошибка входа");case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})))()}},computed:{onlyRead:function(){return this.userInfo&&"fills_application"!==this.userInfo.status_application},userInfo:function(){return this.$store.state.user.userInfo},getFullName:function(){var t=this.userInfo,e=t.first_name,n=t.last_name,a=t.patronymic;return"".concat(e," ").concat(n," ").concat(a)},getAge:function(){return l()().diff(this.userInfo.date_birth,"years")},activePage:function(){return this.$route.meta.tabName}}},R=k,C=(n("44ef"),Object(v["a"])(R,a,r,!1,null,"dc776a86",null));e["default"]=C.exports},"8ba8":function(t,e,n){},"8d38":function(t,e,n){"use strict";n("82e8")},9496:function(t,e,n){"use strict";n("3235")},bb8d:function(t,e,n){"use strict";var a=n("1da1"),r=n("ade3"),i=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("ac1f"),n("1276"),n("c740"),n("498a"),n("96cf"),n("2d21")),s=n("fb88"),o=n("5306"),c=n("46f9"),u=n("cd3f"),l=n.n(u),p=n("09bc"),d=n("5b55");e["a"]={components:{Upload:i["a"],ComponentTabs:c["a"],UploadSpec:s["a"],UploadSpecOrg:o["a"]},data:function(){var t;return t={loading:!0,participationDegree:p["l"],buttonDisabled:!1},Object(r["a"])(t,"loading",!1),Object(r["a"])(t,"indicators",[]),Object(r["a"])(t,"activeNomination",null),t},computed:{onlyRead:function(){return this.isDateSendApplicationPeriodEnded||this.userInfo&&"fills_application"!==this.userInfo.status_application},isDateSendApplicationPeriodEnded:function(){return this.$store.getters["app/isDateSendApplicationPeriodEnded"]},userInfo:function(){return this.$store.state.user.userInfo},initialIndicators:function(){return this.$store.state.app.indicator},getMessage:function(){switch("create"){case"create":return"Успешно создано";case"edit":return"Успешно сохранено"}}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.dispatch("user/getUserData");case 3:return e.next=5,t.changeNomination(t.userInfo.nomination[0].id);case 5:case"end":return e.stop()}}),e)})))()},methods:{changeNomination:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.activeNomination=t,n.next=3,e.getIndicatorsByNomination(e.activeNomination);case 3:return n.next=5,e.getAchievementsToIndicators(e.initialIndicators);case 5:e.indicators=n.sent,e.loading=!1;case 7:case"end":return n.stop()}}),n)})))()},getIndicatorsByNomination:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("app/getEntities",{entityName:d["b"],params:{nomination:t}});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},getAchievementsToIndicators:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(t.map((function(t){return new Promise(function(){var n=Object(a["a"])(regeneratorRuntime.mark((function n(a){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("app/getEntities",{entityName:d["a"],params:{indicator:t.id}});case 2:r=n.sent,t.achievements=r.data.map((function(t){return t.documents&&(t.documents=e.renderDocuments(t.documents)),t})),a(t);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},renderDocuments:function(t){var e=this;return t.map((function(t){return t.documentName=e.addDocumentName(t.document),t}))},getFormData:function(t,e){var n=new FormData;for(var a in"spec"===e&&(t.full_name.map((function(t,e){n.append("full_name[".concat(e,"][0]"),t[0]),n.append("full_name[".concat(e,"][1]"),t[1])})),delete t.full_name),t)"documents"===a?t[a].map((function(t){n.append("documents",t)})):n.append(a,t[a]);return n},saveAchievement:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r=n.getFormData(l()(t),e),a.next=4,n.saveEntity(r,e);case 4:a.next=9;break;case 6:throw a.prev=6,a.t0=a["catch"](0),a.t0;case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},saveEntity:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n.buttonDisabled=!0,a.next=4,n.$store.dispatch("app/saveEntity",{data:t,method:"post",entityName:d["a"]});case 4:r=a.sent,n.addNewFields(r),n.$toast.success(n.getMessage),a.next=14;break;case 9:throw a.prev=9,a.t0=a["catch"](0),console.log(a.t0),n.$formulate.handle(a.t0.response.data,e),a.t0;case 14:return a.prev=14,n.buttonDisabled=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[0,9,14,17]])})))()},addDocumentName:function(t){if(t){var e=t.split("/");return e[e.length-1]}},addNewFields:function(t){t.documents&&(t.documents=this.renderDocuments(t.documents));var e=this.indicators.findIndex((function(e){return t.indicators===e.id})),n=this.indicators[e];n.achievements.push(t)},removeAchievement:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,n.next=4,e.$store.dispatch("app/deleteItem",{entityName:d["a"],id:t});case 4:return n.next=6,e.changeNomination(e.activeNomination);case 6:e.$swal("Успешно удалено!"),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0),e.$errors.showOnce(n.t0.response.data);case 13:return n.prev=13,e.loading=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})))()},editAchievement:function(){},trimWhitespaces:function(t){for(var e in t)t[e]===String&&t[e].trim()},onApplicate:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$swal.fire({title:"Отправить завку на конкурс?",text:"После подтверждения действия Вы не сможете редактировать введенные данные",showCancelButton:!0,confirmButtonText:"Отправить",cancelButtonText:"Отмена"});case 2:n=e.sent,n.isConfirmed;case 4:case"end":return e.stop()}}),e)})))()}}}},cfdd:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("x-form",{staticClass:"participantQuestionnaire",attrs:{values:t.participantQuestionnaire,name:"participant-questionnaire container"},model:{value:t.participantQuestionnaire,callback:function(e){t.participantQuestionnaire=e},expression:"participantQuestionnaire"}},[n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("div",{staticClass:"container-title"},[n("h2",{staticClass:"page-title"},[t._v(t._s(t.onlyRead?"Просмотр":"Редактирование"))]),n("component-tabs",{attrs:{onlyRead:t.onlyRead}})],1),t.loading?n("a-skeleton",{attrs:{active:"",paragraph:{rows:16}}}):n("div",{staticClass:"container-body"},[t._l(t.questionnaries,(function(e){return n("Upload",{key:e.id,ref:"questionnaries",refInFor:!0,attrs:{isProfile:t.isProfile,questionnaire:e,onlyRead:t.onlyRead}})})),t.onlyRead?t._e():n("a-col",{staticClass:"inline-buttons",attrs:{md:{span:24,offset:0},xl:{span:14,offset:5},lg:{span:24,offset:0},xs:24}},[n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.buttonDisabled,type:"info",block:"","html-type":"submit"},on:{click:function(e){return t.onApplicate("profile")}}},[t._v(" Сохранить и выйти ")]),n("a-button",{staticClass:"login-form-button",attrs:{disabled:t.buttonDisabled,type:"primary",block:""},on:{click:function(e){return t.onApplicate("profile/achievements")}}},[t._v(" Сохранить и продолжить ")])],1)],2)],1)],1)],1)},r=[],i=n("46f9"),s=n("5f74"),o={components:{ComponentTabs:i["a"]},mixins:[s["a"]]},c=o,u=(n("5ef0"),n("2877")),l=Object(u["a"])(c,a,r,!1,null,null,null);e["default"]=l.exports},dcb8:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container profile-info"},[t.userInfo?n("a-row",{attrs:{gutter:[24]}},[n("a-col",{staticClass:"center",attrs:{xs:{span:24,offset:0},md:{span:22,offset:1},lg:{span:22,offset:1},xl:{span:22,offset:1}}},[n("user-head",{attrs:{userInfo:t.userInfo}},[n("a-tooltip",{attrs:{placement:"top"}},[t.isDateSendApplicationPeriodEnded?n("template",{slot:"title"},[n("span",[t._v("Подача заявок завершилась")])]):t._e(),n("a-button",{staticClass:"login-form-button contest-button",attrs:{type:"primary",disabled:t.isDateSendApplicationPeriodEnded||"submitted_application"===t.userInfoInitial.status_application},on:{click:function(e){return t.$store.dispatch("user/sendApplicationContest")}}},[t._v(" "+t._s("submitted_application"===t.userInfoInitial.status_application?"Заявка отправлена":"Отправить заявку на конкурс")+" ")])],2),n("router-link",{staticClass:"button-link",attrs:{to:t.isDateSendApplicationPeriodEnded||"submitted_application"===t.userInfoInitial.status_application?"/profile/questionnaire":"/profile/edit"}},[n("a-button",{staticClass:"login-form-button",attrs:{type:"info",block:"","html-type":"submit"}},[t._v(" "+t._s(t.isDateSendApplicationPeriodEnded||"submitted_application"===t.userInfoInitial.status_application?"Посмотреть анкету":"Редактировать анкету")+" ")])],1)],1),"main_stage"===t.userInfoInitial.status_application?n("passport-form"):t._e(),n("profile-steps",{attrs:{synonym:t.userInfoInitial.status_application}}),n("profile-nomination",{attrs:{nominations:t.userInfo.nomination}}),t._l(t.infos,(function(e,a){return n("profile-infoblock",{key:a,attrs:{userInfo:t.userInfo,data:e.info,title:e.title}})}))],2)],1):t._e()],1)},r=[],i=(n("a15b"),n("ac1f"),n("1276"),n("7db0"),n("c1f9"),n("4de4"),n("4fad"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"profile-steps"},t._l(t.steps,(function(e,a){return n("div",{key:e.name,class:"profile-steps__step "+t.getStepClass(e.id)},[n("div",{staticClass:"profile-steps__step--count"},[t._v(t._s(a+1))]),n("div",{staticClass:"inline"},[n("div",{staticClass:"profile-steps__step--name",style:t.getStyle(e)},[t._v(t._s(e.name))]),t.showPrompt(e.id)?n("div",{staticClass:"profile-steps__step--prompt"},[t._v(" "+t._s(e.prompt)+" ")]):t._e()])])})),0)}),s=[],o={props:{synonym:{type:String,required:!1}},computed:{currentStep:function(){var t=this,e=this.steps.find((function(e){return e.synonym===t.synonym}));return e.id}},data:function(){return{steps:[{id:0,synonym:"fills_application",name:"Заполнение заявки",color:"#d88ca8",prompt:"Поздравляем! Вы успешно прошли этап регистрации"},{id:1,synonym:"submitted_application",name:"На рассмотрении",prompt:"Ваша заявка на конкурс проверяется экспертами",color:"#0094B3"},{id:2,name:"Участник заочного этапа",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#797dea"},{id:3,name:"Участник очного этапа",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#6E2C6B"},{id:4,name:"Номинант",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#E62D3B"},{id:5,name:"Лауреат",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#FCD800 "},{id:6,name:"Победитель",prompt:"Поздравляем! Вы перешли на очный этап конкурса",color:"#459D27 "}]}},methods:{getStepClass:function(t){return t<this.currentStep?"profile-steps__step--award":t===this.currentStep?"profile-steps__step--current":t>this.currentStep?"profile-steps__step--not-award":void 0},showPrompt:function(t){return t<=this.currentStep},getStyle:function(t){return{background:this.showPrompt(t.id)?t.color:"transparent"}}}},c=o,u=(n("8d38"),n("2877")),l=Object(u["a"])(c,i,s,!1,null,"b8ad081a",null),p=l.exports,d=n("1359"),m=n("f60b"),f=n("09bc"),h=n("bfd1"),v=n("92f8"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"document-container"},[t._m(0),n("x-form",{staticClass:"user-application-container",attrs:{values:t.form,name:"application"},on:{submit:t.onSubmit},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("application-form",{attrs:{items:t.items}}),n("div",{staticClass:"inline-buttons"},[n("a-button",{staticStyle:{padding:"0 50px"},attrs:{disabled:t.loading,type:"primary"}},[t._v("Сохранить")]),n("button",{staticClass:"text-button",attrs:{disabled:t.loading}},[t._v("Отказаться от участия")])],1)],1)],1)},g=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",[t._v(" Поздравляем! Вам одобрили участие в "),n("mark",[t._v("очном этапе")]),t._v(". Вы можете отказаться от очного участия ИЛИ для организации Вашего комфортного пребывания в рамках выездного очного этапа ввести следующие данные для подтверждения очного участия: ")])}],_=n("5530"),x=n("1da1"),w=(n("498a"),n("a9e3"),n("caad"),n("2532"),n("96cf"),n("cd3f")),y=n.n(w),k=n("1bd6"),R={data:function(){return{items:[[{title:"Паспортные данные",xl:24},{name:"seria",validation:"required|min:4,length|max:4,length",type:"text",maxlength:4,label:"Серия"},{name:"number",validation:"required|min:6,length|max:6,length",type:"text",maxlength:4,label:"Номер"},{name:"place",validation:"required",type:"text",label:"Место рождения"}],[{name:"number22",validation:"required",type:"text",label:"Кем выдан"},{name:"pla2ce",validation:"required|min:7,length|max:7,length",mask:"###-###",type:"text",maxlength:6,label:"Код подразделения"},{name:"dsadsad",validation:"required|before:2005-09-19|after:1996-10-01",min:"1996-10-01",max:"2005-09-19",type:"date",label:"Когда выдан"}],[{title:"Адрес регистрации (по паспорту)",xl:24},{name:"district",validation:"required",label:"Город",type:"text",md:24},{name:"street",validation:"required",type:"text",label:"Улица"},{name:"house",type:"text",validation:"required",label:"Номер дома",xl:4},{name:"apartment",max:"999",min:"1",step:"1",type:"number",label:"Квартира",xl:4}]]}}},C={components:{ApplicationForm:k["a"]},mixins:[R],data:function(){return{form:{},nomination:[],step:"main",loading:!1,errorsObj:{}}},methods:{cloneData:function(t){return y()(t)},onSubmit:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=t.cloneData(Object(_["a"])({},t.form)),e.next=5,t.$store.dispatch("app/saveEntity",{entityName:"registration",data:n,method:"post"});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log(e.t0),400===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)?t.$formulate.handle(e.t0.response.data,"application"):t.$errors.showOnce("Неизвестная ошибка");case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,7,11,14]])})))()},trimWhitespacedAndToInt:function(t){for(var e in t)"string"==typeof t[e]&&(t[e]=t[e].trim()),t[e]!=Number(t[e])||t[e].includes("+")||"nomination"===e||(t[e]=Number(t[e]))}}},$=C,j=(n("9496"),Object(u["a"])($,b,g,!1,null,null,null)),O=j.exports,I={mixins:[h["a"]],components:{ProfileSteps:p,ProfileNomination:d["a"],ProfileInfoblock:m["a"],UserHead:v["a"],PassportForm:O},data:function(){return{educationPlace:f["g"]}},methods:{getGender:function(t){return"male"===t?"Мужской":"Женский"},getBirthday:function(t){return t.split("-").reverse().join("-")},getPlaceEducation:function(t){return this.educationPlace.find((function(e){return e.value===t})).label}},computed:{isDateSendApplicationPeriodEnded:function(){return this.$store.getters["app/isDateSendApplicationPeriodEnded"]},userInfoInitial:function(){return this.$store.state.user.userInfo},userInfo:function(){return this.$store.state.user.userInfo?Object.fromEntries(Object.entries(this.$store.state.user.userInfo).filter((function(t){return t[1]}))):{}},buttonDisabled:function(){return this.$store.state.user.buttonDisabled}}},A=I,D=Object(u["a"])(A,a,r,!1,null,null,null);e["default"]=D.exports},dcd4:function(t,e,n){"use strict";n("5053")},dda5:function(t,e,n){},f4f3:function(t,e,n){}}]);