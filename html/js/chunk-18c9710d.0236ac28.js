(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18c9710d"],{"1f31":function(e,t,i){"use strict";i("6236")},"254d":function(e,t,i){"use strict";i("f8a1")},"36aa":function(e,t,i){},"3a60":function(e,t,i){(function(t,i){e.exports=i()})(0,(function(){return function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=10)}([function(e,t){e.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},"!":{escape:!0}}},function(e,t,i){"use strict";function n(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var a=i(2),r=i(0),s=i.n(r);t.a=function(e,t){var r=t.value;if((Array.isArray(r)||"string"==typeof r)&&(r={mask:r,tokens:s.a}),"INPUT"!==e.tagName.toLocaleUpperCase()){var o=e.getElementsByTagName("input");if(1!==o.length)throw new Error("v-mask directive requires 1 input, found "+o.length);e=o[0]}e.oninput=function(t){if(t.isTrusted){var s=e.selectionEnd,o=e.value[s-1];for(e.value=i.i(a.a)(e.value,r.mask,!0,r.tokens);s<e.value.length&&e.value.charAt(s-1)!==o;)s++;e===document.activeElement&&(e.setSelectionRange(s,s),setTimeout((function(){e.setSelectionRange(s,s)}),0)),e.dispatchEvent(n("input"))}};var c=i.i(a.a)(e.value,r.mask,!0,r.tokens);c!==e.value&&(e.value=c,e.dispatchEvent(n("input")))}},function(e,t,i){"use strict";var n=i(6),a=i(5);t.a=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments[3];return Array.isArray(t)?i.i(a.a)(n.a,t,s)(e,t,r,s):i.i(n.a)(e,t,r,s)}},function(e,t,i){"use strict";function n(e){e.component(c.a.name,c.a),e.directive("mask",s.a)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),r=i.n(a),s=i(1),o=i(7),c=i.n(o);i.d(t,"TheMask",(function(){return c.a})),i.d(t,"mask",(function(){return s.a})),i.d(t,"tokens",(function(){return r.a})),i.d(t,"version",(function(){return u}));var u="0.11.1";t.default=n,"undefined"!=typeof window&&window.Vue&&window.Vue.use(n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),a=i(0),r=i.n(a),s=i(2);t.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return r.a}}},directives:{mask:n.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(e){e!==this.lastValue&&(this.display=e)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(e){e.isTrusted||this.refresh(e.target.value)},refresh:function(e){this.display=e;e=i.i(s.a)(e,this.mask,this.masked,this.tokens);e!==this.lastValue&&(this.lastValue=e,this.$emit("input",e))}}}},function(e,t,i){"use strict";function n(e,t,i){return t=t.sort((function(e,t){return e.length-t.length})),function(n,a){for(var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=0;s<t.length;){var o=t[s];s++;var c=t[s];if(!(c&&e(n,c,!0,i).length>o.length))return e(n,o,r,i)}return""}}t.a=n},function(e,t,i){"use strict";function n(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments[3];e=e||"",t=t||"";for(var a=0,r=0,s="";a<t.length&&r<e.length;){var o=t[a],c=n[o],u=e[r];c&&!c.escape?(c.pattern.test(u)&&(s+=c.transform?c.transform(u):u,a++),r++):(c&&c.escape&&(a++,o=t[a]),i&&(s+=o),u===o&&r++,a++)}for(var l="";a<t.length&&i;){o=t[a];if(n[o]){l="";break}l+=o,a++}return s+l}t.a=n},function(e,t,i){var n=i(8)(i(4),i(9),null,null);e.exports=n.exports},function(e,t){e.exports=function(e,t,i,n){var a,r=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(a=e,r=e.default);var o="function"==typeof r?r.options:r;if(t&&(o.render=t.render,o.staticRenderFns=t.staticRenderFns),i&&(o._scopeId=i),n){var c=o.computed||(o.computed={});Object.keys(n).forEach((function(e){var t=n[e];c[e]=function(){return t}}))}return{esModule:a,exports:r,options:o}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"mask",rawName:"v-mask",value:e.config,expression:"config"}],attrs:{type:"text"},domProps:{value:e.display},on:{input:e.onInput}})},staticRenderFns:[]}},function(e,t,i){e.exports=i(3)}])}))},"3e35":function(e,t,i){"use strict";i("7bd3")},4475:function(e,t,i){"use strict";i("6419")},"46f9":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-tabs",{attrs:{"tab-position":e.getWidth<920?"right":"top","default-active-key":e.activeTab?e.activeTab:e.activePage},on:{change:function(t){return e.activeTab?e.$emit("setActiveNomination",t):e.$router.push("/profile/"+t)}}},e._l(e.tabs?e.tabs:e.routerTabs,(function(e){return i("a-tab-pane",{key:e.id,attrs:{tab:e.name}})})),1)},a=[],r=(i("a9e3"),i("6528")),s={mixins:[r["a"]],props:{tabs:{type:Array},activeTab:{type:null|Number}},data:function(){return{routerTabs:[{name:"Основные сведения",id:"edit"},{name:"Анкета участника",id:"questionnaire"},{name:"Прикрепленные документы",id:"achievements"}]}},computed:{activePage:function(){return this.$route.meta.tabName}}},o=s,c=i("2877"),u=Object(c["a"])(o,n,a,!1,null,"06d32528",null);t["a"]=u.exports},5904:function(e,t,i){"use strict";i("36aa")},"5c7b":function(e,t,i){"use strict";i("c155")},6236:function(e,t,i){},6419:function(e,t,i){},6528:function(e,t,i){"use strict";t["a"]={data:function(){return{windowWidth:window.innerWidth}},computed:{getWidth:function(){return this.windowWidth}},mounted:function(){window.addEventListener("resize",this.onResize)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{onResize:function(){this.windowWidth=window.innerWidth}}}},"7bd3":function(e,t,i){},"9ebe":function(e,t,i){"use strict";i("b60a")},b60a:function(e,t,i){},bb8d:function(e,t,i){"use strict";var n=i("1da1"),a=i("ade3"),r=(i("d3b7"),i("3ca3"),i("ddb0"),i("d81d"),i("ac1f"),i("1276"),i("c740"),i("498a"),i("96cf"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"document-container"},[i("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.indicator.name)+" ")]),e.indicator.hint_text?i("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.indicator.hint_text)+" ")]):e._e(),i("div",[i("ol",{staticClass:"achievement-list"},[e._l(e.indicator.achievements,(function(t,n){return i("upload-achievements-item-info",{key:t.id,attrs:{position:n+1,participationDegree:e.participationDegree,setFiles:e.setFiles,item:t,disabled:!0,indicator:e.indicator},on:{remove:function(t){return e.$emit("remove",t)}}})})),i("x-form",{attrs:{values:e.form,name:"achievement"},on:{submit:function(t){return e.submit(e.indicator.id)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[i("upload-achievements-item",{key:e.achievements.length+1,attrs:{setFiles:e.setFiles,position:e.achievements.length+1,participationDegree:e.participationDegree,indicator:e.indicator}})],1)],2)])])}),s=[],o=i("5530"),c=i("b48b"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"achievement-list__item only-achievements"},[e.isVisible?e._e():i("div",{staticClass:"achievement-list__item--info"},[i("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[i("span",{staticClass:"count"},[e._v(e._s(e.position))]),i("x-input",{staticClass:"item-name",attrs:{name:"name",type:"text",validation:"required",label:"Название достижения","error-behavior":"submit"}}),e.indicator.degree_participation?i("x-input",{staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:e.participationDegree,label:"Степень участия","error-behavior":"submit"}}):e._e(),i("x-input",{staticClass:"item-period",attrs:{name:"period",type:"select",validation:"required",options:e.getPeriod,label:"Год","error-behavior":"submit"}})],1),i("div",{staticClass:"achievement-list__item--info--block"},[e.indicator.url?i("x-input",{staticStyle:{width:"100%"},attrs:{type:"url",name:"url",validation:"required",label:"Вставьте ссылку на видео","error-behavior":"submit"}}):e._e()],1),i("div",{staticClass:"achievement-list__item--info--block"},[e.indicator.document?i("file-component",{on:{change:function(t){return e.setFiles(t)}}}):e._e()],1),i("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Сохранить данные достижения")])],1)],1)])},l=[],m=(i("a9e3"),{components:{FileComponent:c["a"]},props:{participationDegree:{type:Array,required:!0},position:{type:Number,required:!0},setFiles:{type:Function,required:!1},indicator:{type:Object,required:!0}},computed:{isVisible:function(){return this.indicator.max_count_achievement===this.indicator.achievements.length},getPeriod:function(){for(var e=this.indicator.period,t=e.start_achievement,i=e.finish_achievement,n=[],a=t;a<=i;a++)n.push(a);return n}}}),p=m,d=(i("254d"),i("2877")),v=Object(d["a"])(p,u,l,!1,null,"2183febc",null),f=v.exports,h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[i("div",{staticClass:"achievement-list__item--tools"},[i("span",{staticClass:"count"},[e._v(e._s(e.position))]),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить достижение")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:e.deleteAchievement}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v(e._s(e.item.name))])]),e.item.degree_participation?i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v(e._s(e.item.degree_participation))])]):e._e(),i("div",{staticClass:"achievement-list__item--read--item item-period"},[i("span",[e._v(e._s(e.item.period))])])]),e.item.url?i("div",{staticClass:"achievement-list__item--read--item"},[i("a",{attrs:{href:e.item.url,target:"_blank"}},[e._v(e._s(e.item.url))])]):e._e(),e.item.documents.length?i("div",{staticClass:"file-container"},[i("div",{staticClass:"file-container__files"},[i("a",{staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(e.item.documents[0].document),target:"_blank"}},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(e.item.documents[0].documentName))])],1)])]):e._e()])},_=[],b=(i("99af"),"https://студентгода63.рф/media"),g={components:{FileComponent:c["a"]},data:function(){return{media:b}},props:{participationDegree:{type:Array,required:!0},position:{type:Number,required:!0},setFiles:{type:Function,required:!1},item:{type:Object,required:!0}},methods:{getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},deleteAchievement:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0});case 2:i=t.sent,n=i.isConfirmed,n&&e.$emit("remove",e.item.id);case 5:case"end":return t.stop()}}),t)})))()}}},x=g,y=(i("1f31"),Object(d["a"])(x,h,_,!1,null,"143f06f0",null)),C=y.exports,k={components:{UploadAchievementsItem:f,FileComponent:c["a"],UploadAchievementsItemInfo:C},props:{achievements:{type:Array,required:!0},participationDegree:{type:Array,required:!0},indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0}},data:function(){return{form:{}}},methods:{setFiles:function(e){this.form.documents=e},submit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.saveAchievement(Object(o["a"])(Object(o["a"])({},t.form),{},{indicators:e}),"achievement");case 3:t.form={},i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.log(i.t0);case 9:case"end":return i.stop()}}),i,null,[[0,6]])})))()}}},w=k,O=(i("3e35"),i("5c7b"),Object(d["a"])(w,r,s,!1,null,null,null)),j=O.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"document-container upload-spec-org"},[i("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.indicator.name)+" ")]),e.indicator.hint_text?i("div",{staticClass:"document-clue"},[e._v(" "+e._s(e.indicator.hint_text)+" ")]):e._e(),i("div",[e.achievements.length?i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[i("div",{staticClass:"achievement-list__item--tools"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить достижение")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:e.deleteAchievement}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("Название достижения")]),i("span",[e._v(e._s(e.achievements[0].name))])]),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("Наименование ассоциации")]),i("span",[e._v(e._s(e.achievements[0].name_association))])]),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("Образовательная организация")]),i("span",[e._v(e._s(e.achievements[0].educational_organization))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Год основания")]),i("span",[e._v(e._s(e.achievements[0].year_foundation))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Характеристика")]),i("span",[e._v(e._s(e.achievements[0].brief_description_association))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Участники")]),i("ul",{staticClass:"participation-person-list"},e._l(e.achievements[0].full_name,(function(t,n){return i("li",{key:n,staticClass:"participation-person-list--item"},[i("span",[e._v(e._s(t[0]))]),i("span",[e._v(e._s(t[1]))])])})),0)]),i("div",{staticClass:"achievement-list__item--read--item item-period"},[i("span",[e._v("Кол-во участников")]),i("span",[e._v(e._s(e.achievements[0].number_participants))])])]),e.achievements[0].documents.length?i("div",{staticClass:"file-container"},[i("div",{staticClass:"file-container__files"},e._l(e.achievements[0].documents,(function(t){return i("a",{key:t.id,staticClass:"file-container__files--file",attrs:{href:e.getDocumentLink(t.document),target:"_blank"}},[i("v-icon",{attrs:{name:"file"}}),i("span",[e._v(e._s(t.documentName))])],1)})),0)]):e._e()]):i("x-form",{staticClass:"achievement-spec",attrs:{values:e.form,name:"spec"},on:{submit:function(t){return e.submit(e.indicator.id)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[i("div",{staticClass:"achievement-spec-block"},[i("x-input",{attrs:{type:"text",name:"name",label:"Название достижения",validation:"required"}})],1),i("upload-spec-description"),i("upload-spec-participant",{attrs:{participants:e.participants,participationDegree:e.participationDegree},on:{"remove-participant":e.removeParticipant,"add-participant":e.addParticipant}}),i("div",{staticClass:"achievement-spec-block"},[i("x-input",{attrs:{type:"number",name:"number_participants",label:"Кол-во участников",validation:"required|number|min:0|max:50",min:"0",max:"200"}})],1),i("div",{staticClass:"achievement-spec-block"},[i("file-component",{attrs:{multiple:""},on:{change:function(t){return e.setFiles(t)}}})],1),i("a-button",{staticClass:"document-container-button spec-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Сохранить данные достижения")])],1)],1)],1)])},F=[],q=(i("a434"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ol",{staticClass:"achievement-spec-block spec-participant"},[e._l(e.participants,(function(t,n){return i("li",{key:t.fullname,staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[i("div",{staticClass:"achievement-list__item--tools"},[i("span",{staticClass:"count"},[e._v(e._s(n+1))]),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить участника")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:function(t){return e.deleteParticipant(n)}}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v(e._s(t.fullname))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v(e._s(t.degree_participation))])])])])})),e.loading?e._e():i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--info"},[i("div",{staticClass:"achievement-list__item--info--block achievement-form-multiple"},[i("x-form",{staticClass:"achievement-spec-block--form",attrs:{name:"participantForm"},on:{submit:e.addParticipant},model:{value:e.participantForm,callback:function(t){e.participantForm=t},expression:"participantForm"}},[i("div",{staticClass:"achievement-spec-block--form-item"},[i("span",{staticClass:"count"},[e._v(e._s(e.participants.length+1))]),i("x-input",{staticClass:"item-name",attrs:{name:"fullname",type:"text",validation:"isFullName",label:"ФИО участника","validation-rules":{isFullName:function(e){var t=e.value;return 3===t.trim().split(" ").length}},"validation-messages":{isFullName:"Введите ФИО"},"error-behavior":"submit"}}),i("x-input",{staticClass:"item-participation",attrs:{name:"degree_participation",type:"select",validation:"required",options:e.participationDegree,label:"Степень участия","error-behavior":"submit"}})],1),i("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Добавить")])],1)],1)],1)])])],2)}),R=[],N={props:{participationDegree:{type:Array,required:!0},participants:{type:Array,required:!0}},data:function(){return{loading:!1,participantForm:{}}},methods:{addParticipant:function(){var e=this;this.loading=!0,this.$emit("add-participant",Object(o["a"])({},this.participantForm)),setTimeout((function(){e.participantForm={},e.loading=!1}),0)},deleteParticipant:function(e){this.$emit("remove-participant",e)}}},$=N,D=(i("9ebe"),Object(d["a"])($,q,R,!1,null,null,null)),E=D.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"achievement-spec-block achievement-spec-block--descirption"},[i("x-input",{staticClass:"item-name",attrs:{name:"name_association",type:"text",validation:"required",label:"Наименование ассоциации","error-behavior":"submit"}}),i("x-input",{staticClass:"item-participation",attrs:{name:"educational_organization",type:"text",validation:"required",label:"Образовательная организация","error-behavior":"submit"}}),i("x-input",{staticClass:"item-period",attrs:{name:"year_foundation",type:"text",validation:"required",label:"Год основания","error-behavior":"submit"}}),i("x-input",{staticClass:"item-period",attrs:{name:"brief_description_association",type:"textarea",validation:"required",label:"Характеристика","error-behavior":"submit"}})],1)},z=[],T={},I=T,S=(i("5904"),Object(d["a"])(I,P,z,!1,null,null,null)),U=S.exports,B="https://студентгода63.рф/media",L={components:{FileComponent:c["a"],UploadSpecParticipant:E,UploadSpecDescription:U},props:{participationDegree:{type:Array,required:!0},indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},achievements:{type:Array,required:!0}},data:function(){return{media:B,form:{},participants:[]}},methods:{getDocumentLink:function(e){return"".concat(this.media,"/").concat(e)},setFiles:function(e){this.form.documents=e},submit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,n=t.participants.map((function(e){return[e.fullname,e.degree_participation]})),i.next=4,t.saveAchievement(Object(o["a"])(Object(o["a"])({},t.form),{},{full_name:n,indicators:e}),"spec");case 4:t.form={},i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](0),console.log(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()},deleteAchievement:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0});case 2:i=t.sent,n=i.isConfirmed,n&&e.$emit("remove",e.achievements[0].id);case 5:case"end":return t.stop()}}),t)})))()},addParticipant:function(e){this.participants.push(e)},removeParticipant:function(e){this.participants.splice(e,1)}}},M=L,V=(i("4475"),Object(d["a"])(M,A,F,!1,null,null,null)),W=V.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"document-container upload-spec-org"},[i("h6",{staticClass:"document-title"},[e._v(" "+e._s(e.indicator.name)+" ")]),i("div",[e.achievements.length?i("li",{staticClass:"achievement-list__item"},[i("div",{staticClass:"achievement-list__item--read"},[i("div",{staticClass:"achievement-list__item--tools"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[e._v("Удалить достижение")])]),i("v-icon",{staticClass:"remove",attrs:{name:"times"},on:{click:e.deleteAchievement}})],2)],1),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("Название достижения")]),i("span",[e._v(e._s(e.achievements[0].name))])]),i("div",{staticClass:"achievement-list__item--read--item item-name"},[i("span",[e._v("ФИО организатора")]),i("span",[e._v(e._s(e.achievements[0].full_name_head_organization))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Курс")]),i("span",[e._v(e._s(e.achievements[0].course_head_organization))])]),i("div",{staticClass:"achievement-list__item--read--item item-participation"},[i("span",[e._v("Номер телефона")]),i("span",[e._v(e._s(e.achievements[0].phone_head_organization))])]),i("div",{staticClass:"achievement-list__item--read--item item-period"},[i("span",[e._v("E-mail")]),i("span",[e._v(e._s(e.achievements[0].email_head_organization))])])])]):i("x-form",{attrs:{values:e.form,name:"spec-org"},on:{submit:function(t){return e.submit(e.indicator.id)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[i("x-input",{attrs:{type:"text",name:"name",label:"Название достижения",validation:"required"}}),i("x-input",{attrs:{type:"text",name:"full_name_head_organization",label:"ФИО организатора",validation:"isFullName","validation-rules":{isFullName:function(e){var t=e.value;return 3===t.trim().split(" ").length}},"validation-messages":{isFullName:"Введите ФИО"}}}),i("x-input",{attrs:{type:"select",options:[1,2,3,4,5,6],name:"course_head_organization",label:"Курс",validation:"required"}}),i("x-input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"`+7 (###) ###-##-##`"}],attrs:{type:"tel",name:"phone_head_organization",label:"Номер телефона",validation:[["required"],["min","18"]]}}),i("x-input",{attrs:{type:"email",name:"email_head_organization",label:"E-mail",validation:"required"}}),i("a-button",{staticClass:"document-container-button",attrs:{type:"info",block:"","html-type":"submit"}},[i("v-icon",{attrs:{name:"plus"}}),i("span",[e._v("Добавить")])],1)],1)],1)])},J=[],X=i("3a60"),G={directives:{mask:X["mask"]},components:{FileComponent:c["a"],UploadSpecParticipant:E,UploadSpecDescription:U},props:{indicator:{type:Object,required:!0},saveAchievement:{type:Function,required:!0},achievements:{type:Array,required:!0}},data:function(){return{form:{}}},methods:{submit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.saveAchievement(Object(o["a"])(Object(o["a"])({},t.form),{},{indicators:e}),"spec-org");case 3:t.form={},i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.log(i.t0);case 9:case"end":return i.stop()}}),i,null,[[0,6]])})))()},deleteAchievement:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Вы точно хотите удалить достижение?",showCancelButton:!0});case 2:i=t.sent,n=i.isConfirmed,n&&e.$emit("remove",e.achievements[0].id);case 5:case"end":return t.stop()}}),t)})))()}}},H=G,K=Object(d["a"])(H,Z,J,!1,null,null,null),Q=K.exports,Y=i("46f9"),ee=i("cd3f"),te=i.n(ee),ie=i("09bc"),ne=i("5b55");t["a"]={components:{Upload:j,ComponentTabs:Y["a"],UploadSpec:W,UploadSpecOrg:Q},data:function(){var e;return e={loading:!0,participationDegree:ie["k"],buttonDisabled:!1},Object(a["a"])(e,"loading",!1),Object(a["a"])(e,"indicators",[]),Object(a["a"])(e,"activeNomination",null),e},computed:{userInfo:function(){return this.$store.state.user.userInfo},initialIndicators:function(){return this.$store.state.app.indicator},getMessage:function(){switch("create"){case"create":return"Успешно создано";case"edit":return"Успешно сохранено"}}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.changeNomination(e.userInfo.nomination[0].id);case 2:case"end":return t.stop()}}),t)})))()},methods:{changeNomination:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.loading=!0,t.activeNomination=e,i.next=4,t.getIndicatorsByNomination(t.activeNomination);case 4:return i.next=6,t.getAchievementsToIndicators(t.initialIndicators);case 6:t.indicators=i.sent,console.log(t.indicators),t.loading=!1;case 9:case"end":return i.stop()}}),i)})))()},getIndicatorsByNomination:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.$store.dispatch("app/getEntities",{entityName:ne["b"],params:{nomination:e}});case 3:i.next=8;break;case 5:i.prev=5,i.t0=i["catch"](0),console.log(i.t0);case 8:case"end":return i.stop()}}),i,null,[[0,5]])})))()},getAchievementsToIndicators:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Promise.all(e.map((function(e){return new Promise(function(){var i=Object(n["a"])(regeneratorRuntime.mark((function i(n){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$store.dispatch("app/getEntities",{entityName:ne["a"],params:{indicator:e.id}});case 2:a=i.sent,e.achievements=a.data.map((function(e){return e.documents&&(e.documents=t.renderDocuments(e.documents)),e})),n(e);case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())})));case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}}),i)})))()},renderDocuments:function(e){var t=this;return e.map((function(e){return e.documentName=t.addDocumentName(e.document),e}))},getFormData:function(e,t){var i=new FormData;for(var n in"spec"===t&&(e.full_name.map((function(e,t){i.append("full_name[".concat(t,"][0]"),e[0]),i.append("full_name[".concat(t,"][1]"),e[1])})),delete e.full_name),e)"documents"===n?e[n].map((function(e){i.append("documents",e)})):i.append(n,e[n]);return i},saveAchievement:function(e,t){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a=i.getFormData(te()(e),t),console.log(e),n.next=5,i.saveEntity(a,t);case 5:n.next=10;break;case 7:throw n.prev=7,n.t0=n["catch"](0),n.t0;case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},saveEntity:function(e,t){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i.buttonDisabled=!0,n.next=4,i.$store.dispatch("app/saveEntity",{data:e,method:"post",entityName:ne["a"]});case 4:a=n.sent,i.addNewFields(a),i.$toast.success(i.getMessage),n.next=14;break;case 9:throw n.prev=9,n.t0=n["catch"](0),console.log(n.t0,t),i.$formulate.handle(n.t0.response.data,t),n.t0;case 14:return n.prev=14,i.buttonDisabled=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,9,14,17]])})))()},addDocumentName:function(e){if(e){var t=e.split("/");return t[t.length-1]}},addNewFields:function(e){e.documents&&(e.documents=this.renderDocuments(e.documents));var t=this.indicators.findIndex((function(t){return e.indicators===t.id})),i=this.indicators[t];i.achievements.push(e)},removeAchievement:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.loading=!0,i.prev=1,i.next=4,t.$store.dispatch("app/deleteItem",{entityName:ne["a"],id:e});case 4:return i.next=6,t.changeNomination(t.activeNomination);case 6:t.$swal("Успешно удалено!"),i.next=13;break;case 9:i.prev=9,i.t0=i["catch"](1),console.log(i.t0),t.$errors.showOnce(i.t0.response.data);case 13:return i.prev=13,t.loading=!1,i.finish(13);case 16:case"end":return i.stop()}}),i,null,[[1,9,13,16]])})))()},editAchievement:function(){},trimWhitespaces:function(e){for(var t in e)e[t]===String&&e[t].trim()},onApplicate:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({title:"Отправить завку на конкурс?",text:"После подтверждения действия Вы не сможете редактировать введенные данные",showCancelButton:!0,confirmButtonText:"Отправить",cancelButtonText:"Отмена"});case 2:i=t.sent,i.isConfirmed;case 4:case"end":return t.stop()}}),t)})))()}}}},c155:function(e,t,i){},f8a1:function(e,t,i){}}]);
//# sourceMappingURL=chunk-18c9710d.0236ac28.js.map