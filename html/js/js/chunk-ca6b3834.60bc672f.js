(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca6b3834"],{2532:function(t,e,a){"use strict";var n=a("23e7"),r=a("5a34"),i=a("1d80"),o=a("ab13");n({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(i(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"2dd8":function(t,e,a){"use strict";var n=a("5530"),r=a("1da1");a("498a"),a("99af"),a("96cf");e["a"]={data:function(){return{loading:!0,buttonDisabled:!1}},methods:{getEntity:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,e.$store.dispatch("app/getItem",{entityName:e.entityName,id:e.getID});case 4:if(r=a.sent,!t){a.next=7;break}return a.abrupt("return",r.data);case 7:e.formData=Object(n["a"])(Object(n["a"])({},e.formData),r.data),console.log(e.formData),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},trimWhitespaces:function(t){for(var e in t)t[e]===String&&t[e].trim()},saveEntity:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.buttonDisabled=!0,e.trimWhitespaces(e.formData),a.next=5,e.$store.dispatch("app/saveEntity",{id:e.getID,data:t||e.formData,method:e.method,entityName:e.entityName});case 5:n=a.sent,e.$toast.success(e.getMessage),e.$router.push("/".concat(e.entityName,"/read/").concat(n.id)),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0),e.$errors.showOnce(a.t0.response.data);case 14:return a.prev=14,e.buttonDisabled=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[0,10,14,17]])})))()},deleteItem:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,e.$store.dispatch("app/deleteItem",{entityName:e.entityName,id:t});case 4:e.$toast.success("Успешно удалено"),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.log(a.t0),e.$errors.showOnce(a.t0.response.data);case 11:return a.prev=11,e.loading=!1,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,7,11,14]])})))()}},computed:{disabled:function(){return"read"===this.action},getID:function(){if("_"!==this.id)return this.id},method:function(){switch(this.action){case"create":return"post";case"edit":return"patch";default:return null}},getButtonAction:function(){switch(this.action){case"create":return"Создать";case"read":return"Редактировать";case"edit":return"Сохранить"}},getAction:function(){switch(this.action){case"create":return"Создание";case"read":return"Просмотр";case"edit":return"Редактирование"}},getMessage:function(){switch(this.action){case"create":return"Успешно создано";case"edit":return"Успешно сохранено"}}}}},"498a":function(t,e,a){"use strict";var n=a("23e7"),r=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},"5a34":function(t,e,a){var n=a("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},"7e4a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("x-crud",{attrs:{loading:t.loading}},["create"===t.action?a("FormulateInput",{attrs:{label:"Тип показателя",type:"radio",name:"indicatorType",options:t.indicatorTypes,disabled:t.disabled},model:{value:t.indicatorCurrentType,callback:function(e){t.indicatorCurrentType=e},expression:"indicatorCurrentType"}}):t._e(),"default"===t.indicatorCurrentType?a("x-form",{attrs:{name:"defaultForm",values:t.defaultForm},on:{submit:function(e){return t.onsubmit("defaultForm")}},model:{value:t.defaultForm,callback:function(e){t.defaultForm=e},expression:"defaultForm"}},[a("default-form",{attrs:{checkboxes:t.checkboxes,disabled:t.disabled,formData:t.defaultForm,getButtonAction:t.getButtonAction}})],1):t._e(),"spec"===t.indicatorCurrentType?a("x-form",{attrs:{name:"specForm",values:t.specForm},on:{submit:function(e){return t.onsubmit("specForm")}},model:{value:t.specForm,callback:function(e){t.specForm=e},expression:"specForm"}},[a("spec-form",{attrs:{getButtonAction:t.getButtonAction,disabled:t.disabled,formData:t.specForm}})],1):t._e(),"specOrg"===t.indicatorCurrentType?a("x-form",{attrs:{name:"specOrgForm",values:t.specOrgForm},on:{submit:function(e){return t.onsubmit("specOrgForm")}},model:{value:t.specOrgForm,callback:function(e){t.specOrgForm=e},expression:"specOrgForm"}},[a("spec-org-form",{attrs:{getButtonAction:t.getButtonAction,disabled:t.disabled,formData:t.specOrgForm}})],1):t._e()],1)},r=[],i=a("5530"),o=a("1da1"),s=(a("d81d"),a("caad6"),a("2532"),a("96cf"),a("2dd8")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-row",{attrs:{gutter:[24,24]}},[a("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[a("x-input",{attrs:{label:"Название",name:"name",type:"text",validation:"required",disabled:t.disabled}}),a("x-input",{attrs:{label:"Номинация",name:"nomination",options:t.$store.getters["app/optionNomination"],type:"select",validation:"required",disabled:t.disabled}}),a("x-input",{attrs:{label:"Элементы заполнения",type:"checkbox",name:"checkboxes",options:t.checkboxes,"error-behavior":"submit",disabled:t.disabled}})],1),a("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[a("x-input",{attrs:{type:"number",name:"max_count_achievement",label:"Максимальное количество достижений",validation:"required|number|min:0|max:50",min:"0",max:"200",disabled:t.disabled}}),a("x-input",{attrs:{type:"number",name:"count_score_per_achievement",label:"Балл за достижение",validation:"required|number|min:0|max:50",min:"0",max:"200",disabled:t.disabled}}),a("x-input",{attrs:{label:"Период",name:"period",options:t.$store.getters["app/optionPeriod"],type:"select",validation:"required",disabled:t.disabled}})],1),t.formData.checkboxes&&t.formData.checkboxes.includes("hint")?a("a-col",{attrs:{span:"24"}},[a("x-input",{attrs:{label:"Подсказка",name:"hint_text",type:"textarea",disabled:t.disabled,validation:"required|max:"+t.textareaMaxLength+",length",help:t.formData.hint_text&&"Максимально "+t.textareaMaxLength+". "+(t.textareaMaxLength-t.formData.hint_text.length<=0?0:t.textareaMaxLength-t.formData.hint_text.length)+" символось осталось."}})],1):t._e(),a("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[a("div",{staticClass:"crud-form-button"},[a("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[t._v(" "+t._s(t.getButtonAction)+" ")])],1)])],1)},u=[],l={props:["formData","disabled","checkboxes","getButtonAction"],data:function(){return{textareaMaxLength:1024}}},d=l,m=a("2877"),p=Object(m["a"])(d,c,u,!1,null,"e48333ee",null),f=p.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-row",{attrs:{gutter:[24,24]}},[a("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[a("x-input",{attrs:{type:"text",name:"name",label:"Название показателя",validation:"required",disabled:t.disabled}}),a("x-input",{attrs:{type:"number",name:"count_score_part_1_spec",label:"Балл за описание",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:t.disabled}}),a("x-input",{attrs:{type:"number",name:"count_score_part_2_spec",label:"Балл за участников",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:t.disabled}}),a("x-input",{attrs:{type:"number",name:"minimum_number_participants_spec",label:"Мин. кол-во баллов",validation:"required|number|min:0|max:999",help:"Минимальное количество занесённых участников для получения баллов",min:"1",max:"999",disabled:t.disabled}})],1),a("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[a("x-input",{attrs:{type:"number",name:"count_score_part_3_spec",label:"Балл за кол-во участников",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:t.disabled}}),a("x-input",{attrs:{type:"number",name:"count_score_part_4_spec",label:"Балл за документы",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:t.disabled}}),a("x-input",{attrs:{label:"Номинация",name:"nomination",options:t.$store.getters["app/optionNomination"],type:"select",validation:"required",disabled:t.disabled}}),a("x-input",{attrs:{label:"Подсказка",name:"hint_text",type:"textarea",disabled:t.disabled,validation:"required|max:"+t.textareaMaxLength+",length",help:t.formData.hint_text&&"Максимально "+t.textareaMaxLength+". "+(t.textareaMaxLength-t.formData.hint_text.length<=0?0:t.textareaMaxLength-t.formData.hint_text.length)+" символось осталось."}})],1),a("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[a("div",{staticClass:"crud-form-button"},[a("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[t._v(" "+t._s(t.getButtonAction)+" ")])],1)])],1)},h=[],x={props:["formData","disabled","checkboxes","getButtonAction"],data:function(){return{textareaMaxLength:1024}}},g=x,v=Object(m["a"])(g,b,h,!1,null,"5132066f",null),_=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-row",{attrs:{gutter:[24,24]}},[a("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[a("x-input",{attrs:{type:"text",name:"name",label:"Название показателя",validation:"required",disabled:t.disabled}}),a("x-input",{attrs:{label:"Номинация",name:"nomination",options:t.$store.getters["app/optionNomination"],type:"select",validation:"required",disabled:t.disabled}})],1),a("a-col",{staticClass:"col-form",attrs:{md:"12",lg:{span:12,offset:0},xl:{span:12,offset:0}}},[a("x-input",{attrs:{type:"number",name:"count_score_spec_2",label:"Кол-во баллов",validation:"required|number|min:0|max:999",min:"1",max:"999",disabled:t.disabled}}),a("x-input",{attrs:{label:"Подсказка",name:"hint_text",type:"textarea",disabled:t.disabled,validation:"required|max:"+t.textareaMaxLength+",length",help:t.formData.hint_text&&"Максимально "+t.textareaMaxLength+". "+(t.textareaMaxLength-t.formData.hint_text.length<=0?0:t.textareaMaxLength-t.formData.hint_text.length)+" символось осталось."}})],1),a("a-col",{attrs:{md:{span:6,offset:9},lg:{span:6,offset:9},xl:{span:6,offset:9}}},[a("div",{staticClass:"crud-form-button"},[a("a-button",{attrs:{type:"primary",block:"","html-type":"submit"}},[t._v(" "+t._s(t.getButtonAction)+" ")])],1)])],1)},k=[],F={props:["formData","disabled","checkboxes","getButtonAction"],data:function(){return{textareaMaxLength:1024}}},O=F,w=Object(m["a"])(O,y,k,!1,null,"0b33ce4e",null),D=w.exports,C=a("cd3f"),j=a.n(C),q={props:["action","id"],components:{DefaultForm:f,SpecForm:_,SpecOrgForm:D},mixins:[s["a"]],data:function(){return{defaultForm:{checkboxes:[]},specForm:{},specOrgForm:{},indicator:null,entityName:"indicator",checkboxes:[{value:"degree_participation",label:"Степень участия"},{value:"document",label:"Документ"},{value:"url",label:"Ссылка на видео"},{value:"hint",label:"Подсказка"}],indicatorCurrentType:"default",indicatorTypes:{default:"Показатель",spec:"Спец.показатель",specOrg:"Спец.показатель руководителя орг."}}},methods:{onsubmit:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("read"!==e.action){a.next=3;break}return e.$router.push("/indicator/edit/".concat(e.id)),a.abrupt("return");case 3:return n=j()(e[t]),console.log(n),"defaultForm"===t&&(n=e.saveDefault(n)),"specForm"===t&&(n=e.saveSpec(n)),"specOrgForm"===t&&(n=e.saveSpecOrg(n)),a.prev=8,a.next=11,e.saveEntity(n);case 11:a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](8),console.log(a.t0);case 16:case"end":return a.stop()}}),a,null,[[8,13]])})))()},saveDefault:function(t){var e=Object(i["a"])({},t);return this.checkboxes.map((function(t){e[t.value]=e.checkboxes.includes(t.value)})),e.checkboxes.includes("hint")||(e.hint_text=null),e},saveSpec:function(t){return Object(i["a"])(Object(i["a"])({},t),{},{special_indicator:!0})},saveSpecOrg:function(t){return Object(i["a"])(Object(i["a"])({},t),{},{indicator_head_organization:!0})},getEntities:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$store.dispatch("app/getEntities",{entityName:t});case 3:a.next=8;break;case 5:a.prev=5,a.t0=a["catch"](0),console.log(a.t0);case 8:case"end":return a.stop()}}),a,null,[[0,5]])})))()},renderCheckboxes:function(){var t=this;this.defaultForm.period="".concat(this.defaultForm.period.id),this.defaultForm.hint_text&&this.defaultForm.checkboxes.push("hint");var e=function(e){t.checkboxes.some((function(a){return a.value===e&&t.defaultForm[e]}))&&t.defaultForm.checkboxes.push(e)};for(var a in this.defaultForm)e(a)},checkTypeIndicator:function(t){return t.special_indicator?(this.indicatorCurrentType="spec",this.specForm=t,void(this.specForm.nomination="".concat(this.specForm.nomination.id))):t.indicator_head_organization?(this.indicatorCurrentType="specOrg",this.specOrgForm=t,void(this.specOrgForm.nomination="".concat(this.specOrgForm.nomination.id))):(this.indicatorCurrentType="default",this.defaultForm=Object(i["a"])(Object(i["a"])({},this.defaultForm),t),void this.renderCheckboxes())}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getEntities("nomination");case 2:return e.next=4,t.getEntities("period");case 4:if("create"===t.action){e.next=9;break}return e.next=7,t.getEntity(!0);case 7:a=e.sent,t.checkTypeIndicator(a);case 9:t.loading=!1,console.log(t.formData);case 11:case"end":return e.stop()}}),e)})))()}},$=q,M=Object(m["a"])($,n,r,!1,null,"636b9bae",null);e["default"]=M.exports},ab13:function(t,e,a){var n=a("b622"),r=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[r]=!1,"/./"[t](e)}catch(n){}}return!1}},c8d2:function(t,e,a){var n=a("d039"),r=a("5899"),i="​᠎";t.exports=function(t){return n((function(){return!!r[t]()||i[t]()!=i||r[t].name!==t}))}},caad6:function(t,e,a){"use strict";var n=a("23e7"),r=a("4d64").includes,i=a("44d2");n({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")}}]);
//# sourceMappingURL=chunk-ca6b3834.60bc672f.js.map